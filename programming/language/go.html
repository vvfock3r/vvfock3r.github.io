<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/favicon.png"><title>Goæ ¸å¿ƒè¯­æ³• | VVFock3r Docs</title><meta name="description" content="VVFock3r Docs">
    <link rel="preload" href="/assets/style-q_4QZCew.css" as="style"><link rel="stylesheet" href="/assets/style-q_4QZCew.css">
    <link rel="modulepreload" href="/assets/app-BW1Rdw-6.js"><link rel="modulepreload" href="/assets/go.html-DCNTPB7c.js">
    <link rel="prefetch" href="/assets/index.html-DbPLRC4E.js" as="script"><link rel="prefetch" href="/assets/about.html-sw9pjGOB.js" as="script"><link rel="prefetch" href="/assets/vuepress.html-B9wqtdih.js" as="script"><link rel="prefetch" href="/assets/Pyenv.html-CAGHXv3d.js" as="script"><link rel="prefetch" href="/assets/python.html-DaISXvEX.js" as="script"><link rel="prefetch" href="/assets/404.html-gcZaN7Ac.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/logo.png" alt="VVFock3r Docs"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">VVFock3r Docs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ’» ç¼–ç¨‹å¼€å‘"><span class="title">ğŸ’» ç¼–ç¨‹å¼€å‘</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ’» ç¼–ç¨‹å¼€å‘"><span class="title">ğŸ’» ç¼–ç¨‹å¼€å‘</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ”¥ ç¼–ç¨‹è¯­è¨€ Â· æ ¸å¿ƒæ–‡æ¡£</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/python.html" aria-label="Python Â· è¯­æ³•åŸºç¡€"><!--[--><!--[--><!--]--><!--]-->Python Â· è¯­æ³•åŸºç¡€<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/python-module.html" aria-label="Python Â· å¸¸ç”¨æ¨¡å—"><!--[--><!--[--><!--]--><!--]-->Python Â· å¸¸ç”¨æ¨¡å—<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/programming/language/go.html" aria-label="Go Â· è¯­è¨€è¯­æ³•"><!--[--><!--[--><!--]--><!--]-->Go Â· è¯­è¨€è¯­æ³•<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/go-module.html" aria-label="Go Â· å¸¸ç”¨æ¨¡å—"><!--[--><!--[--><!--]--><!--]-->Go Â· å¸¸ç”¨æ¨¡å—<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/sql.html" aria-label="SQL Â· æ•°æ®åº“æŸ¥è¯¢"><!--[--><!--[--><!--]--><!--]-->SQL Â· æ•°æ®åº“æŸ¥è¯¢<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about/about.html" aria-label="â„¹ï¸ å…³äº"><!--[--><!--[--><!--]--><!--]-->â„¹ï¸ å…³äº<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ’» ç¼–ç¨‹å¼€å‘"><span class="title">ğŸ’» ç¼–ç¨‹å¼€å‘</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ’» ç¼–ç¨‹å¼€å‘"><span class="title">ğŸ’» ç¼–ç¨‹å¼€å‘</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ”¥ ç¼–ç¨‹è¯­è¨€ Â· æ ¸å¿ƒæ–‡æ¡£</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/python.html" aria-label="Python Â· è¯­æ³•åŸºç¡€"><!--[--><!--[--><!--]--><!--]-->Python Â· è¯­æ³•åŸºç¡€<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/python-module.html" aria-label="Python Â· å¸¸ç”¨æ¨¡å—"><!--[--><!--[--><!--]--><!--]-->Python Â· å¸¸ç”¨æ¨¡å—<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/programming/language/go.html" aria-label="Go Â· è¯­è¨€è¯­æ³•"><!--[--><!--[--><!--]--><!--]-->Go Â· è¯­è¨€è¯­æ³•<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/go-module.html" aria-label="Go Â· å¸¸ç”¨æ¨¡å—"><!--[--><!--[--><!--]--><!--]-->Go Â· å¸¸ç”¨æ¨¡å—<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/programming/language/sql.html" aria-label="SQL Â· æ•°æ®åº“æŸ¥è¯¢"><!--[--><!--[--><!--]--><!--]-->SQL Â· æ•°æ®åº“æŸ¥è¯¢<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/about/about.html" aria-label="â„¹ï¸ å…³äº"><!--[--><!--[--><!--]--><!--]-->â„¹ï¸ å…³äº<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Goæ ¸å¿ƒè¯­æ³• <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="goæ ¸å¿ƒè¯­æ³•" tabindex="-1"><a class="header-anchor" href="#goæ ¸å¿ƒè¯­æ³•"><span>Goæ ¸å¿ƒè¯­æ³•</span></a></h1><ul><li><p>å®˜ç½‘ï¼š<a href="https://go.dev/" target="_blank" rel="noopener noreferrer">https://go.dev/</a></p></li><li><p>å‘½ä»¤ï¼š<a href="https://pkg.go.dev/cmd/go" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/cmd/go</a></p></li><li><p>FAQï¼š<a href="https://go.dev/doc/faq" target="_blank" rel="noopener noreferrer">https://go.dev/doc/faq</a></p></li><li><p>GopherChinaï¼š<a href="https://github.com/gopherchina/conference" target="_blank" rel="noopener noreferrer">https://github.com/gopherchina/conference</a></p></li></ul><br><h2 id="ç¯å¢ƒè®¾ç½®" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒè®¾ç½®"><span>ç¯å¢ƒè®¾ç½®</span></a></h2><h3 id="ç¬¬ä¸€ä¸ªåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¬¬ä¸€ä¸ªåº”ç”¨"><span>ç¬¬ä¸€ä¸ªåº”ç”¨</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@node-1 ~<span class="token punctuation">]</span><span class="token comment"># yum -y install go</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰ä½¿ç”¨äºŒè¿›åˆ¶åŒ…å®‰è£…</summary><p><strong>1ã€Goç‰ˆæœ¬ç®¡ç†è®¾æƒ³</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@node-1 ~<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/go                  # æ‰€æœ‰ç‰ˆæœ¬çš„Goéƒ½æ”¾åœ¨è¿™ä¸€ä¸ªç›®å½•ä¸­,é›†ä¸­ç®¡ç†</span></span>
<span class="line">total <span class="token number">0</span></span>
<span class="line">drwxr-xr-x <span class="token number">10</span> root root <span class="token number">222</span> Nov  <span class="token number">1</span> 04:21 <span class="token number">1.19</span>.2    <span class="token comment"># æŸä¸ªç‰ˆæœ¬çš„Go</span></span>
<span class="line">drwxr-xr-x <span class="token number">10</span> root root <span class="token number">222</span> Nov  <span class="token number">1</span> 04:21 <span class="token number">1.19</span>.3    <span class="token comment"># æŸä¸ªç‰ˆæœ¬çš„Go</span></span>
<span class="line">drwxr-xr-x  <span class="token number">4</span> root root  <span class="token number">28</span> Nov <span class="token number">30</span> <span class="token number">17</span>:43 root      <span class="token comment"># GOROOT</span></span>
<span class="line">drwxr-xr-x  <span class="token number">4</span> root root  <span class="token number">28</span> Nov <span class="token number">30</span> <span class="token number">17</span>:43 path      <span class="token comment"># GOPATH,è¿™é‡Œå°†ä»–è®¾ç½®ä¸ºæ‰€æœ‰Goç‰ˆæœ¬å…±ç”¨</span></span>
<span class="line"></span></code></pre></div><p><strong>2ã€å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Go</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># (1) åˆ›å»ºGoç›®å½•</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/local/go</span>
<span class="line"><span class="token builtin class-name">cd</span> /usr/local/go</span>
<span class="line"></span>
<span class="line"><span class="token comment"># (2) ä¸‹è½½äºŒè¿›åˆ¶åŒ…</span></span>
<span class="line"><span class="token assign-left variable">Version</span><span class="token operator">=</span><span class="token number">1.19</span>.5</span>
<span class="line"><span class="token function">wget</span> <span class="token parameter variable">-c</span> https://dl.google.com/go/go<span class="token variable">${Version}</span>.linux-amd64.tar.gz</span>
<span class="line"></span>
<span class="line"><span class="token comment"># (3) è§£å‹,é»˜è®¤çš„ç›®å½•åæ˜¯go</span></span>
<span class="line"><span class="token function">tar</span> zxf go<span class="token variable">${Version}</span>.linux-amd64.tar.gz</span>
<span class="line"><span class="token function">mv</span> go <span class="token variable">${Version}</span></span>
<span class="line"><span class="token function">ln</span> <span class="token parameter variable">-s</span> <span class="token variable">${Version}</span> root</span>
<span class="line"><span class="token function">rm</span> <span class="token parameter variable">-f</span> go<span class="token variable">${Version}</span>.linux-amd64.tar.gz</span>
<span class="line"></span>
<span class="line"><span class="token comment"># (5) è®¾ç½®PATHè·¯å¾„</span></span>
<span class="line"><span class="token function">vim</span> /etc/bashrc</span>
<span class="line">  <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">${<span class="token environment constant">PATH</span>}</span>:/usr/local/go/root/bin:/usr/local/go/path/bin</span>
<span class="line"><span class="token builtin class-name">source</span> /etc/bashrc</span>
<span class="line"></span>
<span class="line"><span class="token comment"># (6) è®¾ç½®GOç¯å¢ƒå˜é‡</span></span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on</span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPATH</span><span class="token operator">=</span>/usr/local/go/path</span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æ£€æŸ¥Goç¯å¢ƒå˜é‡</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># (7) æœ€ç»ˆæ£€æŸ¥</span></span>
<span class="line"><span class="token punctuation">[</span>root@node-1 go<span class="token punctuation">]</span><span class="token comment"># go env | grep -Ei &#39;GOROOT|GOPATH|GOPROXY|GO111MODULE&#39;</span></span>
<span class="line"><span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span><span class="token string">&quot;on&quot;</span></span>
<span class="line"><span class="token assign-left variable">GOPATH</span><span class="token operator">=</span><span class="token string">&quot;/usr/local/go/path&quot;</span></span>
<span class="line"><span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span><span class="token string">&quot;https://goproxy.cn,direct&quot;</span></span>
<span class="line"><span class="token assign-left variable">GOROOT</span><span class="token operator">=</span><span class="token string">&quot;/usr/local/go/1.19.5&quot;</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰ç¯å¢ƒå˜é‡è¯´æ˜</summary><p><strong>è®¾ç½®ç¯å¢ƒå˜é‡</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è¯­æ³•</span></span>
<span class="line">go <span class="token function">env</span> 						<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</span></span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-json</span>				<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œjsonæ ¼å¼</span></span>
<span class="line">go <span class="token function">env</span> <span class="token punctuation">[</span>environment<span class="token punctuation">]</span>		<span class="token comment"># æŸ¥çœ‹æŸä¸ªå…·ä½“çš„ç¯å¢ƒå˜é‡</span></span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on	<span class="token comment"># è®¾ç½®ç¯å¢ƒå˜é‡,æ°¸ä¹…ç”Ÿæ•ˆ</span></span>
<span class="line">go <span class="token builtin class-name">help</span> <span class="token function">env</span>					<span class="token comment"># æŸ¥çœ‹envå‘½ä»¤å¸®åŠ©</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ¨èè®¾ç½®çš„ç¯å¢ƒå˜é‡</span></span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on</span>
<span class="line">go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct</span>
<span class="line"></span></code></pre></div><p><strong>ç¯å¢ƒå˜é‡è¯´æ˜</strong></p><table><thead><tr><th>ç¯å¢ƒå˜é‡</th><th>è¯´æ˜</th><th>è®¾ç½®å‘½ä»¤</th></tr></thead><tbody><tr><td><code>GOROOT</code></td><td>Goçš„å®‰è£…ç›®å½•</td><td>ä¸€èˆ¬ä¸ç”¨è‡ªå·±è®¾ç½®</td></tr><tr><td><code>GOPATH</code></td><td>ä»£è¡¨Goçš„å·¥ä½œåŒºï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªç›®å½•ï¼Œä½¿ç”¨é€—å·åˆ†éš”?<br>å®˜æ–¹è¯´æ˜æ–‡æ¡£ï¼šhttps://github.com/golang/go/wiki/GOPATH</td><td><code>go env -w GOPATH=/usr/local/gopath</code></td></tr><tr><td><code>GO111MODULE</code></td><td>Go 1.11ç‰ˆæœ¬å¢åŠ çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå»ºè®®å¼€å¯</td><td><code>go env -w GO111MODULE=on</code></td></tr><tr><td><code>GOPROXY</code></td><td>ä»£ç†åœ°å€ï¼Œç”±äºå¢™çš„å› ç´ å»ºè®®ä¿®æ”¹<br>é»˜è®¤å€¼ï¼šhttps://proxy.golang.org,direct<br>ä¸ƒç‰›äº‘ï¼šhttps://goproxy.cn,direct<br><code>direct</code>ï¼šå­—é¢ç¿»è¯‘æ˜¯ç›´è¿ï¼Œä»£è¡¨å®˜æ–¹ä¸‹è½½åœ°å€ï¼Œ<br>æ„æ€æ˜¯å¦‚æœé€šè¿‡ä»£ç†ä¸‹è½½ä¸åˆ°ï¼Œé‚£ä¹ˆé€šè¿‡å®˜æ–¹åœ°å€ä¸‹è½½</td><td><code>go env -w GOPROXY=https://goproxy.cn,direct</code></td></tr><tr><td><code>GOSUMDB</code></td><td>ç”¨æ¥æ ¡éªŒä¸‹è½½çš„åŒ…çš„å®‰å…¨æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹<br>é»˜è®¤å€¼ï¼š<code>sum.golang.org</code><br>å…³é—­ï¼š<code>off</code></td><td><code>go env -w GOSUMDB=off</code></td></tr></tbody></table><p>æ›´å¤šç¯å¢ƒå˜é‡ï¼š<a href="https://golang.google.cn/cmd/go/#hdr-Environment_variables" target="_blank" rel="noopener noreferrer">https://golang.google.cn/cmd/go/#hdr-Environment_variables</a> æˆ–<code>go help environment</code></p></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰ç¬¬ä¸€ä¸ªåº”ç”¨</summary><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"> </span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¯´æ˜ï¼š</p><ul><li><code>package</code>å£°æ˜æˆ‘è‡ªå·±çš„åŒ…å</li><li><code>import</code> å¯¼å…¥å…¶ä»–åŒ…ï¼Œè¿™é‡Œ<code>fmt</code>æ˜¯å†…ç½®çš„ä¸€ä¸ªåŒ…</li><li><code>func </code>å£°æ˜å‡½æ•°</li><li>ç¨‹åºæ‰§è¡Œçš„å…¥å£å¿…é¡»æ˜¯<code>main</code>åŒ…å’Œ<code>main</code>æ–¹æ³•ï¼Œæ–‡ä»¶åä»»æ„</li></ul><p>ä¸¤ç§è¿è¡Œæ–¹å¼</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># (1) ç¼–è¯‘å’Œè¿è¡Œ</span></span>
<span class="line">go build main.go        <span class="token comment"># ç¼–è¯‘</span></span>
<span class="line">./main.exe              <span class="token comment"># è¿è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># (2) ç¼–è¯‘å¹¶è¿è¡Œ</span></span>
<span class="line">go run main.go</span>
<span class="line"></span></code></pre></div><p>å¦‚æœæˆ‘ä»¬å¯¼å…¥çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œé‚£ä¹ˆç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚è§£å†³è¿™ä¸ªé—®é¢˜</p><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">        <span class="token string">&quot;log&quot;</span></span>
<span class="line">        <span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ç›‘å¬åœ°å€</span></span>
<span class="line">        addr <span class="token operator">:=</span> <span class="token string">&quot;127.0.0.1:80&quot;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å®ä¾‹åŒ–Ginè·¯ç”±å¼•æ“</span></span>
<span class="line">        r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ³¨å†Œè·¯ç”±</span></span>
<span class="line">        r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;Hello Gin!\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å¯åŠ¨Gin Server</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># go run main.go   # åœ¨å½“å‰ç›®å½•åŠçˆ¶ç›®å½•æ²¡æœ‰æ‰¾åˆ°go.modæ–‡ä»¶</span></span>
<span class="line">main.go:4:2: no required module provides package github.com/gin-gonic/gin: go.mod <span class="token function">file</span> not found <span class="token keyword">in</span> current directory or any parent directory<span class="token punctuation">;</span></span>
<span class="line">see <span class="token string">&#39;go help modules&#39;</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="go-module" tabindex="-1"><a class="header-anchor" href="#go-module"><span>Go Module</span></a></h3><p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod</a></p><p>åŒ…å‘½åï¼š<a href="https://go.dev/blog/package-names" target="_blank" rel="noopener noreferrer">https://go.dev/blog/package-names</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å¼€å¯Go Module</summary><p>ä»<code>Go1.11</code>å¼€å§‹ï¼Œå®˜æ–¹æ¨å‡ºGo moduleä½œä¸ºåŒ…ç®¡ç†å·¥å…·</p><p><code>GO111MODULE</code>å˜é‡æ§åˆ¶æ˜¯å¦å¯ç”¨go modulesï¼Œä»–æœ‰3ä¸ªå€¼ï¼š</p><ul><li><code>on</code>ï¼šå¼€å¯go module</li><li><code>off</code>ï¼šå…³é—­go module</li><li><code>auto</code>ï¼šæ ¹æ®é¡¹ç›®é…ç½®è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨<code>go module</code>è¿˜æ˜¯<code>go path</code></li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ä¸ç®¡å¼€å¯æ²¡å¼€å¯ï¼Œéƒ½é‡æ–°å¼€å¯ä¸€é</span></span>
<span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Notes<span class="token operator">&gt;</span>go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on</span>
<span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Notes<span class="token operator">&gt;</span>go <span class="token function">env</span> GO111MODULE</span>
<span class="line">on</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åˆå§‹åŒ–é¡¹ç›®ï¼šgo mod init</summary><p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-mod-init" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-mod-init</a></p><p><strong>1ã€åŸºç¡€ä½¿ç”¨</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å…ˆåˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•demo</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir demo</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd demo/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç„¶ååˆå§‹åŒ–é¡¹ç›®</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go mod init demo</span></span>
<span class="line">go: creating new go.mod: module demo</span>
<span class="line"></span>
<span class="line"><span class="token comment"># çœ‹ä¸€ä¸‹éƒ½åšäº†ä»€ä¹ˆäº‹ï¼šç”Ÿæˆäº†ä¸€ä¸ªæ–‡ä»¶go.mod</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ll</span></span>
<span class="line">total <span class="token number">4</span></span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">21</span> May <span class="token number">30</span> <span class="token number">19</span>:27 go.mod</span>
<span class="line"></span>
<span class="line"><span class="token comment"># çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod </span></span>
<span class="line">module demo		<span class="token comment"># æ¨¡å—å</span></span>
<span class="line"></span>
<span class="line">go <span class="token number">1.18</span>			<span class="token comment"># goç‰ˆæœ¬</span></span>
<span class="line"></span></code></pre></div><p><strong>2ã€æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªGoæ˜æ˜Ÿé¡¹ç›®çš„Module Nameæ˜¯å¦‚ä½•å†™çš„</strong></p><table><thead><tr><th>Githubåœ°å€</th><th>Module Name</th></tr></thead><tbody><tr><td>https://github.com/containerd/containerd</td><td><code>module github.com/containerd/containerd</code></td></tr><tr><td>https://github.com/gin-gonic/gin</td><td><code>module github.com/gin-gonic/gin</code></td></tr><tr><td>https://github.com/pingcap/tidb</td><td><code>module github.com/pingcap/tidb</code></td></tr></tbody></table><p>ä»”ç»†ç ”ç©¶å‘ç°ä»–ä»¬çš„æ ¼å¼éƒ½æ˜¯<code>github.com/ç”¨æˆ·å/é¡¹ç›®å</code>ï¼Œè¿™æ˜¯ä¸ºå•¥ï¼Ÿå…ˆä¸ç®¡ä»–ï¼Œåé¢å†è¯´</p><p><strong>ï¼ˆ3ï¼‰ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—</strong></p><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">        <span class="token string">&quot;log&quot;</span></span>
<span class="line">        <span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ç›‘å¬åœ°å€</span></span>
<span class="line">        addr <span class="token operator">:=</span> <span class="token string">&quot;127.0.0.1:80&quot;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å®ä¾‹åŒ–Ginè·¯ç”±å¼•æ“</span></span>
<span class="line">        r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ³¨å†Œè·¯ç”±</span></span>
<span class="line">        r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;Hello Gin!\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å¯åŠ¨Gin Server</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æŸ¥çœ‹å½“å‰ç›®å½•</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -l</span></span>
<span class="line">total <span class="token number">8</span></span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">21</span> May <span class="token number">30</span> <span class="token number">19</span>:49 go.mod</span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">327</span> May <span class="token number">30</span> <span class="token number">19</span>:17 main.go</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿™æ¬¡æŠ¥é”™ä¸ä¸€æ ·äº†ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨go getä¸‹è½½gin</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go run main.go		</span></span>
<span class="line">main.go:4:2: no required module provides package github.com/gin-gonic/gin<span class="token punctuation">;</span> to <span class="token function">add</span> it:</span>
<span class="line">        go get github.com/gin-gonic/gin</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰go getåŸºç¡€ï¼šä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…</summary><p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-get" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-get</a></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¿…é¡»åœ¨é¡¹ç›®ç›®å½•(å«æœ‰go.modçš„ç›®å½•)ä½¿ç”¨<code>go get</code>ï¼Œæ— æ³•åœ¨å…¨å±€ç›®å½•ä½¿ç”¨</li><li><code>go get</code>ç”¨æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ç‰ˆæœ¬é—®é¢˜ï¼Œä¼šè‡ªåŠ¨ç»´æŠ¤go.modå’Œgo.sumæ–‡ä»¶</li><li><code>go get</code>ä¸‹è½½çš„åŒ…æ”¾åœ¨GOPATH/pkgç›®å½•å†…</li><li>è‹¥ä¸æŒ‡å®šç‰ˆæœ¬å·åªèƒ½æ›´æ–°åˆ°<code>v1.x.x</code>æœ€æ–°ç‰ˆï¼Œè‹¥ç¬¬ä¸‰æ–¹åŒ…æ²¡æœ‰ç‰ˆæœ¬å·ï¼ˆTagï¼‰åˆ™ä¼šæ›´æ–°åˆ°æœ€åä¸€æ¬¡æäº¤çš„ä»£ç </li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ä¸‹è½½</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin</span></span>
<span class="line">go: added github.com/gin-contrib/sse v0.1.0</span>
<span class="line">go: added github.com/gin-gonic/gin v1.8.0</span>
<span class="line">go: added github.com/go-playground/locales v0.14.0</span>
<span class="line">go: added github.com/go-playground/universal-translator v0.18.0</span>
<span class="line">go: added github.com/go-playground/validator/v10 v10.10.0</span>
<span class="line">go: added github.com/goccy/go-json v0.9.7</span>
<span class="line">go: added github.com/json-iterator/go v1.1.12</span>
<span class="line">go: added github.com/leodido/go-urn v1.2.1</span>
<span class="line">go: added github.com/mattn/go-isatty v0.0.14</span>
<span class="line">go: added github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421</span>
<span class="line">go: added github.com/modern-go/reflect2 v1.0.2</span>
<span class="line">go: added github.com/pelletier/go-toml/v2 v2.0.1</span>
<span class="line">go: added github.com/ugorji/go/codec v1.2.7</span>
<span class="line">go: added golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97</span>
<span class="line">go: added golang.org/x/net v0.0.0-20210226172049-e18ecbb05110</span>
<span class="line">go: added golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069</span>
<span class="line">go: added golang.org/x/text v0.3.6</span>
<span class="line">go: added google.golang.org/protobuf v1.28.0</span>
<span class="line">go: added gopkg.in/yaml.v2 v2.4.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹go.mod, å°†ginåŠå…¶ä¾èµ–çš„åŒ…éƒ½å†™å…¥åˆ°go.modæ–‡ä»¶ä¸­äº†</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod</span></span>
<span class="line">module demo</span>
<span class="line"></span>
<span class="line">go <span class="token number">1.18</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># requireé‡Œé¢ä»£è¡¨ä¾èµ–çš„åŒ…</span></span>
<span class="line">require <span class="token punctuation">(</span></span>
<span class="line">        github.com/gin-contrib/sse v0.1.0 // indirect</span>
<span class="line">        github.com/gin-gonic/gin v1.8.0 // indirect</span>
<span class="line">        github.com/go-playground/locales v0.14.0 // indirect</span>
<span class="line">        github.com/go-playground/universal-translator v0.18.0 // indirect</span>
<span class="line">        github.com/go-playground/validator/v10 v10.10.0 // indirect</span>
<span class="line">        github.com/goccy/go-json v0.9.7 // indirect</span>
<span class="line">        github.com/json-iterator/go v1.1.12 // indirect</span>
<span class="line">        github.com/leodido/go-urn v1.2.1 // indirect</span>
<span class="line">        github.com/mattn/go-isatty v0.0.14 // indirect</span>
<span class="line">        github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421 // indirect</span>
<span class="line">        github.com/modern-go/reflect2 v1.0.2 // indirect</span>
<span class="line">        github.com/pelletier/go-toml/v2 v2.0.1 // indirect</span>
<span class="line">        github.com/ugorji/go/codec v1.2.7 // indirect</span>
<span class="line">        golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97 // indirect</span>
<span class="line">        golang.org/x/net v0.0.0-20210226172049-e18ecbb05110 // indirect</span>
<span class="line">        golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069 // indirect</span>
<span class="line">        golang.org/x/text v0.3.6 // indirect</span>
<span class="line">        google.golang.org/protobuf v1.28.0 // indirect</span>
<span class="line">        gopkg.in/yaml.v2 v2.4.0 // indirect</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æˆ‘ä»¬ä¸‹è½½çš„åŒ…åœ¨GOPATHç›®å½•ä¸‹</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go env GOPATH</span></span>
<span class="line">/usr/local/gopath</span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -l /usr/local/gopath/pkg/mod/</span></span>
<span class="line">total <span class="token number">20</span></span>
<span class="line">drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 cache</span>
<span class="line">drwxr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 github.com</span>
<span class="line">drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 golang.org</span>
<span class="line">drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 google.golang.org</span>
<span class="line">drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 gopkg.in</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿˜ä¼šç”Ÿæˆä¸€ä¸ªgo.sumæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶ä¸éœ€è¦æˆ‘ä»¬ç®¡ç†ï¼Œå…ˆä¸åšæ·±å…¥ç ”ç©¶</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -lh go.sum </span></span>
<span class="line">-rw-r--r-- <span class="token number">1</span> root root <span class="token number">9</span>.1K May <span class="token number">30</span> <span class="token number">20</span>:32 go.sum</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰go getè¿›é˜¶ï¼šå®‰è£…æœ€æ–°ç‰ˆã€å®‰è£…æŒ‡å®šç‰ˆã€ç§»é™¤ç‰ˆæœ¬ã€å‡çº§ä¾èµ–</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ï¼Œè¿™ä¼šä¸‹è½½æœ€æ–°çš„tagç‰ˆæœ¬</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@latest</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@v1.7.0</span></span>
<span class="line">go: downgraded github.com/gin-gonic/gin v1.8.0 <span class="token operator">=</span><span class="token operator">&gt;</span> v1.7.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°†åŒ…ä»go.modä¸­ç§»é™¤ï¼ˆæœ¬åœ°å¹¶ä¸ä¼šåˆ é™¤ï¼‰</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@none</span></span>
<span class="line">go: removed github.com/gin-gonic/gin v1.7.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹æœ¬åœ°åŒ…</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/gopath/pkg/mod/github.com/gin-gonic/</span></span>
<span class="line">total <span class="token number">8</span></span>
<span class="line">dr-xr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:32 gin@v1.7.0</span>
<span class="line">dr-xr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 gin@v1.8.0</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å‡çº§ä¾èµ–ï¼ˆè¿™ä¼šå‡çº§æ‰€æœ‰ä¾èµ–ï¼‰</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get -u</span></span>
<span class="line">go: downloading golang.org/x/net v0.0.0-20220526153639-5463443f8c37</span>
<span class="line">go: downloading github.com/go-playground/validator/v10 v10.11.0</span>
<span class="line">go: downloading github.com/go-playground/validator v9.31.0+incompatible</span>
<span class="line">go: downloading github.com/pelletier/go-toml v1.9.5</span>
<span class="line">go: downloading github.com/ugorji/go v1.2.7</span>
<span class="line">go: downloading golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a</span>
<span class="line">go: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e</span>
<span class="line">go: downloading golang.org/x/text v0.3.7</span>
<span class="line">go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd</span>
<span class="line">go: upgraded github.com/go-playground/validator/v10 v10.10.0 <span class="token operator">=</span><span class="token operator">&gt;</span> v10.11.0</span>
<span class="line">go: upgraded github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421 <span class="token operator">=</span><span class="token operator">&gt;</span> v0.0.0-20180306012644-bacd9c7ef1dd</span>
<span class="line">go: upgraded golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97 <span class="token operator">=</span><span class="token operator">&gt;</span> v0.0.0-20220525230936-793ad666bf5e</span>
<span class="line">go: upgraded golang.org/x/net v0.0.0-20210226172049-e18ecbb05110 <span class="token operator">=</span><span class="token operator">&gt;</span> v0.0.0-20220526153639-5463443f8c37</span>
<span class="line">go: upgraded golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069 <span class="token operator">=</span><span class="token operator">&gt;</span> v0.0.0-20220520151302-bc2c85ada10a</span>
<span class="line">go: upgraded golang.org/x/text v0.3.6 <span class="token operator">=</span><span class="token operator">&gt;</span> v0.3.7</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å‡çº§ä¾èµ–go.modå˜åŒ–</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod </span></span>
<span class="line">module demo</span>
<span class="line"></span>
<span class="line">go <span class="token number">1.18</span></span>
<span class="line"></span>
<span class="line">require github.com/gin-gonic/gin v1.8.0		// è¿™ä¸ªåŸæ¥åœ¨ä¸‹é¢ï¼Œå¹¶ä¸”æœ‰// indirectï¼Œç°åœ¨æ²¡æœ‰äº†</span>
<span class="line"></span>
<span class="line">require <span class="token punctuation">(</span></span>
<span class="line">        github.com/gin-contrib/sse v0.1.0 // indirect</span>
<span class="line">        github.com/go-playground/locales v0.14.0 // indirect</span>
<span class="line">        github.com/go-playground/universal-translator v0.18.0 // indirect</span>
<span class="line">        github.com/go-playground/validator/v10 v10.11.0 // indirect</span>
<span class="line">        github.com/goccy/go-json v0.9.7 // indirect</span>
<span class="line">        github.com/golang/protobuf v1.5.2 // indirect</span>
<span class="line">        github.com/json-iterator/go v1.1.12 // indirect</span>
<span class="line">        github.com/leodido/go-urn v1.2.1 // indirect</span>
<span class="line">        github.com/mattn/go-isatty v0.0.14 // indirect</span>
<span class="line">        github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd // indirect</span>
<span class="line">        github.com/modern-go/reflect2 v1.0.2 // indirect</span>
<span class="line">        github.com/pelletier/go-toml/v2 v2.0.1 // indirect</span>
<span class="line">        github.com/ugorji/go/codec v1.2.7 // indirect</span>
<span class="line">        golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e // indirect</span>
<span class="line">        golang.org/x/net v0.0.0-20220526153639-5463443f8c37 // indirect</span>
<span class="line">        golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a // indirect</span>
<span class="line">        golang.org/x/text v0.3.7 // indirect</span>
<span class="line">        google.golang.org/protobuf v1.28.0 // indirect</span>
<span class="line">        gopkg.in/yaml.v2 v2.4.0 // indirect</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶ï¼šgo install</summary><p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-install" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-install</a></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯ä»¥åœ¨å…¨å±€ä½¿ç”¨<code>go install</code>ï¼Œä¸ä¼šç»´æŠ¤go.modå’Œgo.sumæ–‡ä»¶</li><li>ä½¿ç”¨<code>go install github.com/xxx/@ç‰ˆæœ¬</code>,å¿…é¡»åŠ ä¸Šç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆåˆ™æ˜¯<code>latest</code></li><li>å…¶åŸç†æ˜¯ï¼š <ul><li>ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…åˆ°<code>GOPATH/pkg</code></li><li>ç„¶åç¼–è¯‘ï¼ˆå…¥å£æ˜¯<code>main</code>åŒ…çš„<code>main</code>æ–¹æ³•ï¼‰</li><li>å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨<code>GOPATH/bin</code>ç›®å½•ä¸‹</li></ul></li><li>å¯ä»¥ä½¿ç”¨<code>go install</code>çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª<code>main</code>åŒ…å’Œ<code>main</code>æ–¹æ³•</li></ul><p>ä¸¾å‡ ä¸ªä¾‹å­</p><table><thead><tr><th>Github</th><th>main</th></tr></thead><tbody><tr><td>https://github.com/davecheney/httpstat</td><td><code>main.go</code></td></tr><tr><td>https://github.com/Code-Hex/pget</td><td><code>cmd/pget/main.go</code></td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ6ï¼‰ä¾èµ–æ•´ç†ï¼šgo mod tidy</summary><p>å¾ˆå¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œå¯å¤šæ¬¡æ‰§è¡Œ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go help mod</span></span>
<span class="line">Go mod provides access to operations on modules.</span>
<span class="line"></span>
<span class="line">Note that support <span class="token keyword">for</span> modules is built into all the go commands,</span>
<span class="line">not just <span class="token string">&#39;go mod&#39;</span><span class="token builtin class-name">.</span> For example, day-to-day adding, removing, upgrading,</span>
<span class="line">and downgrading of dependencies should be <span class="token keyword">done</span> using <span class="token string">&#39;go get&#39;</span><span class="token builtin class-name">.</span></span>
<span class="line">See <span class="token string">&#39;go help modules&#39;</span> <span class="token keyword">for</span> an overview of module functionality.</span>
<span class="line"></span>
<span class="line">Usage:</span>
<span class="line"></span>
<span class="line">        go mod <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">The commands are:</span>
<span class="line"></span>
<span class="line">        download    download modules to <span class="token builtin class-name">local</span> cache</span>
<span class="line">        edit        edit go.mod from tools or scripts</span>
<span class="line">        graph       print module requirement graph</span>
<span class="line">        init        initialize new module <span class="token keyword">in</span> current directory</span>
<span class="line">        tidy        <span class="token function">add</span> missing and remove unused modules			<span class="token comment"># æ·»åŠ ç¼ºå°‘çš„åŒ…ï¼Œå¹¶ç§»é™¤æœªä½¿ç”¨çš„åŒ…</span></span>
<span class="line">        vendor      <span class="token function">make</span> vendored copy of dependencies</span>
<span class="line">        verify      verify dependencies have expected content</span>
<span class="line">        why         explain why packages or modules are needed</span>
<span class="line"></span>
<span class="line">Use <span class="token string">&quot;go help mod &lt;command&gt;&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information about a command.</span>
<span class="line"></span></code></pre></div></details><br><h3 id="å‘å¸ƒå…¬å…±æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒå…¬å…±æ¨¡å—"><span>å‘å¸ƒå…¬å…±æ¨¡å—</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å‘å¸ƒå…¬å…±æ¨¡å—åˆ° GitHubï¼šå…ˆè·‘é€šä¸€ä¸ªæœ€ç®€å•çš„å‘å¸ƒæµç¨‹</summary><p>â‘  åœ¨Githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“testï¼Œå¹¶å…‹éš†ä»£ç åˆ°æœ¬åœ°</p><p>â‘¡ ä½¿ç”¨go modåˆå§‹åŒ–ï¼Œè¦æ±‚module nameå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆgithub.com/ç”¨æˆ·å/é¡¹ç›®åï¼‰ï¼Œ</p><p>è¿™æ ·åˆ«äººå°±å¯ä»¥å¯¼å…¥æˆ‘ä»¬çš„æ¨¡å—ï¼Œæˆ–è€…æ˜¯åˆ©ç”¨<code>go install</code>ä¸‹è½½å¹¶ç¼–è¯‘æˆ‘ä»¬çš„ä»£ç æ¥ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å…‹éš†</span></span>
<span class="line"><span class="token function">git</span> clone https://github.com/vvfock3r/test.git</span>
<span class="line"><span class="token builtin class-name">cd</span> <span class="token builtin class-name">test</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆå§‹åŒ–Goæ¨¡å—</span></span>
<span class="line">go mod init github.com/vvfock3r/test</span>
<span class="line"></span></code></pre></div><p>â‘¢ æäº¤ä»£ç åˆ°testä»“åº“</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ–°å»ºä¸€ä¸ªæ–‡ä»¶utils.go</span></span>
<span class="line">package <span class="token builtin class-name">test</span></span>
<span class="line"></span>
<span class="line">func Add<span class="token punctuation">(</span>x, y int<span class="token punctuation">)</span> int <span class="token punctuation">{</span></span>
<span class="line">	<span class="token builtin class-name">return</span> x + y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æäº¤</span></span>
<span class="line"><span class="token function">git</span> <span class="token function">add</span> *</span>
<span class="line"><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;test&quot;</span></span>
<span class="line"><span class="token function">git</span> push <span class="token parameter variable">-u</span> origin main</span>
<span class="line"></span></code></pre></div><p>â‘£ ä½¿ç”¨GoLandæ–°å»ºä¸€ä¸ªGoé¡¹ç›®demoï¼Œè¿›è¡Œæµ‹è¯•</p><p>æ·»åŠ ä¾èµ–åŒ…</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go get github.com/vvfock3r/test </span>
<span class="line">go: downloading github.com/vvfock3r/test v0.0.0-20220601023617-b9d901edce34</span>
<span class="line"></span></code></pre></div><p>ç¼–å†™<code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;github.com/vvfock3r/test&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>æµ‹è¯•æ‰§è¡Œ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go run <span class="token builtin class-name">.</span>      </span>
<span class="line"><span class="token number">3</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹go.mod</span></span>
<span class="line">module demo</span>
<span class="line"></span>
<span class="line">go <span class="token number">1.18</span></span>
<span class="line"></span>
<span class="line">require github.com/vvfock3r/test v0.0.0-20220601023617-b9d901edce34 // indirect</span>
<span class="line"></span></code></pre></div><p>æ€»ç»“å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ¨¡å—åï¼šåº”ä½¿ç”¨<strong>github.com/ç”¨æˆ·å/é¡¹ç›®å</strong></p><p>ï¼ˆ2ï¼‰ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç‰ˆæœ¬ï¼šè‹¥æ— ç‰ˆæœ¬ï¼ŒGoè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç‰ˆæœ¬<strong>v0.0.0-æ—¶é—´-æäº¤ID</strong></p><ul><li><code>v0.0.0</code>æ˜¯å›ºå®šçš„</li><li>æ—¶é—´æ ¼å¼<code>å¹´æœˆæ—¥æ—¶åˆ†ç§’</code></li><li>æäº¤IDé•¿åº¦<code>12</code>ä½</li></ul><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œä¸€æ¬¡æäº¤å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç‰ˆæœ¬</p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å‘å¸ƒå…¬å…±æ¨¡å—åˆ° GitHubï¼šæ›´æ–°ç¬¬ä¸‰æ–¹åŒ…å»¶è¿Ÿé—®é¢˜</summary><p>æè¿°ï¼šæˆ‘ä»¬å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—<code>test</code>éšä¾¿åšä¸€ç‚¹ä¿®æ”¹å¹¶æäº¤åˆ°GitHubï¼Œåœ¨<code>demo</code>é¡¹ç›®ä¸­æµ‹è¯•æ›´æ–°<code>test</code>æ¨¡å—æ˜¯å¦æ­£å¸¸</p><p>ç»“æœï¼šç¬¬ä¸‰æ–¹åŒ…åˆšåˆšæ›´æ–°çš„ä»£ç ï¼Œæˆ‘ä»¬æ— æ³•ç«‹é©¬æ‹‰å–åˆ°æ–°ä»£ç ï¼Œæµ‹è¯•è¿‡çš„æ–¹æ³•æœ‰ï¼š</p><ul><li>ä½¿ç”¨<code>go get -u github.com/vvfock3r/test</code>æ›´æ–°ï¼Œæ— æ•ˆ</li><li>åˆ é™¤<code>go.mod</code>å’Œæœ¬åœ°<code>GOPATH</code>ä¸‹çš„<code>test</code>æ¨¡å—ç›¸å…³çš„ä»»ä½•ä¸œè¥¿ï¼Œç„¶åä½¿ç”¨<code>go get</code>é‡æ–°ä¸‹è½½ï¼Œæ— æ•ˆ</li></ul><p>åŸå› æ˜¯ï¼šæˆ‘ä»¬<code>go get</code>ä¸‹è½½åŒ…å¹¶ä¸æ˜¯ç›´æ¥ä»<code>github.com</code>ä¸‹è½½çš„ï¼Œè€Œæ˜¯é€šè¿‡<code>GOPROXY</code>æŒ‡å®šçš„é•œåƒç«™ä¸‹è½½çš„ï¼ˆé€šè¿‡<code>go get -x</code>å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œè€Œé•œåƒç«™å­˜åœ¨ä¸€å®šå»¶è¿Ÿä»è€Œå¯¼è‡´ä¸èƒ½é©¬ä¸Šä¸‹è½½æœ€æ–°åŒ…</p><p>è§£å†³åŠæ³•ï¼šä½¿ç”¨<code>go get github.com/vvfock3r/test@æäº¤ID</code>æ¥è¿›è¡Œæ›´æ–°ï¼ˆæäº¤IDå¹¶ä¸ä¸€å®šæ˜¯å®Œæ•´çš„IDï¼‰ï¼Œå¯ä»¥åœ¨ä¸‹å›¾ä¸­è¿™ä¸ªä½ç½®æ‰¾åˆ°æœ€æ–°æäº¤ID</p><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com/image-20220601140958608.png" alt="image-20220601140958608"></p></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å‘å¸ƒå…¬å…±æ¨¡å—åˆ° GitHubï¼šæŒ‡å®šç¬¬ä¸‰æ–¹åŒ…çš„ç‰ˆæœ¬</summary><p>å¦‚æœæˆ‘æƒ³è®©ç”¨æˆ·ä½¿ç”¨<code>go get github.com/vvfock3r/test@v1.0.0</code>è¿™æ ·çš„æ–¹å¼æ¥å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p><p>è¿™é‡Œçš„<code>v1.0.0</code>ï¼Œå°±æ˜¯ä»“åº“çš„<code>Tag</code>åç§°ï¼Œä½†æ˜¯æœ‰å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>Tagåç§°å¿…é¡»æ˜¯ç±»ä¼¼<code>v1.0.0</code>è¿™ç§è§„åˆ™ï¼Œå¦‚æœæ˜¯<code>v1.0</code>è¿™æ ·æ˜¯æ‹‰å–ä¸åˆ°å¯¹åº”ç‰ˆæœ¬çš„</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go get github.com/vvfock3r/test@v1.0</span>
<span class="line">go: github.com/vvfock3r/test@v1.0: no matching versions <span class="token keyword">for</span> query <span class="token string">&quot;v1.0&quot;</span></span>
<span class="line"></span></code></pre></div></li><li><p>å¯¹äº<code>v2.0.0</code>åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¦‚æœç›´æ¥ä½¿ç”¨<code>go get github.com/vvfock3r/test@v2.0.0</code>ä¼šæŠ¥é”™</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go get github.com/vvfock3r/test@v2.0.0</span>
<span class="line">go: github.com/vvfock3r/test@v2.0.0: invalid version: module contains a go.mod file, so module path must match major version <span class="token punctuation">(</span><span class="token string">&quot;github.com/vvfock3r/test/v2&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŸå› ä¹Ÿç»™å‡ºæ¥äº†ï¼šæ¨¡å—è·¯å¾„å¿…é¡»åŒ…å«ä¸»ç‰ˆæœ¬å·</span></span>
<span class="line"></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æ°¸è¿œä¸å‡çº§åˆ°<code>v2.x.x</code>ï¼Œä¸€ç›´ä½¿ç”¨v1çš„ç‰ˆæœ¬æ¯”å¦‚<code>v1.0.0</code>ã€<code>v1.0.1</code>ã€<code>@v1.999.999</code></li><li>å‡çº§åˆ°<code>v2.x.x</code>ï¼Œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>v2</code>çš„ç›®å½•ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç‰ˆæœ¬</li></ul></li><li><p>å…¶ä»–ï¼šGithubä¸Šæ–°æ‰“çš„Tagå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨<code>go get </code>ä¸‹è½½ï¼Œæ²¡æœ‰GOPROXYç¼“å­˜çš„é—®é¢˜ï¼ˆæŒ‡å®šç‰ˆæœ¬ä¸º<code>latest</code>é™¤å¤–ï¼‰</p></li></ul></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å‘å¸ƒå…¬å…±æ¨¡å—åˆ° GitHubï¼šreplaceç®€ä»‹</summary><p>replaceå¯ä»¥è®©æˆ‘ä»¬å¯¹åŒ…è¿›è¡Œæ›¿æ¢ï¼Œå¯ä»¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼šå¯¼å…¥çš„æ˜¯<code>a</code>åŒ…ï¼Œä½†å®é™…ä½¿ç”¨çš„æ˜¯<code>b</code>åŒ…</p><p>ä½¿ç”¨replaceå¯ä»¥ç›´æ¥ä¿®æ”¹go.modæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>go mod edit -replace</code>å‘½ä»¤ï¼ˆæ¨èï¼‰</p><p>è¯­æ³•</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è¯­æ³•</span></span>
<span class="line"><span class="token comment"># go mod edit -replace æ—§åœ°å€=æ–°åœ°å€</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç¤ºä¾‹ï¼šå°†v1.1.2æ›¿æ¢ä¸ºv1.1.1ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯é™ä½äº†ä¸€ä¸ªç‰ˆæœ¬</span></span>
<span class="line">go mod edit <span class="token parameter variable">-replace</span> github.com/vvfock3r/test@v1.1.2<span class="token operator">=</span>github.com/vvfock3r/test@v1.1.1</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹ä¸€ä¸‹go.modæ–‡ä»¶</span></span>
<span class="line">module demo</span>
<span class="line">go <span class="token number">1.18</span></span>
<span class="line">require github.com/vvfock3r/test v1.1.2</span>
<span class="line">replace github.com/vvfock3r/test v1.1.2 <span class="token operator">=</span><span class="token operator">&gt;</span> github.com/vvfock3r/test v1.1.1		<span class="token comment"># replace</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line">è™½ç„¶go.modä¸­requireæ˜¯v1.1.2ç‰ˆæœ¬ï¼Œä½†å®é™…ä¸Šåœ¨ä½¿ç”¨v1.1.1ç‰ˆæœ¬</span>
<span class="line"></span></code></pre></div></details><br><h3 id="è®¾ç½®ç§æœ‰æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®ç§æœ‰æ¨¡å—"><span>è®¾ç½®ç§æœ‰æ¨¡å—</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰GOPRIVATE è¯´æ˜</summary><p><code>GOPRIVATE</code> æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒç”¨äºæŒ‡å®šä¸€ç»„ç§æœ‰æ¨¡å—çš„åˆ—è¡¨ï¼Œè¿™äº›æ¨¡å—ä¸å±äºå…¬å…±ä»£ç åº“ï¼Œæ— æ³•é€šè¿‡æ™®é€šçš„æ–¹å¼è®¿é—®å’Œä¸‹è½½</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># é»˜è®¤ GOPRIVATE ä¸ºç©º</span></span>
<span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>go <span class="token function">env</span> GOPRIVATE</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä¸€èˆ¬è®¾ç½®ä¸ºç§æœ‰ä»“åº“çš„é¡¹ç›®åœ°å€</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">GOPRIVATE</span><span class="token operator">=</span>gitlab.com/PRIVATE_REPO1,gitlab.com/PRIVATE_REPO2,gitlab.com/PRIVATE_REPO3</span>
<span class="line"></span></code></pre></div></details><br><h3 id="goå‘½ä»¤æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#goå‘½ä»¤æ–‡æ¡£"><span>Goå‘½ä»¤æ–‡æ¡£</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŸ¥çœ‹é¡¶å±‚å¸®åŠ©æ–‡æ¡£ï¼š go æˆ– go -h æˆ– go --help</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token parameter variable">-h</span></span>
<span class="line">Go is a tool <span class="token keyword">for</span> managing Go <span class="token builtin class-name">source</span> code.                              </span>
<span class="line">                                                                       </span>
<span class="line">Usage:                                                                 </span>
<span class="line">                                                                       </span>
<span class="line">        go <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span>                                       </span>
<span class="line">                                                                       </span>
<span class="line">The commands are:                                                      </span>
<span class="line">                                                                       </span>
<span class="line">        bug         start a bug report                                 </span>
<span class="line">        build       compile packages and dependencies                  </span>
<span class="line">        clean       remove object files and cached files               </span>
<span class="line">        doc         show documentation <span class="token keyword">for</span> package or symbol           </span>
<span class="line">        <span class="token function">env</span>         print Go environment information                   </span>
<span class="line">        fix         update packages to use new APIs                    </span>
<span class="line">        <span class="token function">fmt</span>         gofmt <span class="token punctuation">(</span>reformat<span class="token punctuation">)</span> package sources                   </span>
<span class="line">        generate    generate Go files by processing <span class="token builtin class-name">source</span>             </span>
<span class="line">        get         <span class="token function">add</span> dependencies to current module and <span class="token function">install</span> them</span>
<span class="line">        <span class="token function">install</span>     compile and <span class="token function">install</span> packages and dependencies      </span>
<span class="line">        list        list packages or modules                           </span>
<span class="line">        mod         module maintenance                                 </span>
<span class="line">        work        workspace maintenance                              </span>
<span class="line">        run         compile and run Go program                         </span>
<span class="line">        <span class="token builtin class-name">test</span>        <span class="token builtin class-name">test</span> packages                                      </span>
<span class="line">        tool        run specified go tool                              </span>
<span class="line">        version     print Go version                                   </span>
<span class="line">        vet         report likely mistakes <span class="token keyword">in</span> packages                 </span>
<span class="line">                                                                       </span>
<span class="line">Use <span class="token string">&quot;go help &lt;command&gt;&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information about a command.          </span>
<span class="line">                                                                       </span>
<span class="line">Additional <span class="token builtin class-name">help</span> topics:                                                </span>
<span class="line">                                                                       </span>
<span class="line">        buildconstraint build constraints                              </span>
<span class="line">        buildmode       build modes                                    </span>
<span class="line">        c               calling between Go and C</span>
<span class="line">        cache           build and <span class="token builtin class-name">test</span> caching</span>
<span class="line">        environment     environment variables</span>
<span class="line">        filetype        <span class="token function">file</span> types</span>
<span class="line">        go.mod          the go.mod <span class="token function">file</span></span>
<span class="line">        gopath          GOPATH environment variable</span>
<span class="line">        gopath-get      legacy GOPATH go get</span>
<span class="line">        goproxy         module proxy protocol</span>
<span class="line">        importpath      <span class="token function">import</span> path syntax</span>
<span class="line">        modules         modules, module versions, and <span class="token function">more</span></span>
<span class="line">        module-get      module-aware go get</span>
<span class="line">        module-auth     module authentication using go.sum</span>
<span class="line">        packages        package lists and patterns</span>
<span class="line">        private         configuration <span class="token keyword">for</span> downloading non-public code</span>
<span class="line">        testflag        testing flags</span>
<span class="line">        testfunc        testing functions</span>
<span class="line">        vcs             controlling version control with GOVCS</span>
<span class="line"></span>
<span class="line">Use <span class="token string">&quot;go help &lt;topic&gt;&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information about that topic.</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŸ¥çœ‹å­å‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼šgo help sub-command</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 1ã€ä½¿ç”¨-hå’Œ--help, è¾“å‡ºå†…å®¹å¤ªè¿‡äºç®€å•ï¼Œæ ¹æœ¬æ²¡æœ‰å‚è€ƒæ„ä¹‰ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬è¦ä½¿ç”¨ go help build</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">-h</span></span>
<span class="line">usage: go build <span class="token punctuation">[</span>-o output<span class="token punctuation">]</span> <span class="token punctuation">[</span>build flags<span class="token punctuation">]</span> <span class="token punctuation">[</span>packages<span class="token punctuation">]</span></span>
<span class="line">Run <span class="token string">&#39;go help build&#39;</span> <span class="token keyword">for</span> details.</span>
<span class="line"></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">--help</span></span>
<span class="line">usage: go build <span class="token punctuation">[</span>-o output<span class="token punctuation">]</span> <span class="token punctuation">[</span>build flags<span class="token punctuation">]</span> <span class="token punctuation">[</span>packages<span class="token punctuation">]</span></span>
<span class="line">Run <span class="token string">&#39;go help build&#39;</span> <span class="token keyword">for</span> details.</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2ã€go help build,å†…å®¹å¾ˆè¯¦ç»†</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">help</span> build</span>
<span class="line">usage: go build <span class="token punctuation">[</span>-o output<span class="token punctuation">]</span> <span class="token punctuation">[</span>build flags<span class="token punctuation">]</span> <span class="token punctuation">[</span>packages<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">The build flags are shared by the build, clean, get, install, list, run,</span>
<span class="line">and <span class="token builtin class-name">test</span> commands:</span>
<span class="line"></span>
<span class="line">        <span class="token parameter variable">-C</span> <span class="token function">dir</span></span>
<span class="line">                Change to <span class="token function">dir</span> before running the command.</span>
<span class="line">                Any files named on the <span class="token builtin class-name">command</span> line are interpreted after</span>
<span class="line">                changing directories.</span>
<span class="line">        <span class="token parameter variable">-a</span></span>
<span class="line">                force rebuilding of packages that are already up-to-date.</span>
<span class="line">        <span class="token parameter variable">-n</span></span>
<span class="line">                print the commands but <span class="token keyword">do</span> not run them.</span>
<span class="line">        <span class="token parameter variable">-p</span> n</span>
<span class="line">                the number of programs, such as build commands or</span>
<span class="line">                <span class="token builtin class-name">test</span> binaries, that can be run <span class="token keyword">in</span> parallel.</span>
<span class="line">                The default is GOMAXPROCS, normally the number of CPUs available.</span>
<span class="line">        <span class="token parameter variable">-race</span></span>
<span class="line">                <span class="token builtin class-name">enable</span> data race detection.</span>
<span class="line">                Supported only on linux/amd64, freebsd/amd64, darwin/amd64, darwin/arm64, windows/amd64,</span>
<span class="line">                linux/ppc64le and linux/arm64 <span class="token punctuation">(</span>only <span class="token keyword">for</span> <span class="token number">48</span>-bit VMA<span class="token punctuation">)</span>.</span>
<span class="line">        <span class="token parameter variable">-msan</span></span>
<span class="line">                <span class="token builtin class-name">enable</span> interoperation with memory sanitizer.</span>
<span class="line">                Supported only on linux/amd64, linux/arm64, freebsd/amd64</span>
<span class="line">                and only with Clang/LLVM as the <span class="token function">host</span> C compiler.</span>
<span class="line">                PIE build mode will be used on all platforms except linux/amd64.</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line">        <span class="token parameter variable">-ldflags</span> <span class="token string">&#39;[pattern=]arg list&#39;</span></span>
<span class="line">                arguments to pass on each go tool <span class="token function">link</span> invocation.</span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æŸ¥çœ‹æŸä¸ªé€‰é¡¹å¯æ¥æ”¶çš„å‚æ•°åˆ—è¡¨ï¼šgo sub-command option --help</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># go build -ldflagsé€‰é¡¹æ¥æ”¶ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºå€¼</span></span>
<span class="line"><span class="token comment"># æ³¨æ„å¿…é¡»ä½¿ç”¨--helpï¼Œä¸èƒ½ä½¿ç”¨-h</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">-ldflags</span> <span class="token parameter variable">--help</span></span>
<span class="line"><span class="token comment"># example</span></span>
<span class="line">usage: <span class="token function">link</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> main.o</span>
<span class="line">  <span class="token parameter variable">-B</span> note</span>
<span class="line">        <span class="token function">add</span> an ELF NT_GNU_BUILD_ID note when using ELF               </span>
<span class="line">  <span class="token parameter variable">-E</span> entry                                                           </span>
<span class="line">        <span class="token builtin class-name">set</span> entry symbol name                                        </span>
<span class="line">  <span class="token parameter variable">-H</span> <span class="token builtin class-name">type</span>                                                            </span>
<span class="line">        <span class="token builtin class-name">set</span> header <span class="token builtin class-name">type</span>                                              </span>
<span class="line">  <span class="token parameter variable">-I</span> linker                                                          </span>
<span class="line">        use linker as ELF dynamic linker                             </span>
<span class="line">  <span class="token parameter variable">-L</span> directory                                                       </span>
<span class="line">        <span class="token function">add</span> specified directory to library path                      </span>
<span class="line">  <span class="token parameter variable">-R</span> quantum                                                         </span>
<span class="line">        <span class="token builtin class-name">set</span> address rounding quantum <span class="token punctuation">(</span>default -1<span class="token punctuation">)</span>                    </span>
<span class="line">  <span class="token parameter variable">-T</span> address                                                         </span>
<span class="line">        <span class="token builtin class-name">set</span> text segment address <span class="token punctuation">(</span>default -1<span class="token punctuation">)</span>                        </span>
<span class="line">  <span class="token parameter variable">-V</span>    print version and <span class="token builtin class-name">exit</span>                                       </span>
<span class="line">  <span class="token parameter variable">-X</span> definition                                                      </span>
<span class="line">        <span class="token function">add</span> string value definition of the form <span class="token assign-left variable">importpath.name</span><span class="token operator">=</span>value</span>
<span class="line">  <span class="token parameter variable">-a</span>    no-op <span class="token punctuation">(</span>deprecated<span class="token punctuation">)</span>                                           </span>
<span class="line">  <span class="token parameter variable">-asan</span>                                                              </span>
<span class="line">        <span class="token builtin class-name">enable</span> ASan interface                                        </span>
<span class="line">  <span class="token parameter variable">-aslr</span>                                                              </span>
<span class="line">        <span class="token builtin class-name">enable</span> ASLR <span class="token keyword">for</span> <span class="token assign-left variable">buildmode</span><span class="token operator">=</span>c-shared on windows <span class="token punctuation">(</span>default <span class="token boolean">true</span><span class="token punctuation">)</span> </span>
<span class="line">  <span class="token parameter variable">-benchmark</span> string                                                  </span>
<span class="line">        <span class="token builtin class-name">set</span> to <span class="token string">&#39;mem&#39;</span> or <span class="token string">&#39;cpu&#39;</span> to <span class="token builtin class-name">enable</span> phase benchmarking           </span>
<span class="line">  <span class="token parameter variable">-benchmarkprofile</span> base                                             </span>
<span class="line">        emit phase profiles to base_phase.<span class="token punctuation">{</span>cpu,mem<span class="token punctuation">}</span>prof              </span>
<span class="line">  <span class="token parameter variable">-buildid</span> <span class="token function">id</span>                                                        </span>
<span class="line">        record <span class="token function">id</span> as Go toolchain build <span class="token function">id</span>                           </span>
<span class="line">  <span class="token parameter variable">-buildmode</span> mode                                                    </span>
<span class="line">        <span class="token builtin class-name">set</span> build mode                                               </span>
<span class="line">  <span class="token parameter variable">-c</span>    dump call graph                                              </span>
<span class="line">  <span class="token parameter variable">-capturehostobjs</span> string</span>
<span class="line">        capture <span class="token function">host</span> object files loaded during internal linking to specified <span class="token function">dir</span></span>
<span class="line">  <span class="token parameter variable">-compressdwarf</span></span>
<span class="line">        compress DWARF <span class="token keyword">if</span> possible <span class="token punctuation">(</span>default <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token parameter variable">-cpuprofile</span> <span class="token function">file</span></span>
<span class="line">        <span class="token function">write</span> cpu profile to <span class="token function">file</span></span>
<span class="line">  <span class="token parameter variable">-d</span>    disable dynamic executable</span>
<span class="line">  <span class="token parameter variable">-debugnosplit</span></span>
<span class="line">        dump nosplit call graph</span>
<span class="line">  <span class="token parameter variable">-debugtextsize</span> int</span>
<span class="line">        debug text section max size</span>
<span class="line">  <span class="token parameter variable">-debugtramp</span> int</span>
<span class="line">        debug trampolines</span>
<span class="line">  <span class="token parameter variable">-dumpdep</span></span>
<span class="line">        dump symbol dependency graph</span>
<span class="line">  <span class="token parameter variable">-extar</span> string</span>
<span class="line">        archive program <span class="token keyword">for</span> <span class="token assign-left variable">buildmode</span><span class="token operator">=</span>c-archive</span>
<span class="line">  <span class="token parameter variable">-extld</span> linker</span>
<span class="line">        use linker when linking <span class="token keyword">in</span> external mode</span>
<span class="line">  <span class="token parameter variable">-extldflags</span> flags</span>
<span class="line">        pass flags to external linker</span>
<span class="line">  <span class="token parameter variable">-f</span>    ignore version mismatch</span>
<span class="line">  <span class="token parameter variable">-g</span>    disable go package data checks</span>
<span class="line">  <span class="token parameter variable">-h</span>    <span class="token function">halt</span> on error</span>
<span class="line">  <span class="token parameter variable">-importcfg</span> <span class="token function">file</span></span>
<span class="line">        <span class="token builtin class-name">read</span> <span class="token function">import</span> configuration from <span class="token function">file</span></span>
<span class="line">  <span class="token parameter variable">-installsuffix</span> suffix</span>
<span class="line">        <span class="token builtin class-name">set</span> package directory suffix</span>
<span class="line">  <span class="token parameter variable">-k</span> symbol</span>
<span class="line">        <span class="token builtin class-name">set</span> field tracking symbol</span>
<span class="line">  <span class="token parameter variable">-libgcc</span> string</span>
<span class="line">        compiler support lib <span class="token keyword">for</span> internal linking<span class="token punctuation">;</span> use <span class="token string">&quot;none&quot;</span> to disable</span>
<span class="line">  <span class="token parameter variable">-linkmode</span> mode</span>
<span class="line">        <span class="token builtin class-name">set</span> <span class="token function">link</span> mode</span>
<span class="line">  <span class="token parameter variable">-linkshared</span></span>
<span class="line">        <span class="token function">link</span> against installed Go shared libraries</span>
<span class="line">  <span class="token parameter variable">-memprofile</span> <span class="token function">file</span></span>
<span class="line">        <span class="token function">write</span> memory profile to <span class="token function">file</span></span>
<span class="line">  <span class="token parameter variable">-memprofilerate</span> rate</span>
<span class="line">        <span class="token builtin class-name">set</span> runtime.MemProfileRate to rate</span>
<span class="line">  <span class="token parameter variable">-msan</span></span>
<span class="line">        <span class="token builtin class-name">enable</span> MSan interface</span>
<span class="line">  <span class="token parameter variable">-n</span>    dump symbol table</span>
<span class="line">  <span class="token parameter variable">-o</span> <span class="token function">file</span></span>
<span class="line">        <span class="token function">write</span> output to <span class="token function">file</span></span>
<span class="line">  <span class="token parameter variable">-pluginpath</span> string</span>
<span class="line">        full path name <span class="token keyword">for</span> plugin</span>
<span class="line">  <span class="token parameter variable">-r</span> path</span>
<span class="line">        <span class="token builtin class-name">set</span> the ELF dynamic linker search path to dir1:dir2:<span class="token punctuation">..</span>.</span>
<span class="line">  <span class="token parameter variable">-race</span></span>
<span class="line">        <span class="token builtin class-name">enable</span> race detector</span>
<span class="line">  <span class="token parameter variable">-s</span>    disable symbol table</span>
<span class="line">  <span class="token parameter variable">-strictdups</span> int</span>
<span class="line">        sanity check duplicate symbol contents during object <span class="token function">file</span> reading <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span>warn <span class="token assign-left variable">2</span><span class="token operator">=</span>err<span class="token punctuation">)</span>.</span>
<span class="line">  <span class="token parameter variable">-tmpdir</span> directory</span>
<span class="line">        use directory <span class="token keyword">for</span> temporary files</span>
<span class="line">  <span class="token parameter variable">-v</span>    print <span class="token function">link</span> trace</span>
<span class="line">  <span class="token parameter variable">-w</span>    disable DWARF generation</span>
<span class="line"></span></code></pre></div></details><h2 id="" tabindex="-1"><a class="header-anchor" href="#"><span></span></a></h2><h2 id="åŸºç¡€å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€å…¥é—¨"><span>åŸºç¡€å…¥é—¨</span></a></h2><h3 id="å˜é‡" tabindex="-1"><a class="header-anchor" href="#å˜é‡"><span>å˜é‡</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å£°æ˜å…³é”®å­—</summary><table><thead><tr><th>å…³é”®å­—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>var</code></td><td>å£°æ˜å˜é‡</td></tr><tr><td><code>const</code></td><td>å£°æ˜å¸¸é‡</td></tr><tr><td><code>func</code></td><td>å£°æ˜å‡½æ•°</td></tr><tr><td><code>type</code></td><td>å£°æ˜ç±»å‹</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å£°æ˜å˜é‡å¹¶èµ‹å€¼</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å•ä¸ªå˜é‡</span></span>
<span class="line">	<span class="token comment">//	è¯­æ³•1ï¼švar å˜é‡å å˜é‡ç±»å‹ = å˜é‡å€¼	-- æ¨èä½¿ç”¨</span></span>
<span class="line">	<span class="token comment">//	è¯­æ³•2ï¼šå˜é‡å := å˜é‡å€¼			-- æ¨èä½¿ç”¨,ä½†ä»…æ”¯æŒåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line">	<span class="token keyword">var</span> Monday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	Tuesday <span class="token operator">:=</span> <span class="token number">2</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å£°æ˜å¤šä¸ªå˜é‡</span></span>
<span class="line">	<span class="token comment">// è¯­æ³•1:</span></span>
<span class="line">	<span class="token comment">//		var (                                   -- æ¨èä½¿ç”¨</span></span>
<span class="line">	<span class="token comment">//			å˜é‡å1 å˜é‡ç±»å‹ = å˜é‡å€¼</span></span>
<span class="line">	<span class="token comment">//			å˜é‡å2 å˜é‡ç±»å‹ = å˜é‡å€¼</span></span>
<span class="line">	<span class="token comment">//		)</span></span>
<span class="line">	<span class="token comment">// è¯­æ³•2: var å˜é‡å1,å˜é‡å2 å˜é‡ç±»å‹ = å˜é‡å€¼1, å˜é‡å€¼2</span></span>
<span class="line">	<span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">		Wednesday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line">		Thursday  <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">	<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">var</span> Friday<span class="token punctuation">,</span> Saturday<span class="token punctuation">,</span> Sunday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°å†…å£°æ˜çš„å˜é‡å¿…é¡»è¦ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼›å‡½æ•°å¤–çš„å˜é‡å¯ä»¥å£°æ˜ä½†ä¸ä½¿ç”¨</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨ä¸€: &quot;</span><span class="token punctuation">,</span> Monday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨äºŒ: &quot;</span><span class="token punctuation">,</span> Tuesday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨ä¸‰: &quot;</span><span class="token punctuation">,</span> Wednesday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨å››: &quot;</span><span class="token punctuation">,</span> Thursday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨äº”: &quot;</span><span class="token punctuation">,</span> Friday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨å…­: &quot;</span><span class="token punctuation">,</span> Saturday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨æ—¥: &quot;</span><span class="token punctuation">,</span> Sunday<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">å‘¨ä¸€:  <span class="token number">1</span></span>
<span class="line">å‘¨äºŒ:  <span class="token number">2</span></span>
<span class="line">å‘¨ä¸‰:  <span class="token number">3</span></span>
<span class="line">å‘¨å››:  <span class="token number">4</span></span>
<span class="line">å‘¨äº”:  <span class="token number">5</span></span>
<span class="line">å‘¨å…­:  <span class="token number">6</span></span>
<span class="line">å‘¨æ—¥:  <span class="token number">7</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å£°æ˜å˜é‡ä¸èµ‹å€¼</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜ä¸èµ‹å€¼,é»˜è®¤ä¼šä½¿ç”¨è¯¥ç±»å‹çš„é›¶å€¼</span></span>
<span class="line">	<span class="token keyword">var</span> Monday <span class="token builtin">int</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Monday<span class="token punctuation">)</span> <span class="token comment">// 0</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å£°æ˜å¸¸é‡</summary><p>å¸¸é‡ä½¿ç”¨<code>const</code>å…³é”®å­—å£°æ˜ï¼Œä¸<code>var</code>ç”¨æ³•å¾ˆç±»ä¼¼ï¼Œè¿™é‡Œä¸»è¦æ¼”ç¤ºä¸€ä¸‹ç‰¹æ®Šçš„åœ°æ–¹</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        </span>
<span class="line">	<span class="token comment">// æ–¹å¼1</span></span>
<span class="line">	<span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">		Monday  <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line">		Tuesday     <span class="token comment">// åœ¨åŒä¸€ä¸ªæ‹¬å·å†…ï¼Œè‹¥å˜é‡å€¼ä¸å†™ï¼Œåˆ™ä¿æŒè·Ÿè·ç¦»æœ€è¿‘çš„ä¸€ä¸ªå˜é‡ ç±»å‹å’Œå€¼ä¸€æ ·</span></span>
<span class="line">	<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ–¹å¼2</span></span>
<span class="line">	<span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">		Wednesday <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token comment">// iotaåˆå§‹ä¸º0,  0 + 3 = 3</span></span>
<span class="line">		Thursday             <span class="token comment">// æ¯æ–°å¢ä¸€è¡Œiotaè‡ªå¢é•¿ï¼‘, 1 + 3 = 4</span></span>
<span class="line">		Friday               <span class="token comment">//  åŒç†, 2 + 3 =5</span></span>
<span class="line">		Saturday</span>
<span class="line">		Sunday</span>
<span class="line">	<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨ä¸€: &quot;</span><span class="token punctuation">,</span> Monday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨äºŒ: &quot;</span><span class="token punctuation">,</span> Tuesday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨ä¸‰: &quot;</span><span class="token punctuation">,</span> Wednesday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨å››: &quot;</span><span class="token punctuation">,</span> Thursday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨äº”: &quot;</span><span class="token punctuation">,</span> Friday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨å…­: &quot;</span><span class="token punctuation">,</span> Saturday<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å‘¨æ—¥: &quot;</span><span class="token punctuation">,</span> Sunday<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">å‘¨ä¸€:  <span class="token number">4</span></span>
<span class="line">å‘¨äºŒ:  <span class="token number">4</span></span>
<span class="line">å‘¨ä¸‰:  <span class="token number">3</span></span>
<span class="line">å‘¨å››:  <span class="token number">4</span></span>
<span class="line">å‘¨äº”:  <span class="token number">5</span></span>
<span class="line">å‘¨å…­:  <span class="token number">6</span></span>
<span class="line">å‘¨æ—¥:  <span class="token number">7</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰æŒ‡é’ˆæ“ä½œ</summary><ul><li><p>æŒ‡é’ˆçš„å€¼æ˜¯å˜é‡çš„å†…å­˜åœ°å€</p></li><li><p>ä½¿ç”¨æŒ‡é’ˆå¯ä»¥åœ¨æ— éœ€çŸ¥é“å˜é‡åå­—çš„æƒ…å†µä¸‹ï¼Œé—´æ¥è¯»å–æˆ–æ›´æ–°å˜é‡çš„å€¼</p></li><li><p>æŒ‡é’ˆç±»å‹çš„é›¶å€¼æ˜¯nil</p></li><li><p>æŒ‡é’ˆæ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå˜é‡æˆ–ä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¸ºnilçš„æ—¶ä»–ä»¬æ‰ç›¸ç­‰</p></li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// (1) é€šè¿‡å˜é‡è·å–æŒ‡é’ˆ</span></span>
<span class="line">	name <span class="token operator">:=</span> <span class="token string">&quot;Bob&quot;</span>     <span class="token comment">// å£°æ˜å˜é‡</span></span>
<span class="line">	namePtr <span class="token operator">:=</span> <span class="token operator">&amp;</span>name  <span class="token comment">// è·å–è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆèµ‹å€¼ç»™ namePtr</span></span>
<span class="line">	<span class="token operator">*</span>namePtr <span class="token operator">=</span> <span class="token string">&quot;Jack&quot;</span> <span class="token comment">// é€šè¿‡æŒ‡é’ˆè·å–å˜é‡ï¼Œå¹¶ç»™è¿™ä¸ªå˜é‡èµ‹å€¼</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>     <span class="token comment">// Jack</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>namePtr<span class="token punctuation">)</span> <span class="token comment">// Jack</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// (2) ç›´æ¥å£°æ˜æŒ‡é’ˆå¹¶èµ‹å€¼</span></span>
<span class="line">	<span class="token keyword">var</span> a <span class="token operator">*</span><span class="token builtin">string</span> <span class="token operator">=</span> namePtr</span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token comment">// Jack</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// (3) ç›´æ¥å£°æ˜ç©ºæŒ‡é’ˆ,åç»­èµ‹å€¼ä¼šå¼•å‘panic, åŸå› æ˜¯å¹¶æ²¡æœ‰è¿›è¡Œå†…å­˜åˆ†é…,å¯¼è‡´æ— æ³•èµ‹å€¼</span></span>
<span class="line">	<span class="token keyword">var</span> b <span class="token operator">*</span><span class="token builtin">int</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// &lt;nil&gt;, æŒ‡é’ˆç±»å‹çš„é›¶å€¼ä¸ºnil, è¿™æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆ</span></span>
<span class="line">	<span class="token comment">//fmt.Println(*b) // è¿™ä¼šæŠ¥é”™, å› ä¸ºæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨è¿™æ ·åˆ›å»ºçš„æŒ‡é’ˆç±»å‹,è¿˜æ²¡æœ‰è¿›è¡Œå†…å­˜åˆ†é…,è§£å†³åŠæ³•å¯ä»¥ä½¿ç”¨newå’Œmake</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// (4) å¯¹äºå€¼ç±»å‹æ•°æ®ç»“æ„,ä½¿ç”¨newå£°æ˜å’Œåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡é’ˆå˜é‡</span></span>
<span class="line">	c <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token operator">*</span>c <span class="token operator">=</span> <span class="token number">200</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>c<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// (5) å¯¹ä¸å¼•ç”¨æ•°æ®ç»“æ„,ä½¿ç”¨makeå£°æ˜å’Œåˆ†é…å†…å­˜å¹¶è¿”å›å˜é‡(æ³¨æ„è¿”å›çš„ä¸æ˜¯æŒ‡é’ˆ,å› ä¸ºå¼•ç”¨ç±»å‹å°±æ²¡æœ‰å¿…è¦ç”¨æŒ‡é’ˆäº†)</span></span>
<span class="line">	s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">300</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>        <span class="token comment">// [300]</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span> <span class="token comment">// []int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#è¿ç®—ç¬¦"><span>è¿ç®—ç¬¦</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ç®—æœ¯è¿ç®—ç¬¦</summary><p>è¿ç®—ç¬¦è¯´æ˜</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>+</td><td>åŠ </td></tr><tr><td>-</td><td>å‡</td></tr><tr><td>*</td><td>ä¹˜</td></tr><tr><td>/</td><td>é™¤ï¼Œ<br>æ•´æ•°ç›¸é™¤ä¼šèˆå¼ƒå°æ•°éƒ¨åˆ†ï¼Œæ¯”å¦‚<code>10 /3 = 3</code>, <br>æœ‰ä»»æ„ä¸€ä¸ªæ˜¯æµ®ç‚¹æ•°ç»“æœå°±æ˜¯æµ®ç‚¹æ•°ï¼Œæ¯”å¦‚<code>10 / 3.0 = 3.3333333333333335</code></td></tr><tr><td>%</td><td>å–ä½™ï¼Œå€¼çš„ç¬¦å·å’Œé™¤æ•°ç¬¦å·ä¿æŒä¸€è‡´<br><code>10 % 3 = 1</code><br><code>10 % -3 = 1</code><br><code>-10 % 3 = -1</code></td></tr><tr><td>++</td><td>æ”¯æŒi++ï¼Œä½†ä¸æ”¯æŒ++i</td></tr><tr><td>--</td><td>åŒ++</td></tr></tbody></table><p>ç¤ºä¾‹ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>           <span class="token comment">// 2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>           <span class="token comment">// 0</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>           <span class="token comment">// 4</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>           <span class="token comment">// 1, æ•´æ•°ç›¸é™¤ä¼šèˆå¼ƒå°æ•°éƒ¨åˆ†</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">3.0</span><span class="token punctuation">)</span>        <span class="token comment">// 3.3333333333333335</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token function">float32</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.3333333</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token function">float64</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.3333333333333335, é»˜è®¤çš„æµ®ç‚¹æ•°æ˜¯float64</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>          <span class="token comment">// 1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>         <span class="token comment">// -1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span>         <span class="token comment">// 1</span></span>
<span class="line"></span>
<span class="line">	i <span class="token operator">:=</span> <span class="token number">1</span></span>
<span class="line">	<span class="token comment">// ä¸‹é¢ä½¿ç”¨éƒ½ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼Œ i++æ˜¯ä¸€æ¡è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ï¼Œæ²¡æœ‰è¿”å›å€¼</span></span>
<span class="line">	<span class="token comment">//j := i++</span></span>
<span class="line">	<span class="token comment">//fmt.Println(i++)</span></span>
<span class="line">	i<span class="token operator">++</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 2</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ä½è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#ä½è¿ç®—ç¬¦"><span>ä½è¿ç®—ç¬¦</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸç ã€åç å’Œè¡¥ç </summary><ul><li>åŸç ï¼šæœ€é«˜ä½è¡¨ç¤ºç¬¦å·ä½ï¼Œ0è¡¨ç¤ºæ­£ï¼Œ1è¡¨ç¤ºè´Ÿï¼Œæ‰€ä»¥ -&gt; 0000 0001</li><li>åç  <ul><li>æ­£æ•°çš„åç ç­‰äºåŸç </li><li>è´Ÿæ•°çš„åç ç­‰äºåŸç æŒ‰ä½å–åï¼ˆç¬¦å·ä½é™¤å¤–ï¼‰</li></ul></li><li>è¡¥ç  <ul><li>æ­£æ•°çš„è¡¥ç ç­‰äºåŸç </li><li>è´Ÿæ•°çš„è¡¥ç ç­‰äºåç +1</li></ul></li></ul></details><details class="hint-container details"><summary>ï¼ˆ1ï¼‰^ æŒ‰ä½å–å</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å¤‡æ³¨: è¿™é‡Œæˆ‘ä»¬å°†^ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨ï¼Œå®ƒè¿˜å¯ä»¥ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ä½¿ç”¨</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æœ‰ç¬¦å·æ•°å­—æŒ‰ä½å–å</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—å…¬å¼ï¼š^n = (n + 1) * -1 (næ˜¯æœ‰ç¬¦å·æ•°å­—ï¼Œå¯èƒ½æ˜¯æ­£æ•°ä¹Ÿå¯èƒ½æ˜¯è´Ÿæ•°)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int32</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;^int32(%-5s = %d\n&quot;</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">,</span> <span class="token operator">^</span>v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ— ç¬¦å·æ•°å­—æŒ‰ä½å–å</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—å…¬å¼ï¼š^n = è¯¥ç±»å‹æœ€å¤§å€¼ - n ï¼ˆnæ˜¯æ— ç¬¦å·æ•°å­—ï¼Œ&gt;=0ï¼‰</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;^uint8(%-5s = %d\n&quot;</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">,</span> <span class="token operator">^</span>v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">^int32<span class="token punctuation">(</span>-200<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">199</span></span>
<span class="line">^int32<span class="token punctuation">(</span>-100<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">99</span></span>
<span class="line">^int32<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token parameter variable">-1</span></span>
<span class="line">^int32<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token operator">=</span> <span class="token parameter variable">-101</span></span>
<span class="line">^int32<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token operator">=</span> <span class="token parameter variable">-201</span></span>
<span class="line"></span>
<span class="line">^uint8<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">255</span></span>
<span class="line">^uint8<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">254</span></span>
<span class="line">^uint8<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">253</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å·¦ç§»ä½ å’Œ å³ç§»ä½</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å·¦ç§»ä½</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—å…¬å¼ï¼šn&lt;&lt;m = n*(2çš„mæ¬¡æ–¹) ï¼ˆnä¸º10è¿›åˆ¶æ•°ï¼‰</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-15s&quot;</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&lt;&lt;%d=%d&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token operator">&lt;&lt;</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å³ç§»ä½</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—å…¬å¼ï¼šn&gt;&gt;m = int(n/(2çš„mæ¬¡æ–¹)) ï¼ˆnä¸º10è¿›åˆ¶æ•°ï¼‰</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">10</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-15s&quot;</span><span class="token punctuation">,</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&gt;&gt;%d=%d&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> i<span class="token operator">&gt;&gt;</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">0</span>         <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">0</span>         <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">0</span>         <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">0</span>         </span>
<span class="line"><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">1</span>         <span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span>         <span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">4</span>         <span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">8</span>         </span>
<span class="line"><span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">2</span>         <span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">4</span>         <span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">8</span>         <span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">16</span>        </span>
<span class="line"><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">3</span>         <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">6</span>         <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">12</span>        <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">24</span>        </span>
<span class="line"></span>
<span class="line"><span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">10</span>       <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">5</span>        <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">2</span>        <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">1</span>        </span>
<span class="line"><span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">20</span>       <span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">10</span>       <span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">5</span>        <span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">2</span>        </span>
<span class="line"><span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">0</span><span class="token operator">=</span><span class="token number">30</span>       <span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">15</span>       <span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">7</span>        <span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;&gt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">3</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å·¦ç§»ä½ç¤ºä¾‹ï¼šKB/MB/GBè½¬æ¢</summary><p><strong>1ã€ä¸ä½¿ç”¨ä½è¿ç®—</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">	B  <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	KB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> B</span>
<span class="line">	MB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> KB</span>
<span class="line">	GB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> MB</span>
<span class="line">	TB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> GB</span>
<span class="line">	PB <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> TB</span>
<span class="line"></span>
<span class="line">	B1000  <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	KB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> B1000</span>
<span class="line">	MB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> KB1000</span>
<span class="line">	GB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> MB1000</span>
<span class="line">	TB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> GB1000</span>
<span class="line">	PB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> TB1000</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>KB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>GB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>TB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>PB<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>B1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>KB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>GB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>TB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>PB1000<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><strong>2ã€ä½¿ç”¨ä½è¿ç®—</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">	B <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token boolean">iota</span><span class="token punctuation">)</span></span>
<span class="line">	KB</span>
<span class="line">	MB</span>
<span class="line">	GB</span>
<span class="line">	TB</span>
<span class="line">	PB</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¯¹äºä»¥1000ä¸ºå•ä½,å¹¶æ²¡æœ‰æƒ³åˆ°ç‰¹åˆ«å¥½çš„åŠæ³•ï¼Œå“ªæ€•æ˜¯åˆ©ç”¨iotaåªå†™ç¬¬ä¸€è¡Œä»£ç ï¼Œåé¢å†æƒ³ä¸€æƒ³</span></span>
<span class="line">	B1000  <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	KB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> B1000</span>
<span class="line">	MB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> KB1000</span>
<span class="line">	GB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> MB1000</span>
<span class="line">	TB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> GB1000</span>
<span class="line">	PB1000 <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> TB1000</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>KB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>GB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>TB<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>PB<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>B1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>KB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>MB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>GB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>TB1000<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>PB1000<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">1</span></span>
<span class="line"><span class="token number">1024</span></span>
<span class="line"><span class="token number">1048576</span></span>
<span class="line"><span class="token number">1073741824</span></span>
<span class="line"><span class="token number">1099511627776</span></span>
<span class="line"><span class="token number">1125899906842624</span></span>
<span class="line"></span>
<span class="line"><span class="token number">1</span></span>
<span class="line"><span class="token number">1000</span></span>
<span class="line"><span class="token number">1000000</span></span>
<span class="line"><span class="token number">1000000000</span></span>
<span class="line"><span class="token number">1000000000000</span></span>
<span class="line"><span class="token number">1000000000000000</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å·¦ç§»ä½ç¤ºä¾‹ï¼šæ„é€ KB/MB/GB</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å†™æ³•1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span>           <span class="token comment">// 3KB</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span>      <span class="token comment">// 3MB</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">// 3GB</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ³•2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span>                   <span class="token comment">// 3KB</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span>          <span class="token comment">// 3MB</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">// 3GB</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">3072</span> <span class="token number">3072</span></span>
<span class="line"><span class="token number">3145728</span> <span class="token number">3145728</span></span>
<span class="line"><span class="token number">3221225472</span> <span class="token number">3221225472</span></span>
<span class="line"></span>
<span class="line"><span class="token number">3072</span> <span class="token number">3072</span></span>
<span class="line"><span class="token number">3145728</span> <span class="token number">3145728</span></span>
<span class="line"><span class="token number">3221225472</span> <span class="token number">3221225472</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰&amp; æŒ‰ä½ä¸è¿ç®—</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ä¸è¿ç®—</span></span>
<span class="line">	<span class="token comment">// å¯¹äºæ¯ä¸€ä½ï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token number">15</span></span>
<span class="line">	y <span class="token operator">:=</span> <span class="token number">35</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> x<span class="token operator">&amp;</span>y<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10d\n&quot;</span><span class="token punctuation">,</span> x<span class="token operator">&amp;</span>y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">      <span class="token number">1111</span></span>
<span class="line">    <span class="token number">100011</span></span>
<span class="line">        <span class="token number">11</span></span>
<span class="line">         <span class="token number">3</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ6ï¼‰| æŒ‰ä½æˆ–è¿ç®—</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æˆ–è¿ç®—</span></span>
<span class="line">	<span class="token comment">// 1å’Œ1 æˆ– = 1</span></span>
<span class="line">	<span class="token comment">// 1å’Œ0 æˆ– = 0</span></span>
<span class="line">	<span class="token comment">// 0å’Œ0 æˆ– = 0</span></span>
<span class="line">	<span class="token comment">// 0å’Œä»»ä½•æ•°æˆ–éƒ½å¾—è¯¥æ•°æœ¬èº«</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token number">9</span></span>
<span class="line">	y <span class="token operator">:=</span> <span class="token number">5</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b\n&quot;</span><span class="token punctuation">,</span> x<span class="token operator">|</span>y<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10d\n&quot;</span><span class="token punctuation">,</span> x<span class="token operator">|</span>y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">      <span class="token number">1001</span></span>
<span class="line">       <span class="token number">101</span></span>
<span class="line">      <span class="token number">1101</span></span>
<span class="line">        <span class="token number">13</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ7ï¼‰| æŒ‰ä½æˆ–è¿ç®—ç¤ºä¾‹ï¼šos.OpenFile</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ä¸€æ®µæ™®é€šçš„ä»£ç </span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;test.log&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">,</span> <span class="token number">0777</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Open file error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ†æ</span></span>
<span class="line">	<span class="token comment">// 1ã€os.O_RDWR|os.O_CREATE|os.O_TRUNC å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æˆ–è¿ç®—</span></span>
<span class="line">	<span class="token comment">// 2ã€O_RDWR    = 0x2    = 2  (è½¬ä¸º10è¿›åˆ¶)</span></span>
<span class="line">	<span class="token comment">// 3ã€O_CREATE	= 0x40  = 64  (è½¬ä¸º10è¿›åˆ¶)</span></span>
<span class="line">	<span class="token comment">// 4ã€O_TRUNC   = 0x200 = 512 (è½¬ä¸º10è¿›åˆ¶)</span></span>
<span class="line">	<span class="token comment">// 5ã€ç»è¿‡æˆ–è¿ç®—ä¹‹åï¼Œç”±3ä¸ªæ•°å­—å¾—åˆ°ä¸€ä¸ªæ•°å­— 578</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b %[1]d\n&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b %[1]d\n&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_CREATE<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b %[1]d\n&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%10b %[1]d\n&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 6ã€åœ¨os.OpenFileå‡½æ•°å†…éƒ¨å¦‚ä½•åˆ¤æ–­æ˜¯å¦ä¼ é€’äº†æŸä¸ªå‚æ•°å‘¢ï¼Ÿæ¯”å¦‚os.O_RDWR</span></span>
<span class="line">	<span class="token comment">//    åªéœ€è¦å°†ã€æˆ–è¿ç®—çš„ç»“æœã€‘å’ŒæŸä¸ªé€‰é¡¹è¿›è¡Œã€ä¸è¿ç®—ã€‘ï¼Œå¦‚æœç»“æœä¸ç­‰äº0åˆ™ä»£è¡¨ä¼ é€’äº†è¯¥å‚æ•°</span></span>
<span class="line">	flag <span class="token operator">:=</span> os<span class="token punctuation">.</span>O_RDWR <span class="token operator">|</span> os<span class="token punctuation">.</span>O_CREATE <span class="token operator">|</span> os<span class="token punctuation">.</span>O_TRUNC</span>
<span class="line">	<span class="token keyword">if</span> flag<span class="token operator">&amp;</span>os<span class="token punctuation">.</span>O_RDWR <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;File is opened in read-write mode&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">        <span class="token number">10</span> <span class="token number">2</span></span>
<span class="line">   <span class="token number">1000000</span> <span class="token number">64</span></span>
<span class="line"><span class="token number">1000000000</span> <span class="token number">512</span></span>
<span class="line"><span class="token number">1001000010</span> <span class="token number">578</span></span>
<span class="line">File is opened <span class="token keyword">in</span> read-write mode</span>
<span class="line"></span></code></pre></div></details><br><h3 id="å¸¸ç”¨è¯­å¥" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨è¯­å¥"><span>å¸¸ç”¨è¯­å¥</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å¾ªç¯è¯­å¥</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ------------------------- åŸºç¡€è¯­æ³• --------------------------------</span></span>
<span class="line">	<span class="token comment">// Cè¯­è¨€é£æ ¼å¾ªç¯</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// rangeå¾ªç¯</span></span>
<span class="line">	list <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> list <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v[%d]=%d\n&quot;</span><span class="token punctuation">,</span> list<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç±»ä¼¼while</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">6</span></span>
<span class="line">	<span class="token keyword">for</span> n <span class="token operator">&lt;=</span> <span class="token number">8</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></span>
<span class="line">		n<span class="token operator">++</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ­»å¾ªç¯</span></span>
<span class="line">	<span class="token comment">//for {</span></span>
<span class="line">	<span class="token comment">//	fmt.Println(time.Now())</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ------------------------- é™·é˜± --------------------------------</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\né™·é˜±ä»£ç ï¼š&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	data1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">}</span></span>
<span class="line">	data2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span></span>
<span class="line">		data2 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data2 <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º3ä¸ª300</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// åŸå› </span></span>
<span class="line">	<span class="token comment">// væ˜¯ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯å¹¶ä¸é‡æ–°åˆ†é…å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä»…æ”¹å€¼è€Œå·²ï¼Œ</span></span>
<span class="line">	<span class="token comment">// è¿™å°±å¯¼è‡´å½“æœ€åä¸€æ¬¡å¾ªç¯å®Œæˆåï¼Œvçš„å€¼è¢«é‡ç½®ä¸º300</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ------------------------- è§£å†³ --------------------------------</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nä¿®æ­£ä»£ç -æ–¹å¼1ï¼š&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	data3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> k<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span></span>
<span class="line">		data3 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data3<span class="token punctuation">,</span> <span class="token operator">&amp;</span>data1<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// é€šè¿‡keyæ¥è·å–åŸå§‹æ•°æ®data1ä¸­çš„åœ°å€</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data3 <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º100 200 300</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nä¿®æ­£ä»£ç -æ–¹å¼2ï¼š&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	data4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span></span>
<span class="line">		temp <span class="token operator">:=</span> v <span class="token comment">//ä½¿ç”¨æ–°å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šé‡æ–°å¼€è¾Ÿå†…å­˜ç©ºé—´</span></span>
<span class="line">		data4 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data4<span class="token punctuation">,</span> <span class="token operator">&amp;</span>temp<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data4 <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º100 200 300</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">0</span></span>
<span class="line"><span class="token number">1</span>                  </span>
<span class="line"><span class="token number">2</span>                  </span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">4</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">5</span></span>
<span class="line"><span class="token number">6</span>                  </span>
<span class="line"><span class="token number">7</span>                  </span>
<span class="line"><span class="token number">8</span>                  </span>
<span class="line">                   </span>
<span class="line">é™·é˜±ä»£ç ï¼š         </span>
<span class="line"><span class="token number">300</span>                </span>
<span class="line"><span class="token number">300</span>                </span>
<span class="line"><span class="token number">300</span>                </span>
<span class="line">                   </span>
<span class="line">ä¿®æ­£ä»£ç -æ–¹å¼1ï¼š   </span>
<span class="line"><span class="token number">100</span>                </span>
<span class="line"><span class="token number">200</span>                </span>
<span class="line"><span class="token number">300</span>                </span>
<span class="line">                   </span>
<span class="line">ä¿®æ­£ä»£ç -æ–¹å¼2ï¼š   </span>
<span class="line"><span class="token number">100</span>                </span>
<span class="line"><span class="token number">200</span>                </span>
<span class="line"><span class="token number">300</span>      </span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åˆ¤æ–­è¯­å¥</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ifåˆ¤æ–­</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;ifåˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	a <span class="token operator">:=</span> <span class="token number">100</span></span>
<span class="line">	b <span class="token operator">:=</span> <span class="token number">200</span></span>
<span class="line">	<span class="token keyword">if</span> x<span class="token punctuation">,</span> y <span class="token operator">:=</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span> x <span class="token operator">&lt;</span> y <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d &lt; %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// switch</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nswitchåˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">switch</span> i <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;0-2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;1-3&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">&quot;Default&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nswitch-fallthroughåˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	c <span class="token operator">:=</span> <span class="token number">100</span></span>
<span class="line">	<span class="token keyword">switch</span> c <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token number">50</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;50&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token number">100</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">fallthrough</span> <span class="token comment">// é‡åˆ°fallthroughï¼Œä¼šç»§ç»­æ‰§è¡Œä»£ç åé¢çš„caseï¼Œ defaultä¸æ‰§è¡Œ</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token number">200</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;200&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token number">300</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;300&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Default&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">ifåˆ¤æ–­</span>
<span class="line"><span class="token number">100</span> <span class="token operator">&lt;</span> <span class="token number">200</span>             </span>
<span class="line">                      </span>
<span class="line">switchåˆ¤æ–­            </span>
<span class="line"><span class="token number">0</span> <span class="token number">0</span>-2                 </span>
<span class="line"><span class="token number">1</span> <span class="token number">1</span>-3                 </span>
<span class="line"><span class="token number">2</span> <span class="token number">0</span>-2                 </span>
<span class="line"><span class="token number">3</span> <span class="token number">1</span>-3                 </span>
<span class="line"><span class="token number">4</span> Default             </span>
<span class="line">                      </span>
<span class="line">switch-fallthroughåˆ¤æ–­</span>
<span class="line"><span class="token number">100</span>                   </span>
<span class="line"><span class="token number">200</span></span>
<span class="line"></span></code></pre></div></details><h2 id="-1" tabindex="-1"><a class="header-anchor" href="#-1"><span></span></a></h2><h2 id="åŸºæœ¬æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹"><span>åŸºæœ¬æ•°æ®ç±»å‹</span></a></h2><h3 id="æ•°å­—" tabindex="-1"><a class="header-anchor" href="#æ•°å­—"><span>æ•°å­—</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æ•°å­—ç±»å‹</summary><p>æœ‰ç¬¦å·æ•´æ•°ï¼š<code>int8</code>ã€<code>int16</code>ã€<code>int32</code>ã€<code>int64</code></p><p>æ— ç¬¦å·æ•´æ•°ï¼š<code>uint8</code>ã€<code>uint16</code>ã€<code>uint32</code>ã€<code>uint64</code></p><p>æµ®ç‚¹æ•°ï¼š<code>float32</code>ã€<code>float64</code></p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å„ç±»å‹å–å€¼èŒƒå›´</summary><p>å–å€¼èŒƒå›´è®¡ç®—ï¼š</p><p>ï¼ˆ1ï¼‰æœ‰ç¬¦å·æ•´æ•°ï¼š -2çš„(n-1)æ¬¡æ–¹ ~ (2çš„(n-1)æ¬¡æ–¹ -1)</p><p>â€‹ å› ä¸ºç¬¬ä¸€ä½è¡¨ç¤ºç¬¦å·ä½ï¼Œå®é™…ä½æ•°ä¸ºn-1ï¼ŒåŒæ—¶æ­£æ•°ä¸­0ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ­£æ•°å–å€¼èŒƒå›´è¦-1</p><p>ï¼ˆ2ï¼‰æ— ç¬¦å·æ•´æ•°ï¼š0 ~ (2çš„næ¬¡æ–¹-1)</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—ç³»ç»Ÿä½æ•°(32 or 64)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰æ“ä½œç³»ç»Ÿä½æ•°: %d\n&quot;</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span>IntSize<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æœ‰ç¬¦å·æ•´æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næœ‰ç¬¦å·æ•´æ•°&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int8 å–å€¼èŒƒå›´: %20d ~ %-d\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt8<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt8<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int16å–å€¼èŒƒå›´: %20d ~ %-d\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt16<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt16<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int32å–å€¼èŒƒå›´: %20d ~ %-d\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt32<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt32<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int64å–å€¼èŒƒå›´: %20d ~ %-d\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt64<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt64<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int  å–å€¼èŒƒå›´: %20d ~ %-d\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ— ç¬¦å·æ•´æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næ— ç¬¦å·æ•´æ•°&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;uint8  å–å€¼èŒƒå›´: %d ~ %-d\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint8<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;uint16 å–å€¼èŒƒå›´: %d ~ %-d\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint16<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;uint32 å–å€¼èŒƒå›´: %d ~ %-d\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint32<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;uint64 å–å€¼èŒƒå›´: %d ~ %-d\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">uint64</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxUint64<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¿™é‡Œéœ€è¦è½¬ä¸ºuint64</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;uint   å–å€¼èŒƒå›´: %d ~ %-d\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">uint64</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxUint<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// è¿™é‡Œéœ€è¦è½¬ä¸ºuint64</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ®ç‚¹æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næµ®ç‚¹æ•°&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;float32 å–å€¼èŒƒå›´: %10.1e ~ %-10.1e\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>SmallestNonzeroFloat32<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxFloat32<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;float64 å–å€¼èŒƒå›´: %10.1e ~ %-10.1e\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>SmallestNonzeroFloat64<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxFloat64<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">å½“å‰æ“ä½œç³»ç»Ÿä½æ•°: <span class="token number">64</span></span>
<span class="line"></span>
<span class="line">æœ‰ç¬¦å·æ•´æ•°                                               </span>
<span class="line">int8 å–å€¼èŒƒå›´:                 <span class="token parameter variable">-128</span> ~ <span class="token number">127</span>                </span>
<span class="line">int16å–å€¼èŒƒå›´:               <span class="token parameter variable">-32768</span> ~ <span class="token number">32767</span>              </span>
<span class="line">int32å–å€¼èŒƒå›´:          <span class="token parameter variable">-2147483648</span> ~ <span class="token number">2147483647</span>         </span>
<span class="line">int64å–å€¼èŒƒå›´: <span class="token parameter variable">-9223372036854775808</span> ~ <span class="token number">9223372036854775807</span></span>
<span class="line">int  å–å€¼èŒƒå›´: <span class="token parameter variable">-9223372036854775808</span> ~ <span class="token number">9223372036854775807</span></span>
<span class="line">                                                         </span>
<span class="line">æ— ç¬¦å·æ•´æ•°                                               </span>
<span class="line">uint8  å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">255</span>                                 </span>
<span class="line">uint16 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">65535</span>                               </span>
<span class="line">uint32 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">4294967295</span>                          </span>
<span class="line">uint64 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">18446744073709551615</span>                </span>
<span class="line">uint   å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">18446744073709551615</span>                </span>
<span class="line">                                                         </span>
<span class="line">æµ®ç‚¹æ•°                                                   </span>
<span class="line">float32 å–å€¼èŒƒå›´:    <span class="token number">1</span>.4e-45 ~ <span class="token number">3</span>.4e+38                   </span>
<span class="line">float64 å–å€¼èŒƒå›´:   <span class="token number">4</span>.9e-324 ~ <span class="token number">1</span>.8e+308</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å„ç±»å‹è½¬æ¢æ³¨æ„äº‹é¡¹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰§è¡Œæ­£å¸¸,è¿™ä¸ªå®¹æ˜“ç†è§£,å°èŒƒå›´è½¬å¤§èŒƒå›´</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰§è¡ŒæŠ¥é”™,è¿™ä¸ªä¹Ÿå®¹æ˜“ç†è§£,å¤§èŒƒå›´è½¬å°èŒƒå›´,ç›´æ¥æŠ¥é”™</span></span>
<span class="line">	<span class="token comment">//fmt.Println(int8(int16(0x1234))) // cannot convert int16(0x1234) (constant 4660 of type int16) to type int8</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰§è¡Œæ­£å¸¸, ä½†æ˜¯ç»“æœä¸å¯¹</span></span>
<span class="line">	i <span class="token operator">:=</span> <span class="token number">0x1234</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token function">int16</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	y <span class="token operator">:=</span> <span class="token function">int8</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#x&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// 0x34,ç»“æœæ˜æ˜¾æœ‰é”™è¯¯,ä¸¢å¤±äº†ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰è¿›åˆ¶ã€ä½æ•°å’Œå­˜å‚¨ç©ºé—´</summary><p><strong>1.å„ä¸ªè¿›åˆ¶çš„è¡¨ç¤ºæ–¹æ³•</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å„ä¸ªè¿›åˆ¶å‰ç¼€</span></span>
<span class="line">	<span class="token comment">// åè¿›åˆ¶å‰ç¼€:   æ— </span></span>
<span class="line">	<span class="token comment">// äºŒè¿›åˆ¶å‰ç¼€:   0bæˆ–0B</span></span>
<span class="line">	<span class="token comment">// å…«è¿›åˆ¶å‰ç¼€:   0oæˆ–0O</span></span>
<span class="line">	<span class="token comment">// åå…­è¿›åˆ¶å‰ç¼€: 0xæˆ–0X</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment">// åè¿›åˆ¶10    =&gt; åè¿›åˆ¶10</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">0b10</span><span class="token punctuation">)</span> <span class="token comment">// äºŒè¿›åˆ¶10    =&gt; åè¿›åˆ¶2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">0o10</span><span class="token punctuation">)</span>  <span class="token comment">// å…«è¿›åˆ¶10    =&gt; åè¿›åˆ¶8</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">0x10</span><span class="token punctuation">)</span> <span class="token comment">// åå…­è¿›åˆ¶10  =&gt; åè¿›åˆ¶16</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><strong>2ã€å­—èŠ‚å’ŒäºŒè¿›åˆ¶ä½çš„å…³ç³»</strong></p><ul><li><p>ä¸€ä¸ªå­—èŠ‚ç­‰äº8ä¸ªäºŒè¿›åˆ¶ä½æ‰€å æ®çš„å­˜å‚¨ç©ºé—´</p></li><li><p>ç®€å•åœ°è¯´å°±æ˜¯ï¼Œä¸€ä¸ªå­—èŠ‚ = 8ä½ï¼Œ1byte = 8bit</p></li></ul><p><strong>3ã€ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—éœ€è¦å¤šå°‘ä½äºŒè¿›åˆ¶æ•°å­—æ‰èƒ½è¡¨ç¤º</strong></p><ul><li>1ä½äºŒè¿›åˆ¶ï¼Œèƒ½è¡¨ç¤º2ä¸ªæ•°å­—ï¼Œ2çš„1æ¬¡æ–¹ = 2ï¼Œå³0å’Œ1</li><li>2ä½äºŒè¿›åˆ¶ï¼Œèƒ½è¡¨ç¤º4ä¸ªæ•°å­—ï¼Œ2çš„2æ¬¡æ–¹ = 4</li><li>3ä½äºŒè¿›åˆ¶ï¼Œèƒ½è¡¨ç¤º8ä¸ªæ•°å­—ï¼Œ2çš„3æ¬¡æ–¹ = 8</li><li>4ä½äºŒè¿›åˆ¶ï¼Œèƒ½è¡¨ç¤º16ä¸ªæ•°å­—ï¼Œ2çš„4æ¬¡æ–¹ = 16</li><li>æ‰€ä»¥è¯´ï¼Œä¸€ä½16è¿›åˆ¶æ•°å­—éœ€è¦4ä½äºŒè¿›åˆ¶æ•°å­—æ‰èƒ½è¡¨ç¤ºï¼ŒåŒç†8è¿›åˆ¶éœ€è¦3ä½äºŒè¿›åˆ¶æ•°</li></ul><p><strong>4ã€int8ã€int16ã€int32ã€int64è¿™é‡Œçš„æ•°å­—ä»£è¡¨å•¥ï¼Ÿ</strong></p><p>int8ä»£è¡¨å æ®8ä¸ªäºŒè¿›åˆ¶çš„å­˜å‚¨ç©ºé—´ï¼Œï¼ŒåŒç†int64ä»£è¡¨ä¼šå æ®64ä¸ªäºŒè¿›åˆ¶çš„å­˜å‚¨ç©ºé—´ï¼Œ</p><p>å³int8ç±»å‹ä¼šå æ®1ä¸ªå­—èŠ‚å­˜å‚¨ç©ºé—´ï¼Œint64ä¼šå æ®8ä¸ªå­—èŠ‚å­˜å‚¨ç©ºé—´</p><p>5ã€<code>0x1234</code>å æ®å‡ ä¸ªå­—èŠ‚</p><ul><li><p>é¦–å…ˆä»–æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ²¡æœ‰è¯´æ˜å…·ä½“çš„Goç±»å‹çš„è¯å°±æ˜¯<code>int</code>ç±»å‹ï¼Œæ ¹æ®æ‰€å¤„çš„å¹³å°ä½æ•°å¯èƒ½æ˜¯<code>int32</code>å’Œ<code>int64</code>ã€‚</p><p>å¤§å¤šæ•°ç³»ç»Ÿéƒ½æ˜¯64ä½ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºå®ƒå æ®8ä¸ªå­—èŠ‚</p></li><li><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬ä»äºŒè¿›åˆ¶ä½æ¥åˆ†æä¸€ä¸‹ï¼š</p><ul><li><code>0x</code>ä»£è¡¨æ˜¯åå…­è¿›åˆ¶æ•°å­—ï¼Œæ€»å…±æœ‰4ä½ï¼Œä¸€ä½åå…­è¿›åˆ¶æ•°å­—ç­‰äºå››ä½äºŒè¿›åˆ¶æ•°ï¼Œæ‰€ä»¥æ¢ç®—æˆäºŒè¿›åˆ¶ä½æ•°å°±æ˜¯ 4 * 4 = 16ä½äºŒè¿›åˆ¶æ•°</li><li>é‚£ä¹ˆå®ƒå°±å¯ä»¥è¢«è½¬æ¢ä¸º<code>int16</code>ç±»å‹ï¼Œå³<code>int16(0x1234)</code>ï¼Œè½¬æ¢å®Œæˆåå®ƒåªä¼šå æ®16ä½äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥æ­¤æ—¶å®ƒå æ®2ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´</li></ul></li><li><p>æ€»ç»“ï¼šæ ¹æ®<code>0x1234</code>ç±»å‹çš„ä¸åŒï¼Œå¯èƒ½ä¼šå æ®2ã€4ã€8ä¸ªå­—èŠ‚</p></li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unsafe&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token number">0x1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// 8</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0x1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0x1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0x1234</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰ç§‘å­¦è®¡æ•°æ³•</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç§‘å­¦è®¡æ•°æ³•æ˜¯ä¸€ç§ç”¨äºè¡¨ç¤ºéå¸¸å¤§æˆ–éå¸¸å°çš„æ•°çš„æ–¹æ³•ï¼Œå®ƒä½¿ç”¨æŒ‡æ•°å½¢å¼æ¥è¡¨ç¤ºæ•°å­—</span></span>
<span class="line">	<span class="token comment">// è®¡æ•°æ ¼å¼: &lt;m&gt;e&lt;n&gt;</span></span>
<span class="line">	<span class="token comment">// è®¡ç®—æ–¹æ³•ï¼š m * nçš„10æ¬¡æ–¹æ³•</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">1e9</span><span class="token punctuation">)</span>   <span class="token comment">// 1 * 10çš„9æ¬¡æ–¹   = 1 * 10^9     = 10äº¿</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">2e3</span><span class="token punctuation">)</span>   <span class="token comment">// 2 * 10çš„3æ¬¡æ–¹   = 2 * 10^3     = 2000</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">1e-5</span><span class="token punctuation">)</span>  <span class="token comment">// 1 * 10çš„-5æ¬¡æ–¹  = 1 * 10(^-5)  = 0.00001</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">75e-2</span><span class="token punctuation">)</span> <span class="token comment">// 75 * 10çš„-2æ¬¡æ–¹ = 75 * 10(^-2) = 0.75</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token number">1000000000.000000</span></span>
<span class="line"><span class="token number">2000.000000</span></span>
<span class="line"><span class="token number">0.000010</span></span>
<span class="line"><span class="token number">0.750000</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²"><span>å­—ç¬¦ä¸²</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ä¸‰ç§ç±»å‹å£°æ˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> s1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;\&quot;hello\&quot; world!&quot;</span> <span class="token comment">// (1) æ–¹æ³•1ï¼šä½¿ç”¨åŒå¼•å·ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¹ŸåŒ…å«åŒå¼•å·åˆ™éœ€è¦è½¬ä¹‰</span></span>
<span class="line">	<span class="token keyword">var</span> s2 <span class="token builtin">string</span> <span class="token operator">=</span> `<span class="token string">&quot;hello&quot;</span> world<span class="token operator">!</span>`   <span class="token comment">// (2) æ–¹æ³•2ï¼šä½¿ç”¨åå¼•å·ï¼Œä¸éœ€è¦è½¬ä¹‰ï¼Œæ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—èŠ‚å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> b1 <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token char">&#39;a&#39;</span>      <span class="token comment">// ä½¿ç”¨å•å¼•å·å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> b2 <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token char">&#39;b&#39;</span>     <span class="token comment">// byteçš„æœ¬è´¨å°±æ˜¯uint8, ä»£è¡¨ä¸€ä¸ªASCIIå­—ç¬¦ï¼Œæ— æ³•è¡¨ç¤ºä¸­æ–‡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> b1<span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä½¿ç”¨%cæˆ–%qï¼Œä¸èƒ½ä½¿ç”¨%s</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> b2<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—ç¬¦å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> r1 <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token char">&#39;ä¸­&#39;</span>  <span class="token comment">// ä½¿ç”¨å•å¼•å·å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> r2 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token char">&#39;å›½&#39;</span> <span class="token comment">// runeçš„æœ¬è´¨å°±æ˜¯int32, ä»£è¡¨ä¸€ä¸ªUnicodeå­—ç¬¦ï¼Œé™¤äº†èƒ½è¡¨ç¤ºASCIIè¿˜èƒ½è¡¨ç¤ºä¸­æ–‡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> r2<span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä½¿ç”¨%cæˆ–%qï¼Œä¸èƒ½ä½¿ç”¨%s</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token string">&quot;hello&quot;</span> world<span class="token operator">!</span></span>
<span class="line"><span class="token string">&quot;hello&quot;</span> world<span class="token operator">!</span></span>
<span class="line">a             </span>
<span class="line"><span class="token string">&#39;b&#39;</span>           </span>
<span class="line">ä¸­            </span>
<span class="line"><span class="token string">&#39;å›½&#39;</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å­—ç¬¦ä¸²çš„æœ¬è´¨å°±æ˜¯å­—èŠ‚æ•°ç»„</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode/utf8&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²å®šä¹‰</span></span>
<span class="line">	s1 <span class="token operator">:=</span> <span class="token string">&quot;åŒ—äº¬æ¬¢è¿ä½ &quot;</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;        å­—ç¬¦ä¸²: %-s\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// 15</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;  è®¡ç®—å­—èŠ‚é•¿åº¦: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 15</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;  è®¡ç®—runeé•¿åº¦: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;  è®¡ç®—runeé•¿åº¦: %d\n&quot;</span><span class="token punctuation">,</span> utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span></span>
<span class="line">    </span>
<span class="line">	<span class="token comment">// ------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŒ‰ç…§å­—èŠ‚éå† - éå†å‡ºæ¥æ˜¯ä¹±ç </span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;string[%d]=%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŒ‰ç…§å­—èŠ‚æ•°ç»„éå† - éå†å‡ºæ¥æ˜¯ä¹±ç ï¼Œå’Œä¸Šé¢çš„ç»“æœæ˜¯ä¸€æ ·çš„</span></span>
<span class="line">	s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;string[%d]=%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨rangeéå† - ä¸‹æ ‡å…·æœ‰ä¸ç¡®å®šæ€§</span></span>
<span class="line">	<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> s1 <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;string[%d]=%c\n&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨runeéå† - å®Œç¾</span></span>
<span class="line">	s3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;string[%d]=%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s3<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">        å­—ç¬¦ä¸²: åŒ—äº¬æ¬¢è¿ä½ </span>
<span class="line">è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦: <span class="token number">15</span></span>
<span class="line">  è®¡ç®—å­—èŠ‚é•¿åº¦: <span class="token number">15</span></span>
<span class="line">  è®¡ç®—runeé•¿åº¦: <span class="token number">5</span> </span>
<span class="line">  è®¡ç®—runeé•¿åº¦: <span class="token number">5</span> </span>
<span class="line"></span>
<span class="line">ä¸­é—´ä¹±ç çœç•¥<span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>åŒ—</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>äº¬</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span>æ¬¢</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">=</span>è¿</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token operator">=</span>ä½ </span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>åŒ—</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>äº¬</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>æ¬¢</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>è¿</span>
<span class="line">string<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span>ä½ </span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰stringsåŒ…ä»‹ç»</summary><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/strings" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/strings</a></p><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://studygolang.com/static/pkgdoc/pkg/strings.htm" target="_blank" rel="noopener noreferrer">https://studygolang.com/static/pkgdoc/pkg/strings.htm</a></p><p>å¸¸ç”¨å‡½æ•°</p><table><thead><tr><th>åˆ†ç±»</th><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²ç›¸ç­‰</td><td><code>func EqualFold(s, t string) bool</code></td><td>åˆ¤æ–­ä¸¤ä¸ª<code>UTF-8</code>å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸åŒºåˆ†å¤§å°å†™</td></tr><tr><td>å‰åç¼€åˆ¤æ–­</td><td><code>func HasPrefix(s, prefix string) bool</code></td><td>åˆ¤æ–­<code>s</code>æ˜¯å¦æœ‰å‰ç¼€å­—ç¬¦ä¸²<code>prefix</code></td></tr><tr><td></td><td><code>func HasSuffix(s, suffix string) bool</code></td><td>åˆ¤æ–­<code>s</code>æ˜¯å¦æœ‰åç¼€å­—ç¬¦ä¸²<code>suffix </code></td></tr><tr><td>å­—ç¬¦ä¸²åŒ…å«</td><td><code>func Contains(s, substr string) bool</code></td><td>åˆ¤æ–­å­—ç¬¦ä¸²<code>s</code>æ˜¯å¦åŒ…å«å­ä¸²<code>substr</code></td></tr><tr><td></td><td><code>func ContainsRune(s string, r rune) bool</code></td><td>åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦åŒ…å«<code>utf-8</code>ç å€¼<code>r</code></td></tr><tr><td></td><td><code>func ContainsAny(s, chars string) bool</code></td><td>åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦åŒ…å«å­—ç¬¦ä¸²<code>chars</code>ä¸­çš„ä»»ä¸€å­—ç¬¦</td></tr><tr><td>å¤§å°å†™</td><td><code>func ToLower(s string) string</code></td><td>è¿”å›å°†æ‰€æœ‰å­—æ¯éƒ½è½¬ä¸ºå¯¹åº”çš„å°å†™ç‰ˆæœ¬çš„æ‹·è´</td></tr><tr><td></td><td><code>func ToUpper(s string) string</code></td><td>è¿”å›å°†æ‰€æœ‰å­—æ¯éƒ½è½¬ä¸ºå¯¹åº”çš„å¤§å†™ç‰ˆæœ¬çš„æ‹·è´</td></tr><tr><td>æ¸…é™¤</td><td><code>func Trim(s string, cutset string) string</code></td><td>è¿”å›å°†så‰åç«¯æ‰€æœ‰<code>cutset</code>åŒ…å«çš„<code>utf-8</code>ç å€¼éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td></tr><tr><td></td><td><code>func TrimSpace(s string) string</code></td><td>è¿”å›å°†så‰åç«¯æ‰€æœ‰ç©ºç™½éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td></tr><tr><td></td><td><code>func TrimFunc(s string, f func(rune) bool) string</code></td><td>è¿”å›å°†så‰åç«¯æ‰€æœ‰æ»¡è¶³<code>f</code>çš„<code>unicode</code>ç å€¼éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td></tr><tr><td>åˆ†å‰²</td><td><code>func Split(s, sep string) []string</code></td><td>ä»¥<code>sep</code>ä½œä¸ºåˆ†å‰²ç¬¦åˆ†å‰²å­—ç¬¦ä¸²ç›´æ¥æœ«å°¾ï¼Œ<br>å¦‚æœ<code>sep</code>ä¸ºç©ºåˆ™è¿”å›æ¯ä¸ª<code>Unicode</code>ç ç‚¹</td></tr><tr><td></td><td><code>func SplitN(s, sep string, n int) []string</code></td><td>åŒ<code>Split</code>ï¼Œå‚æ•°<code>n</code>å†³å®šè¿”å›çš„åˆ‡ç‰‡çš„æ•°ç›®<br><code>n</code> == 0ï¼Œè¿”å›<code>nil</code>ï¼ˆç©ºåˆ‡ç‰‡é›¶å€¼ï¼‰<br><code>n</code> &gt; 0 è¿”å›çš„åˆ‡ç‰‡æœ€å¤šnä¸ªå­å­—ç¬¦ä¸²ï¼›æœ€åä¸€ä¸ªå­å­—ç¬¦ä¸²åŒ…å«æœªè¿›è¡Œåˆ‡å‰²çš„éƒ¨åˆ†<br><code>n</code> &lt; 0 : è¿”å›æ‰€æœ‰çš„å­å­—ç¬¦ä¸²ç»„æˆçš„åˆ‡ç‰‡</td></tr><tr><td></td><td><code>func SplitAfter(s, sep string) []string</code></td><td>åŒ<code>Split</code>ï¼Œåªæ˜¯ä¼šä¿ç•™åˆ†éš”ç¬¦</td></tr><tr><td></td><td></td><td></td></tr><tr><td>è¿æ¥</td><td><code>func Join(a []string, sep string) string</code></td><td>å°†ä¸€ç³»åˆ—å­—ç¬¦ä¸²è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹‹é—´ç”¨sepæ¥åˆ†éš”</td></tr></tbody></table><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">&quot;go&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true, ä¸åŒºåˆ†å¤§å°å†™</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;go&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;GO&quot;</span><span class="token punctuation">)</span>                  <span class="token comment">// false, åŒºåˆ†å¤§å°å†™</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²å‰åç¼€åŒ¹é…</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nå­—ç¬¦ä¸²å‰åç¼€åŒ¹é…&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;he&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; he&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²åŒ…å«åŒ¹é…</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nå­—ç¬¦ä¸²åŒ…å«åŒ¹é…&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ell&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ContainsRune</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;äºº&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ContainsAny</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä½ æ˜¯å“ªé‡Œçš„äººå•Šï¼Ÿ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¤§å°å†™è½¬æ¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nå¤§å°å†™è½¬æ¢&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// hello</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ¸…é™¤</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næ¸…é™¤&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;l!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                       <span class="token comment">// hello world, !è¢«æ¸…é™¤äº†ï¼Œè¯´æ˜å¹¶æ²¡æœ‰å°†l!ä½œä¸ºä¸€ä¸ªæ•´ä½“</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token string">&quot;@!hello world!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!@&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// hello world, å†æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼ŒéªŒè¯æˆåŠŸ</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token string">&quot; 	hello world &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                      <span class="token comment">// æ¸…é™¤ä¸¤ä¾§çš„ç©ºç™½</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimFunc</span><span class="token punctuation">(</span><span class="token string">&quot; hello world HAHA&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span> <span class="token comment">// æ¸…é™¤ä¸¤ä¾§çš„ç©ºç™½å’Œå¤§å†™å­—æ¯</span></span>
<span class="line">		<span class="token keyword">return</span> unicode<span class="token punctuation">.</span><span class="token function">IsSpace</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">||</span> unicode<span class="token punctuation">.</span><span class="token function">IsUpper</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ†å‰²</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nåˆ†å‰²&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// [&quot;a&quot; &quot;b&quot; &quot;c&quot;]</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;aab&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// [&quot;&quot; &quot;&quot; &quot;b&quot;]</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;a b c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// [&quot;a&quot; &quot; &quot; &quot;b&quot; &quot; &quot; &quot;c&quot;]</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span><span class="token string">&quot;a b c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å‚æ•°nå†³å®šè¿”å›çš„åˆ‡ç‰‡çš„æ•°ç›®</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¿æ¥</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nè¿æ¥&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­</span>
<span class="line"><span class="token boolean">true</span>            </span>
<span class="line"><span class="token boolean">false</span>           </span>
<span class="line">                </span>
<span class="line">å­—ç¬¦ä¸²å‰åç¼€åŒ¹é…</span>
<span class="line"><span class="token boolean">true</span>            </span>
<span class="line"><span class="token boolean">false</span>           </span>
<span class="line">                </span>
<span class="line">å­—ç¬¦ä¸²åŒ…å«åŒ¹é…  </span>
<span class="line"><span class="token boolean">true</span>            </span>
<span class="line"><span class="token boolean">true</span>            </span>
<span class="line"><span class="token boolean">true</span>            </span>
<span class="line">                </span>
<span class="line">å¤§å°å†™è½¬æ¢      </span>
<span class="line">hello           </span>
<span class="line">                </span>
<span class="line">æ¸…é™¤            </span>
<span class="line">hello world     </span>
<span class="line">hello world     </span>
<span class="line">hello world     </span>
<span class="line">hello world     </span>
<span class="line">                </span>
<span class="line">åˆ†å‰²            </span>
<span class="line"><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span> <span class="token string">&quot;b&quot;</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span>   </span>
<span class="line"><span class="token punctuation">[</span><span class="token string">&quot;&quot;</span> <span class="token string">&quot;&quot;</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span>     </span>
<span class="line"><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span> <span class="token string">&quot; &quot;</span> <span class="token string">&quot;b&quot;</span> <span class="token string">&quot; &quot;</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token string">&quot;a b c&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">è¿æ¥</span>
<span class="line">hello world <span class="token operator">!</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰bytesåŒ…ä»‹ç»</summary><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/bytes" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/bytes</a></p><p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://studygolang.com/static/pkgdoc/pkg/bytes.htm" target="_blank" rel="noopener noreferrer">https://studygolang.com/static/pkgdoc/pkg/bytes.htm</a></p><p>bytesåŒ…å®ç°äº†æ“ä½œ<code>[]byte</code>çš„å¸¸ç”¨å‡½æ•°ï¼Œä¸<code>string</code>åŒ…å‡½æ•°ç±»ä¼¼ï¼Œç®€å•ä»‹ç»å‡ ä¸ªæ–¹æ³•</p><table><thead><tr><th>åˆ†ç±»</th><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç›¸ç­‰åˆ¤æ–­</td><td><code>func Equal(a, b []byte) bool</code></td><td>åˆ¤æ–­ä¸¤ä¸ªåˆ‡ç‰‡çš„å†…å®¹æ˜¯å¦å®Œå…¨ç›¸åŒ</td></tr><tr><td></td><td><code>func EqualFold(s, t []byte) bool</code></td><td>åˆ¤æ–­ä¸¤ä¸ª<code>utf-8</code>ç¼–ç åˆ‡ç‰‡ï¼ˆå°†unicodeå¤§å†™ã€å°å†™ã€æ ‡é¢˜ä¸‰ç§æ ¼å¼å­—ç¬¦è§†ä¸ºç›¸åŒï¼‰æ˜¯å¦ç›¸åŒ</td></tr><tr><td>è½¬æ¢</td><td><code>func Runes(s []byte) []rune</code></td><td>è¿”å›å’Œsç­‰ä»·çš„[]runeåˆ‡ç‰‡</td></tr></tbody></table><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bytes&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å­—èŠ‚åˆ‡ç‰‡ç›¸ç­‰åˆ¤æ–­</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å­—èŠ‚åˆ‡ç‰‡ç›¸ç­‰åˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// å®Œå…¨ç›¸ç­‰</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ä¸åŒºåˆ†å¤§å°å†™</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è½¬æ¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nè½¬æ¢&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">Runes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// true</span></span>
<span class="line"><span class="token comment">// true       </span></span>
<span class="line"><span class="token comment">// [&#39;ä½ &#39; &#39;å¥½&#39;]</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰unicodeç³»åˆ—åŒ…ä»‹ç»</summary><p><strong>ä»‹ç»</strong></p><p><code>unicode</code>åŒ…åŒ…å«åŸºæœ¬çš„å­—ç¬¦åˆ¤æ–­å‡½æ•°ã€‚</p><p><code>utf8</code>åŒ…ä¸»è¦è´Ÿè´£<code>rune</code>å’Œ<code>byte</code>ä¹‹é—´çš„è½¬æ¢ã€‚</p><p><code>utf16</code>åŒ…è´Ÿè´£<code>rune</code>å’Œ<code>uint16</code>æ•°ç»„ä¹‹é—´çš„è½¬æ¢</p><br><p><strong>å®˜æ–¹æ–‡æ¡£</strong></p><p><code>unicode</code>ï¼š<a href="https://pkg.go.dev/unicode" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode</a></p><p><code>unicode/utf8</code>ï¼š<a href="https://pkg.go.dev/unicode/utf8" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode/utf8</a></p><p><code>unicode/utf16</code>ï¼š<a href="https://pkg.go.dev/unicode/utf16" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode/utf16</a></p><br><p><strong>å‡½æ•°</strong></p><table><thead><tr><th>åŒ…å</th><th>åˆ†ç±»</th><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>unicode</code></td><td>å­—ç¬¦åˆ¤æ–­</td><td><code>func Is(rangeTab *RangeTable, r rune) bool</code></td><td>åˆ¤æ–­<code>r</code>æ˜¯å¦åœ¨<code>RangeTable</code>å†…</td></tr><tr><td></td><td></td><td><code>func IsSpace(r rune) bool</code></td><td>æ˜¯å¦æ˜¯ç©ºç™½å­—ç¬¦ï¼ˆç©ºå­—ç¬¦ä¸²ä¼šæŠ¥é”™ï¼‰</td></tr><tr><td></td><td></td><td><code>func IsDigit(r rune) bool</code></td><td>æ˜¯å¦æ˜¯åè¿›åˆ¶æ•°å­—</td></tr><tr><td></td><td></td><td><code>func IsNumber(r rune) bool</code></td><td>æ˜¯å¦æ˜¯æ•°å­—</td></tr><tr><td></td><td></td><td><code>func IsLetter(r rune) bool</code></td><td>æ˜¯å¦æ˜¯å­—æ¯</td></tr><tr><td></td><td></td><td><code>func IsLower(r rune) bool</code></td><td>æ˜¯å¦æ˜¯å°å†™å­—æ¯</td></tr><tr><td></td><td></td><td><code>func IsUpper(r rune) bool</code></td><td>æ˜¯å¦æ˜¯å¤§å†™å­—æ¯</td></tr><tr><td></td><td>è½¬æ¢</td><td><code>func ToLower(r rune) rune</code></td><td>è¿”å›å¯¹åº”çš„å°å†™å­—ç¬¦</td></tr><tr><td></td><td></td><td><code>func ToUpper(r rune) rune</code></td><td>è¿”å›å¯¹åº”çš„å°å†™å­—ç¬¦</td></tr><tr><td><code>unicode/utf8</code></td><td>bytesè½¬rune</td><td><code>func DecodeRune(p []byte) (r rune, size int)</code></td><td>è§£ç  []byteä¸­<strong>ç¬¬ä¸€ä¸ª</strong><code>UTF-8</code> ç¼–ç åºåˆ—ï¼Œè¿”å›è¯¥ç å€¼å’Œé•¿åº¦</td></tr><tr><td></td><td></td><td><code>func DecodeLastRune(p []byte) (r rune, size int)</code></td><td>åŒ<code>DecodeRune</code>ï¼Œæ˜¯æœ€åä¸€ä¸ª<code>UTF-8</code> ç¼–ç åºåˆ—</td></tr><tr><td></td><td></td><td><code>func DecodeRuneInString(s string) (r rune, size int)</code></td><td>åŒ<code>DecodeRune</code>ï¼Œä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²</td></tr><tr><td></td><td></td><td><code>func DecodeLastRuneInString(s string) (r rune, size int)</code></td><td>åŒ<code>DecodeRune</code>ï¼Œä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯æœ€åä¸€ä¸ª<code>UTF-8</code> ç¼–ç åºåˆ—</td></tr><tr><td></td><td>runeè½¬bytes</td><td><code>func EncodeRune(p []byte, r rune) int</code></td><td>å°† runeçš„<code>UTF-8 </code>ç¼–ç åºåˆ—å†™å…¥<code>[]byte</code>ï¼Œå¹¶è¿”å›å†™å…¥çš„å­—èŠ‚æ•°ã€‚péœ€è¦æ»¡è¶³è¶³å¤Ÿçš„é•¿åº¦</td></tr><tr><td></td><td>æ£€æµ‹</td><td><code>func FullRune(p []byte) bool</code></td><td>æ£€æµ‹<code>[]byte</code>æ˜¯å¦åŒ…å«ä¸€ä¸ªå®Œæ•´ <code>UTF-8</code>ç¼–ç ï¼ˆåªè¦åŒ…å«ä¸€ä¸ªå°±è¿”å›trueï¼‰</td></tr><tr><td></td><td></td><td><code>func FullRuneInString(s string) bool</code></td><td>åŒä¸Šï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td></td><td></td><td><code>func RuneStart(b byte) bool</code></td><td>æ£€æµ‹å­—èŠ‚ byte b æ˜¯å¦å¯ä»¥ä½œä¸ºæŸä¸ª rune ç¼–ç çš„ç¬¬ä¸€ä¸ªå­—èŠ‚</td></tr><tr><td></td><td></td><td><code>func Valid(p []byte) bool</code></td><td>æ£€æµ‹åˆ‡ç‰‡<code>[]byte</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code>UTF-8</code>ç¼–ç åºåˆ—ï¼ˆä¸èƒ½æœ‰ä¹±ç ï¼‰</td></tr><tr><td></td><td></td><td><code>func ValidRune(r rune) bool</code></td><td>æ£€æµ‹å­—ç¬¦<code>rune</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code>UTF-8</code>ç¼–ç åºåˆ—</td></tr><tr><td></td><td></td><td><code>func ValidString(s string) bool</code></td><td>æ£€æµ‹å­—ç¬¦ä¸²<code>string</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code>UTF-8</code>ç¼–ç åºåˆ—</td></tr><tr><td></td><td>ç»Ÿè®¡</td><td><code>func RuneCount(p []byte) int</code></td><td>ç»Ÿè®¡<code>[]byte</code>ä¸­<code>rune</code>çš„ä¸ªæ•°</td></tr><tr><td></td><td></td><td><code>func RuneCountInString(s string) (n int)</code></td><td>åŒä¸Šï¼Œè¾“å…¥æ˜¯å­—ç¬¦ä¸²</td></tr><tr><td></td><td></td><td><code>func RuneLen(r rune) int</code></td><td>ç»Ÿè®¡<code>rune</code>ç¼–ç åçš„å­—èŠ‚æ•°</td></tr><tr><td><code>unicode/utf16</code></td><td>è½¬æ¢</td><td><code>func Encode(s []rune) []uint16</code></td><td>ç¼–ç <code>rune</code>æ•°ç»„ä¸º<code>uint16</code>æ•°ç»„</td></tr><tr><td></td><td></td><td><code>func Decode(s []uint16) []rune</code></td><td>è§£ç <code>uint16</code>æ•°ç»„ä¸º<code>rune</code>æ•°ç»„</td></tr></tbody></table><blockquote><p>ç¼–ç ï¼šå­—ç¬¦ä¸² -&gt; bytesï¼Œ rune -&gt; bytes</p><p>è§£ç ï¼šbytes -&gt; runeï¼Œ bytes -&gt; å­—ç¬¦ä¸²</p></blockquote><br><p><strong>ç¤ºä¾‹</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode/utf16&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode/utf8&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// unicodeåŒ… - åˆ¤æ–­</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;unicodeåŒ… - åˆ¤æ–­&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span>Scripts<span class="token punctuation">[</span><span class="token string">&quot;Han&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æ±‰å­—</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span>Scripts<span class="token punctuation">[</span><span class="token string">&quot;Han&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token char">&#39;ä¸­&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">IsSpace</span><span class="token punctuation">(</span><span class="token char">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// unicodeåŒ… - è½¬æ¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nunicodeåŒ… - è½¬æ¢&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> unicode<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token char">&#39;A&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> unicode<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token char">&#39;ä¸­&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// unicode/utf8 - bytesè½¬rune</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nunicode/utf8 -bytesè½¬rune&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeRune</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// è§£ç ç¬¬ä¸€ä¸ªï¼Œ20320 3</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> <span class="token number">20320</span><span class="token punctuation">)</span>                      <span class="token comment">// ä½ </span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeLastRune</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è§£ç æœ€åä¸€ä¸ªï¼Œ22909 3</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> <span class="token number">22909</span><span class="token punctuation">)</span>                      <span class="token comment">// å¥½</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeRuneInString</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeLastRuneInString</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// unicode/utf8 - runeè½¬bytes</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nunicode/utf8 - runeè½¬bytes&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">EncodeRune</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token char">&#39;ä¸–&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">)</span> <span class="token comment">// []byte{0xe4, 0xb8, 0x96}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// unicode/utf8 - æ£€æµ‹</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\nunicode/utf8 - æ£€æµ‹&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	buf2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">}</span>           <span class="token comment">// ä¸–</span></span>
<span class="line">	buf3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">}</span> <span class="token comment">// åœ¨buf2çš„åŸºç¡€ä¸Šå†åŠ ä¸Šä¸¤ä¸ªå­—èŠ‚, ä¸–\xe4\xb8</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// true</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// true</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> buf3<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// unicode/utf16 - runeä¸uint16è½¬æ¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> utf16<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// []uint16{0x4f60, 0x597d}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> utf16<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint16</span><span class="token punctuation">{</span><span class="token number">0x4f60</span><span class="token punctuation">,</span> <span class="token number">0x597d</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [&#39;ä½ &#39; &#39;å¥½&#39;]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>utf8ç¼–ç ä¸‹ï¼Œè‹±æ–‡å 1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—å 3ä¸ªå­—èŠ‚ï¼›</p><p>utf16ç¼–ç ä¸‹ï¼Œè‹±æ–‡å 1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—å 1ä¸ªå­—èŠ‚</p></blockquote></details><br><h3 id="å¸ƒå°”å€¼" tabindex="-1"><a class="header-anchor" href="#å¸ƒå°”å€¼"><span>å¸ƒå°”å€¼</span></a></h3><p>å¸ƒå°”å€¼çš„é›¶å€¼æ˜¯<code>false</code>ï¼Œå¸ƒå°”å€¼æ— æ³•éšå¼è½¬æ¢ä¸ºæ•°å€¼(1æˆ–0)</p><br><h3 id="æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„"><span>æ•°ç»„</span></a></h3><p>æ•°ç»„çš„ç‰¹ç‚¹</p><ul><li>æ•°ç»„ä¸€æ—¦å®šä¹‰ï¼Œå…ƒç´ ä¸ªæ•°ä¸å¯æ”¹å˜ï¼Œå³ä¸èƒ½å¢åŠ æˆ–åˆ é™¤å…ƒç´ ï¼›å¯ä»¥æ”¹å…ƒç´ çš„å€¼</li><li>å…ƒç´ æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´</li><li>ç›¸åŒæ•°æ®ç±»å‹ã€é•¿åº¦å›ºå®šçš„åºåˆ—æ‰æ˜¯ä¸€æ ·çš„ï¼Œå³<code>[2]int</code>å’Œ<code>[3]int</code>æ˜¯ä¸åŒ</li><li>æ•°ç»„çš„é›¶å€¼æ˜¯å…ƒç´ æ•°æ®ç±»å‹çš„é›¶å€¼</li><li>æ²¡æœ‰&quot;ç©ºæ•°ç»„&quot;çš„è¯´æ³•</li><li>æ•°ç»„æ˜¯å€¼ç±»å‹</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å£°æ˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> a1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>                   <span class="token comment">// å£°æ˜æ•°ç»„ï¼›3ä»£è¡¨æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼ˆå¿…é¡»æŒ‡å®šï¼‰ï¼›æœªèµ‹å€¼åˆ™é»˜è®¤ä½¿ç”¨é›¶å€¼ï¼Œè¿™é‡Œæ˜¯0</span></span>
<span class="line">	<span class="token keyword">var</span> a2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span> <span class="token comment">// å£°æ˜å¹¶èµ‹å€¼</span></span>
<span class="line">	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>           <span class="token comment">// çŸ­å˜é‡å£°æ˜</span></span>
<span class="line">	a4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span>      <span class="token comment">// ä½¿ç”¨...åæ•°ç»„é•¿åº¦ä¼šè‡ªåŠ¨åˆ¤æ–­ï¼›...åªèƒ½ç”¨åœ¨å€¼çš„ä½ç½®ä¸Šä¸å¯ä»¥ç”¨åœ¨ç±»å‹çš„ä½ç½®ä¸Š</span></span>
<span class="line">	a5 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>           <span class="token comment">// ç´¢å¼•1çš„ä½ç½®æ•°æ®æ˜¯-1ï¼Œå…¶ä»–ä½ç½®æ˜¯é›¶å€¼</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a1<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a2<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a3<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a4<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a5<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span><span class="token punctuation">}</span>   </span>
<span class="line"><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">7</span>, <span class="token number">8</span>, <span class="token number">9</span><span class="token punctuation">}</span>   </span>
<span class="line"><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">10</span>, <span class="token number">11</span>, <span class="token number">12</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span>, -1<span class="token punctuation">}</span>   </span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åŸºæœ¬æ“ä½œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// éå†</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æˆªå–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// ç´¢å¼•0-2ï¼Œæ³¨æ„ä¸æ”¯æŒ[:-2]è¿™ç§è´Ÿæ•°è¡¨ç¤ºæ–¹æ³•</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">10</span></span>
<span class="line"><span class="token number">11</span>        </span>
<span class="line"><span class="token number">12</span>        </span>
<span class="line"><span class="token number">13</span>        </span>
<span class="line"><span class="token number">14</span>        </span>
<span class="line"><span class="token number">15</span>        </span>
<span class="line"><span class="token number">10</span>        </span>
<span class="line"><span class="token number">11</span>        </span>
<span class="line"><span class="token number">12</span>        </span>
<span class="line"><span class="token number">13</span>        </span>
<span class="line"><span class="token number">14</span>        </span>
<span class="line"><span class="token number">15</span>        </span>
<span class="line"><span class="token punctuation">[</span><span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å¤šç»´æ•°ç»„</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// äºŒç»´æ•°ç»„</span></span>
<span class="line">	a2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span> <span class="token comment">// [[0 0 0] [0 0 0]]</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¸‰ç»´æ•°ç»„</span></span>
<span class="line">	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a3<span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">/*</span>
<span class="line">	   [                            ç¬¬ä¸€ä¸ªæ•°ç»„ä¸ºé•¿åº¦ä¸º1çš„æ•°ç»„</span>
<span class="line">	      [                         ç¬¬ä¸€ä¸ªæ•°ç»„çš„ç¬¬1ä¸ªå…ƒç´ ä¸ºå¦ä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„</span>
<span class="line">	         [0 0 0] [0 0 0]        æ¯ä¸ªæ•°ç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º3çš„æ•°ç»„</span>
<span class="line">	      ]</span>
<span class="line">	   ]</span>
<span class="line"></span>
<span class="line">	*/</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="åˆ‡ç‰‡" tabindex="-1"><a class="header-anchor" href="#åˆ‡ç‰‡"><span>åˆ‡ç‰‡</span></a></h3><p>åˆ‡ç‰‡æ˜¯é•¿åº¦å¯å˜çš„æ•°ç»„ï¼Œåˆ‡ç‰‡çš„ç‰¹ç‚¹</p><ul><li><p>å¯ä»¥åŠ¨æ€æ·»åŠ åˆ é™¤å…ƒç´ </p></li><li><p>æ‰€æœ‰å…ƒç´ æ•°æ®ç±»å‹ä¹Ÿå¿…é¡»æ˜¯ä¸€æ ·</p></li><li><p>åˆ‡ç‰‡çš„é›¶å€¼æ˜¯<code>nil</code></p></li><li><p>åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹</p></li></ul><p>åˆ‡ç‰‡ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</p><ul><li>æŒ‡é’ˆï¼šå­˜æ”¾åº•å±‚æ•°ç»„çš„å†…å­˜åœ°å€</li><li>é•¿åº¦ï¼šæŒ‡çš„æ˜¯åˆ‡ç‰‡çš„å…ƒç´ ä¸ªæ•°ï¼Œä½¿ç”¨<code>len(åˆ‡ç‰‡)</code>è¾“å‡ºé•¿åº¦</li><li>å®¹é‡ï¼šåº•å±‚æ•°ç»„çš„é•¿åº¦ï¼Œä½¿ç”¨<code>cap(åˆ‡ç‰‡)</code>è¾“å‡ºå®¹é‡å¤§å°</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å£°æ˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜æ–¹å¼1ï¼šä¸æ•°ç»„ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ä¸éœ€è¦æŒ‡å®šå…ƒç´ ä¸ªæ•°</span></span>
<span class="line">	<span class="token keyword">var</span> s1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>  <span class="token comment">// åªå£°æ˜ï¼Œé»˜è®¤ä¸ºé›¶å€¼ï¼Œå³nil</span></span>
<span class="line">	s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç©ºåˆ‡ç‰‡</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å£°æ˜æ–¹å¼2ï¼šä½¿ç”¨make</span></span>
<span class="line">	s3 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//å£°æ˜ä¸€ä¸ªintç±»å‹çš„åˆ‡ç‰‡,é•¿åº¦ä¸º1ï¼Œå®¹é‡ä¸º2ï¼›å¦‚æœå®¹é‡ä¸æŒ‡å®šï¼Œé‚£ä¹ˆå®¹é‡ç­‰åŒäºé•¿åº¦</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> s3<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŸ¥çœ‹é•¿åº¦å’Œå®¹é‡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">(</span>nil<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token punctuation">}</span> </span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span>   </span>
<span class="line"><span class="token number">0</span> <span class="token number">0</span> <span class="token number">2</span>   </span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åŸºæœ¬æ“ä½œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bytes&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">EqualStringSlice</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	length <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> length <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå§‹æ•°æ®ï¼š%#v\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ·»åŠ å…ƒç´ </span></span>
<span class="line">	s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token char">&#39;8&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;ä¸­&#39;</span><span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªï¼Œ &#39;8&#39;å’Œ&#39;ä¸­&#39;è™½ç„¶ä¸ºruneï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯intç±»å‹</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ·»åŠ å…ƒç´ ï¼š%#v\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>    <span class="token comment">// []int{1, 2, 3, 4, 5, 6, 7, 56, 20013}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ é™¤å…ƒç´ </span></span>
<span class="line">	s1 <span class="token operator">=</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">]</span>                 <span class="token comment">// åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤å…ƒç´ (ç¬¬ä¸€ä¸ª)ï¼š%#v\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>  <span class="token comment">//</span></span>
<span class="line">	s1 <span class="token operator">=</span> s1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤å…ƒç´ (æœ€åä¸€ä¸ª)ï¼š%#v\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span> <span class="token comment">//</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ‡ç‰‡æµ…æ‹·è´</span></span>
<span class="line">	s2 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment">// æµ…æ‹·è´</span></span>
<span class="line">	s3 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// æµ…æ‹·è´</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨[:]æµ…æ‹·è´ï¼š%p &lt;---&gt; %p\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨[:]æµ…æ‹·è´ï¼š%p &lt;---&gt; %p\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s3<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ‡ç‰‡æ·±æ‹·è´</span></span>
<span class="line">	s4 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">copy</span><span class="token punctuation">(</span>s4<span class="token punctuation">,</span> s1<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨copyæ·±æ‹·è´ï¼š%p &lt;---&gt; %p\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s4<span class="token punctuation">)</span> <span class="token comment">// æ·±æ‹·è´æ–¹å¼1</span></span>
<span class="line">	s5 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s1 <span class="token punctuation">{</span></span>
<span class="line">		s5 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s5<span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;éå†æ–¹å¼ï¼š%p &lt;---&gt; %p\n&quot;</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s5<span class="token punctuation">)</span> <span class="token comment">// æ·±æ‹·è´æ–¹å¼2</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£åŒ…ï¼šåˆ‡ç‰‡...</span></span>
<span class="line">	s6 <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s1<span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è§£åŒ…ç”¨æ³•ç¤ºä¾‹ï¼š%#v\n&quot;</span><span class="token punctuation">,</span> s6<span class="token punctuation">)</span> <span class="token comment">//</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ‡ç‰‡æ¯”è¾ƒ - byteåˆ‡ç‰‡ä½¿ç”¨æä¾›çš„å‡½æ•°æ¯”è¾ƒ</span></span>
<span class="line">	a1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">253</span><span class="token punctuation">}</span></span>
<span class="line">	a2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">253</span><span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[]byteåˆ‡ç‰‡æ¯”è¾ƒ: %t\n&quot;</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ‡ç‰‡æ¯”è¾ƒ - ébyteç±»å‹</span></span>
<span class="line">	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span></span>
<span class="line">	a4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;[]stringåˆ‡ç‰‡æ¯”è¾ƒ: %t\n&quot;</span><span class="token punctuation">,</span> <span class="token function">EqualStringSlice</span><span class="token punctuation">(</span>a3<span class="token punctuation">,</span> a4<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">åŸå§‹æ•°æ®ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span></span>
<span class="line">æ·»åŠ å…ƒç´ ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">20013</span><span class="token punctuation">}</span>        </span>
<span class="line">åˆ é™¤å…ƒç´ <span class="token punctuation">(</span>ç¬¬ä¸€ä¸ª<span class="token punctuation">)</span>ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">20013</span><span class="token punctuation">}</span>   </span>
<span class="line">åˆ é™¤å…ƒç´ <span class="token punctuation">(</span>æœ€åä¸€ä¸ª<span class="token punctuation">)</span>ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span><span class="token punctuation">}</span>        </span>
<span class="line">ä½¿ç”¨<span class="token punctuation">[</span>:<span class="token punctuation">]</span>æµ…æ‹·è´ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">&gt;</span> 0xc00012e0f8         </span>
<span class="line">ä½¿ç”¨<span class="token punctuation">[</span>:<span class="token punctuation">]</span>æµ…æ‹·è´ï¼š0xc00012e100 <span class="token operator">&lt;</span>---<span class="token operator">&gt;</span> 0xc00012e100         </span>
<span class="line">ä½¿ç”¨copyæ·±æ‹·è´ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">&gt;</span> 0xc00012e190        </span>
<span class="line">éå†æ–¹å¼ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">&gt;</span> 0xc000156000              </span>
<span class="line">è§£åŒ…ç”¨æ³•ç¤ºä¾‹ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>byteåˆ‡ç‰‡æ¯”è¾ƒ: <span class="token boolean">true</span>                                   </span>
<span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>stringåˆ‡ç‰‡æ¯”è¾ƒ: <span class="token boolean">true</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å®¹é‡æ‰©å®¹æœºåˆ¶</summary><p>å½“<strong>é•¿åº¦==å®¹é‡</strong>æ—¶ï¼Œå†<code>append()</code>æ’å…¥å…ƒç´ ï¼Œgoä¼šé‡æ–°ç”³è¯·ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œå°†åŸæ•°æ®æ•°æ®æ‹·è´è¿‡å»ï¼Œä¿®æ”¹åˆ‡ç‰‡æŒ‡é’ˆï¼Œå†ç”¨æ¥å­˜æ”¾æˆ‘ä»¬æ’å…¥çš„æ•°æ®</p><p>ä¸¤ä¸ªå¹¶ä¸å‡†ç¡®çš„ç»“è®ºï¼š</p><ul><li>å½“åŸåˆ‡ç‰‡é•¿åº¦å°äº1024æ—¶ï¼Œæ–°åˆ‡ç‰‡çš„å®¹é‡ä¼šç›´æ¥ç¿»å€</li><li>å½“åŸåˆ‡ç‰‡çš„å®¹é‡å¤§äºç­‰äº1024æ—¶ï¼Œä¼šåå¤åœ°å¢åŠ 25%ï¼Œç›´åˆ°æ–°å®¹é‡è¶…è¿‡æ‰€éœ€è¦çš„å®¹é‡</li></ul><p><strong>æµ‹è¯•1ï¼šå¯ä»¥çœ‹åˆ°æ˜¯ç¿»å€çš„</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å®šä¹‰åˆ‡ç‰‡</span></span>
<span class="line">	s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¾ªç¯æ·»åŠ å…ƒç´ </span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">18</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  0 | å½“å‰å®¹é‡:  0</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  1 | å½“å‰å®¹é‡:  1</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  2 | å½“å‰å®¹é‡:  2</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  3 | å½“å‰å®¹é‡:  4</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  4 | å½“å‰å®¹é‡:  4</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  5 | å½“å‰å®¹é‡:  8</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  6 | å½“å‰å®¹é‡:  8</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  7 | å½“å‰å®¹é‡:  8</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  8 | å½“å‰å®¹é‡:  8</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦:  9 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 10 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 11 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 12 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 13 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 14 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 15 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 16 | å½“å‰å®¹é‡: 16</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 17 | å½“å‰å®¹é‡: 32</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 18 | å½“å‰å®¹é‡: 32</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 19 | å½“å‰å®¹é‡: 32</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><strong>æµ‹è¯•2ï¼šå¯ä»¥çœ‹åˆ°å¹¶ä¸æ˜¯25%</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å®šä¹‰åˆ‡ç‰‡</span></span>
<span class="line">	s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¾ªç¯æ·»åŠ å…ƒç´ </span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2000 | å½“å‰å®¹é‡: 2000</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2001 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2002 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2003 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2004 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2005 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2006 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2007 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2008 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2009 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2010 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line">	<span class="token comment">//å½“å‰é•¿åº¦: 2011 | å½“å‰å®¹é‡: 2720</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ä¸åŒç‰ˆæœ¬çš„<code>go</code>æ‰©å®¹æœºåˆ¶ä¹Ÿå¹¶ä¸ä¸€æ ·ï¼Œå…·ä½“è¿˜éœ€è¦å»çœ‹æºä»£ç <code>src/runtime/slice.go</code>ä¸­çš„<code>growslice</code>å‡½æ•°</p></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å®¹é‡æ‰©å®¹é¢è¯•é¢˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">}</span></span>
<span class="line">	s2 <span class="token operator">:=</span> s1</span>
<span class="line"></span>
<span class="line">	s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">	s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">11</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¾“å‡ºç»“æœå’Œè§£é‡Š</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">11</span></span>
<span class="line"><span class="token number">10</span></span>
<span class="line"></span>
<span class="line">ç¬¬ä¸€ä¸ªä¸º11</span>
<span class="line">ç¬¬äºŒä¸ªä¸º10ï¼Œæ˜¯å› ä¸ºs1æ·»åŠ å…ƒç´ åä¼šæœ‰å®¹é‡æ‰©å®¹æ“ä½œï¼Œå°†s1çš„æ•°æ®èµ‹å€¼ç»™æ–°çš„å†…å­˜ç©ºé—´ï¼Œs1æŒ‡å‘æ–°çš„åœ°å€ï¼Œ</span>
<span class="line">s1çš„ä¿®æ”¹è‡ªç„¶å½±å“ä¸åˆ°s2ï¼Œs2çš„æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå°±æ˜¯10</span>
<span class="line"></span></code></pre></div></details></details><br><h3 id="æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#æ˜ å°„"><span>æ˜ å°„</span></a></h3><p>æ˜ å°„æ˜¯å­˜å‚¨ä¸€ç³»åˆ—æ— åºçš„key/valueé”®å€¼å¯¹</p><p>keyåªèƒ½ä¸ºå¯ä½¿ç”¨==è¿ç®—çš„å€¼ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”ã€æ•°ç»„ï¼‰ï¼Œvalueå¯ä»¥ä¸ºä»»æ„ç±»å‹</p><p>é›¶å€¼ä¸ºnil</p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å£°æ˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç›´æ¥å£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> names1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>     <span class="token comment">//ä½¿ç”¨varå£°æ˜ä½†æ˜¯ä¸åˆå§‹åŒ–(æ²¡æœ‰åˆ†é…å†…å­˜ç©ºé—´)åé¢èµ‹å€¼ä¼šæŠ¥é”™ï¼›ä¸å¸¦å¤§æ‹¬å·çš„æ˜¯ç±»å‹</span></span>
<span class="line">	<span class="token keyword">var</span> names2 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–ï¼›å¸¦å¤§æ‹¬å·çš„æ˜¯å€¼</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨makeå£°æ˜</span></span>
<span class="line">	<span class="token keyword">var</span> names3 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>      <span class="token comment">// ä½¿ç”¨makeå£°æ˜å¹¶åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> names4 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// ä½¿ç”¨makeå£°æ˜å¹¶åˆå§‹åŒ–ï¼Œå¹¶æŒ‡å®šå®¹é‡ï¼ˆæ³¨æ„ï¼šmapçš„å®¹é‡ä¸å¯ä»¥ä½¿ç”¨capå‡½æ•°è·å–ï¼Œä¼šæŠ¥é”™ï¼‰</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å°è¯•èµ‹å€¼</span></span>
<span class="line">	<span class="token comment">//names1[&quot;a&quot;] = &quot;b&quot; // è¿™ä¸ªä¼šæŠ¥é”™ï¼Œpanic: assignment to entry in nil map</span></span>
<span class="line">	names2<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span></span>
<span class="line">	names3<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span></span>
<span class="line">	names4<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;b&quot;</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n&quot;</span><span class="token punctuation">,</span> names1<span class="token punctuation">,</span> names1<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names1<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n&quot;</span><span class="token punctuation">,</span> names2<span class="token punctuation">,</span> names2<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names2<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n&quot;</span><span class="token punctuation">,</span> names3<span class="token punctuation">,</span> names3<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names3<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n&quot;</span><span class="token punctuation">,</span> names4<span class="token punctuation">,</span> names4<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names4<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string(nil) | å…ƒç´ ä¸ªæ•°: 0</span></span>
<span class="line">	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{&quot;a&quot;:&quot;b&quot;} | å…ƒç´ ä¸ªæ•°: 1</span></span>
<span class="line">	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{&quot;a&quot;:&quot;b&quot;} | å…ƒç´ ä¸ªæ•°: 1</span></span>
<span class="line">	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{&quot;a&quot;:&quot;b&quot;} | å…ƒç´ ä¸ªæ•°: 1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åŸºæœ¬æ“ä½œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜æ•°ç»„</span></span>
<span class="line">	names <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ·»åŠ å…ƒç´ ï¼Œè‹¥å·²å­˜åœ¨ä¼šè¦†ç›–</span></span>
<span class="line">	names<span class="token punctuation">[</span><span class="token string">&quot;Top1&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Go&quot;</span></span>
<span class="line">	names<span class="token punctuation">[</span><span class="token string">&quot;Top2&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Python&quot;</span></span>
<span class="line">	names<span class="token punctuation">[</span><span class="token string">&quot;Top3&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;JavaScript&quot;</span></span>
<span class="line">	names<span class="token punctuation">[</span><span class="token string">&quot;Top4&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ é™¤å…ƒç´ , deleteå‡½æ•°åªç”¨äºmapï¼Œå‡½æ•°æ— è¿”å›å€¼</span></span>
<span class="line">	<span class="token function">delete</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">&quot;Top3&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// éå†mapï¼Œéå†å‡ºæ¥æ˜¯æ— åºçš„</span></span>
<span class="line">	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> names <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;names[%s]=%s\n&quot;</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">//names[Top2]=Python</span></span>
<span class="line">	<span class="token comment">//names[Top4]=</span></span>
<span class="line">	<span class="token comment">//names[Top1]=Go</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨,è‹¥ä¸å­˜åœ¨é»˜è®¤ä¼šè¿”å›å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹çš„é›¶å€¼,æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦é€šè¿‡è¿”å›çš„å¸ƒå°”å€¼æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span>
<span class="line">	key <span class="token operator">:=</span> <span class="token string">&quot;Top4&quot;</span></span>
<span class="line">	<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> names<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Key %s exists and value is %q\n&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Key %s does not exist\n&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// Key Top4 exists and value is &quot;&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰valueå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token punctuation">}</span></span>
<span class="line">	m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token operator">*</span> op <span class="token punctuation">}</span></span>
<span class="line">	m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token operator">*</span> op <span class="token operator">*</span> op <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token comment">// map[1:0x47b920 2:0x47b940 3:0x47b960]</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 4 8</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å®ç°setç±»å‹</summary><p>goè¯­è¨€ä¸­æ²¡æœ‰<code>set</code>ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨mapæ¥è‡ªå®šä¹‰<code>set</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–set</span></span>
<span class="line">	intSet <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ·»åŠ å…ƒç´ </span></span>
<span class="line">	intSet<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">	intSet<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ é™¤å…ƒç´ </span></span>
<span class="line">	<span class="token function">delete</span><span class="token punctuation">(</span>intSet<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">1</span></span>
<span class="line">	<span class="token keyword">if</span> intSet<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d is in set&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d is not in set&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// 1 is in set</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>æ›´å¥½çš„å®ç°setçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»“æ„ä½“ï¼Œå‚è€ƒã€Šç©ºç»“æ„ä½“ã€‹ç« èŠ‚</p></blockquote></details><br><h3 id="ç±»å‹è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#ç±»å‹è½¬æ¢"><span>ç±»å‹è½¬æ¢</span></a></h3><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Int2Float</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Intè½¬Float:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token number">99</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> <span class="token function">float32</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Float2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nFloatè½¬Int:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å°æ•°éƒ¨åˆ†ä¼šè¢«æˆªæ–­</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token number">100.7</span></span>
<span class="line">	y <span class="token operator">:=</span> <span class="token operator">-</span><span class="token number">3.9</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 100</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -3</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ³¨æ„ï¼š</span></span>
<span class="line">	<span class="token comment">//fmt.Printf(&quot;%T\n&quot;, int64(3.0)) // ä¸ä¼šæŠ¥é”™</span></span>
<span class="line">	<span class="token comment">//fmt.Printf(&quot;%T\n&quot;, int64(3.1)) // ä¼šæŠ¥é”™,å°æ•°éƒ¨åˆ†ä¸ä¸º0ç›´æ¥è½¬å°±ä¼šæŠ¥é”™</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">CeilAndFloorAndRound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nå‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// å‘ä¸Šå–æ•´ï¼Œå‡½æ•°ç­¾åï¼šCeil(x float64) float64</span></span>
<span class="line">	x <span class="token operator">:=</span> <span class="token number">1.11</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %f\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Ceil</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Ceil</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 2.000000</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‘ä¸‹å–æ•´ï¼Œå‡½æ•°ç­¾åï¼šFloor(x float64) float64</span></span>
<span class="line">	y <span class="token operator">:=</span> <span class="token number">1.99</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %f\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 1.000000</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å››èˆäº”å…¥ï¼Œå‡½æ•°ç­¾åï¼š</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %f\n&quot;</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span><span class="token number">1.49</span><span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span><span class="token number">1.49</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 1.000000</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">AddQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nè¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Quote</span><span class="token punctuation">(</span><span class="token string">&quot;å­—ç¬¦ä¸²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">QuoteRune</span><span class="token punctuation">(</span><span class="token char">&#39;å­—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">String2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nå­—ç¬¦ä¸²è½¬æ•°å­—:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°ç­¾åï¼šAtoi(s string) (int, error)ï¼Œç­‰åŒäº ParseInt(s, 10, 0)</span></span>
<span class="line">	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°ç­¾åï¼šParseInt(s string, base int, bitSize int) (i int64, err error)</span></span>
<span class="line">	<span class="token comment">// æŒ‡å®šå­—ç¬¦ä¸²ä¸º10è¿›åˆ¶æ•°å­—ï¼Œè½¬æ¢åˆ°int8ç±»å‹ (0:intã€8:int8ã€16:int16ã€32:int32ã€64:int64)</span></span>
<span class="line">	<span class="token comment">// ç”¨æ³•ä¸€æ ·çš„è¿˜æœ‰ï¼šParseUint(s string, base int, bitSize int) (uint64, error)</span></span>
<span class="line">	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°ç­¾åï¼šParseFloat(s string, bitSize int) (float64, error)</span></span>
<span class="line">	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;1.20&quot;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">String2Bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nå­—ç¬¦ä¸²è½¬å¸ƒå°”:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// è½¬æ¢è§„åˆ™ä»£ç ï¼š</span></span>
<span class="line">	<span class="token comment">//switch str {</span></span>
<span class="line">	<span class="token comment">//case &quot;1&quot;, &quot;t&quot;, &quot;T&quot;, &quot;true&quot;, &quot;TRUE&quot;, &quot;True&quot;:</span></span>
<span class="line">	<span class="token comment">//	return true, nil</span></span>
<span class="line">	<span class="token comment">//case &quot;0&quot;, &quot;f&quot;, &quot;F&quot;, &quot;false&quot;, &quot;FALSE&quot;, &quot;False&quot;:</span></span>
<span class="line">	<span class="token comment">//	return false, nil</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line">	<span class="token comment">// å¦‚æœæ˜¯TRueï¼Œè¿™ç§å­—ç¬¦ä¸²å°±æ— æ³•è½¬æ¢äº†ï¼Œå¯ä»¥å…ˆä½¿ç”¨strings.ToLoweræˆ–strings.ToUpperè½¬æ¢åå†è½¬ä¸ºå¸ƒå°”å€¼</span></span>
<span class="line">	<span class="token keyword">if</span> b<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseBool</span><span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %v\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Int2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\næ•°å­—è½¬å­—ç¬¦ä¸²:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// int -&gt; å­—ç¬¦ä¸²</span></span>
<span class="line">	x <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %s\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°ç­¾åï¼šFormatInt(i int64, base int) stringï¼Œbaseä»£è¡¨æ˜¯å¤šå°‘è¿›åˆ¶çš„æ•°å­—</span></span>
<span class="line">	<span class="token comment">// å…ˆè½¬æˆ10è¿›åˆ¶æ•°å­—ï¼Œç„¶åè½¬ä¸ºæ•°å­—</span></span>
<span class="line">	<span class="token comment">// ç”¨æ³•ä¸€æ ·çš„å‡½æ•°è¿˜æœ‰strconv.FormatUint</span></span>
<span class="line">	y <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %s\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Bool2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nå¸ƒå°”è½¬å­—ç¬¦ä¸²:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°ç­¾åï¼šFormatBool(b bool) string</span></span>
<span class="line">	<span class="token comment">// è¿”å› &quot;true&quot; or &quot;false&quot;</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">FormatBool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Any2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nä»»æ„æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¿™é‡Œä»¥floatä¸¾ä¾‹</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// float -&gt; å­—ç¬¦ä¸²</span></span>
<span class="line">	y <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%.2f&quot;</span><span class="token punctuation">,</span> <span class="token number">3.1415926</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %s\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ----------------------- æ•°å­—ä¹‹é—´è½¬æ¢ ------------------</span></span>
<span class="line">	<span class="token comment">// æ•°å­—ä¹‹é—´è½¬æ¢</span></span>
<span class="line">	<span class="token function">Int2Float</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Float2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ•°å­—å‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥</span></span>
<span class="line">	<span class="token function">CeilAndFloorAndRound</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ----------------------- å­—ç¬¦ä¸²ä¹‹é—´è½¬æ¢ ------------------</span></span>
<span class="line">	<span class="token comment">// å­—èŠ‚/Rune/å­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢å‚è€ƒstrings/bytes/unicodeåŒ…</span></span>
<span class="line">	<span class="token function">AddQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ----------------------- å­—ç¬¦ä¸²è½¬åˆ°å…¶ä»–ç±»å‹ Parseç³»åˆ—å‡½æ•°------------------</span></span>
<span class="line">	<span class="token function">String2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">String2Bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ----------------------- å…¶ä»–ç±»å‹è½¬åˆ°å­—ç¬¦ä¸² Formatç³»åˆ—å‡½æ•°------------------</span></span>
<span class="line">	<span class="token function">Int2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Bool2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Any2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">Intè½¬Float:</span>
<span class="line">float32                    </span>
<span class="line">                           </span>
<span class="line">Floatè½¬Int:                </span>
<span class="line">int64 <span class="token number">100</span>                  </span>
<span class="line">int64 <span class="token parameter variable">-3</span>                   </span>
<span class="line">                           </span>
<span class="line">å‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥:</span>
<span class="line">float64 <span class="token number">2.000000</span>           </span>
<span class="line">float64 <span class="token number">1.000000</span>           </span>
<span class="line">float64 <span class="token number">1.000000</span>           </span>
<span class="line">                           </span>
<span class="line">è¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·:     </span>
<span class="line"><span class="token string">&quot;å­—ç¬¦ä¸²&quot;</span>                   </span>
<span class="line"><span class="token string">&#39;å­—&#39;</span>                       </span>
<span class="line">                           </span>
<span class="line">å­—ç¬¦ä¸²è½¬æ•°å­—:              </span>
<span class="line"><span class="token number">10</span>                         </span>
<span class="line"><span class="token number">11</span>                         </span>
<span class="line"><span class="token number">1.2</span>                        </span>
<span class="line">                           </span>
<span class="line">å­—ç¬¦ä¸²è½¬å¸ƒå°”:              </span>
<span class="line">bool <span class="token boolean">true</span>                  </span>
<span class="line">                           </span>
<span class="line">æ•°å­—è½¬å­—ç¬¦ä¸²:              </span>
<span class="line">string <span class="token number">100</span></span>
<span class="line">string <span class="token number">13</span></span>
<span class="line"></span>
<span class="line">å¸ƒå°”è½¬å­—ç¬¦ä¸²:</span>
<span class="line"><span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">ä»»æ„æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²:</span>
<span class="line">string <span class="token number">3.14</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç±»å‹æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ç±»å‹æ€»ç»“"><span>ç±»å‹æ€»ç»“</span></a></h3><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å…ƒç´ æ˜¯å¦æœ‰åº</th><th>å€¼ç±»å‹/å¼•ç”¨ç±»å‹</th><th>æŒ‡é’ˆç±»å‹åˆå§‹åŒ–å…³é”®å­—</th><th>é›¶å€¼</th></tr></thead><tbody><tr><td>æ•°å­—</td><td>âœ”</td><td>å€¼ç±»å‹</td><td><code>new</code></td><td><code>0</code></td></tr><tr><td>å­—ç¬¦ä¸²</td><td>âœ”</td><td>å€¼ç±»å‹</td><td><code>new</code></td><td>ç©ºå­—ç¬¦ä¸²</td></tr><tr><td>å¸ƒå°”å€¼</td><td>âœ”</td><td>å€¼ç±»å‹</td><td><code>new</code></td><td><code>false</code></td></tr><tr><td>æ•°ç»„</td><td>âœ”</td><td>å€¼ç±»å‹</td><td><code>new</code></td><td>å…ƒç´ æ•°æ®ç±»å‹çš„é›¶å€¼</td></tr><tr><td>åˆ‡ç‰‡</td><td>âœ”</td><td>å¼•ç”¨ç±»å‹</td><td><code>make</code></td><td><code>nil</code></td></tr><tr><td>æ˜ å°„</td><td>âŒ</td><td>å¼•ç”¨ç±»å‹</td><td><code>make</code></td><td><code>nil</code></td></tr></tbody></table><h2 id="-2" tabindex="-1"><a class="header-anchor" href="#-2"><span></span></a></h2><h2 id="å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°"><span>å‡½æ•°</span></a></h2><h3 id="åŸºç¡€ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ç¤ºä¾‹"><span>åŸºç¡€ç¤ºä¾‹</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªå‡½æ•°</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å‚æ•°xå’Œyéƒ½æ˜¯intç±»å‹ï¼Œå‡½æ•°è¿”å›å€¼ä¹Ÿæ˜¯intç±»å‹</span></span>
<span class="line"><span class="token comment">// å…³äºè¿”å›å€¼ï¼šå‡½æ•°å¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å¯çœç•¥å‚æ•°</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// options ...æ•°æ®ç±»å‹ï¼Œè¿™æ ·å®šä¹‰çš„å‚æ•°å¯ä»¥ä¸ä¼ å€¼</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Login</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">,</span> options <span class="token operator">...</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> options<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Login</span><span class="token punctuation">(</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3306&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Login</span><span class="token punctuation">(</span><span class="token string">&quot;0.0.0.0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3306&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;ssl&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//0.0.0.0 3306 root 123456 []</span></span>
<span class="line"><span class="token comment">//0.0.0.0 3306 root 123456 [map[ssl:true]]</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰å®å‚ä¸ºnil</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰å‡½æ•°</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">MyFunc</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> s</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å‡½æ•°è¦æ±‚ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œè€Œä»–çš„é›¶å€¼ä¸ºnilï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¼ å…¥nilï¼Œåœ¨å‡½æ•°å†…éƒ¨ç›¸å½“äºæ˜¯: s := make([]string, 0)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [hello world!]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æ¥å—ä»»æ„ç±»å‹å‚æ•°</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä½¿ç”¨å¯çœç•¥å‚æ•° + interfaceï¼Œå¯æ¥å—ä»»ä½•ç±»å‹çš„å‚æ•°ï¼ˆåŒ…æ‹¬ä¸ä¼ ï¼‰ï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨æ–­è¨€å†å»åˆ¤æ–­å‚æ•°ç±»å‹</span></span>
<span class="line"><span class="token comment">// å¹¶ä¸æ¨èè¿™æ ·å†™å‡½æ•°ï¼Œä»…ä½œå­¦ä¹ ä½¿ç”¨</span></span>
<span class="line"><span class="token comment">// å…¶ä¸­interface{}å¯ä»¥ä½¿ç”¨anyä»£æ›¿ï¼Œæ¨èä½¿ç”¨any</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span>i <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> m<span class="token punctuation">,</span> ok <span class="token operator">:=</span> i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;anomoy&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span></span>
<span class="line">		<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;bob&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰æ¡ˆä¾‹ï¼šä½¿ç”¨é—­åŒ…å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int64</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int64</span> <span class="token punctuation">{</span></span>
<span class="line">		a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b</span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">	fib <span class="token operator">:=</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å†…ç½®å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å†…ç½®å‡½æ•°"><span>å†…ç½®å‡½æ•°</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰copy</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ä½æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå…¨éƒ¨è¦†ç›–</span></span>
<span class="line">	<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">copy</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [3, 2, 1]</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// dstä½æ•°å°‘çš„æƒ…å†µä¸‹ï¼Œåªè¦†ç›–éƒ¨åˆ†</span></span>
<span class="line">	<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">copy</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span> <span class="token comment">// [3, 2]</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// dstä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œcopyä¹‹åè¿˜æ˜¯ç©º</span></span>
<span class="line">	<span class="token keyword">var</span> s2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">copy</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token comment">// []</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// srcä½æ•°å°‘çš„æƒ…å†µä¸‹ï¼Œåªè¦†ç›–éƒ¨åˆ†</span></span>
<span class="line">	<span class="token keyword">var</span> s3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">copy</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span> <span class="token comment">// [3 2 4]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å»¶è¿Ÿè°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#å»¶è¿Ÿè°ƒç”¨"><span>å»¶è¿Ÿè°ƒç”¨</span></a></h3><p><strong>è¯´æ˜</strong></p><p>deferæ˜¯å»¶è¿Ÿè°ƒç”¨ï¼Œåé¢è·Ÿä¸€ä¸ªå‡½æ•°è°ƒç”¨</p><p>æ¯”å¦‚æœ‰<code>A</code>ã€<code>B</code>ä¸¤ä¸ªå‡½æ•°ï¼Œåœ¨<code>A</code>å‡½æ•°ä¸­<code>defer B()</code>ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€åœ¨<code>A</code>å‡½æ•°<code>return</code>æˆ–<code>panic</code>ä¹‹åè°ƒç”¨<code>B</code>å‡½æ•°</p><br><p><strong>åº”ç”¨åœºæ™¯</strong></p><ul><li><p>é‡Šæ”¾èµ„æºï¼Œæ¯”å¦‚æ–‡ä»¶å¥æŸ„ã€é”ç­‰</p></li><li><p>å¼‚å¸¸å¤„ç†</p></li><li><p>ä¿®æ”¹å‡½æ•°è¿”å›å€¼</p></li></ul><br><p><strong>è¯¦ç»†è§£è¯»</strong></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰deferåé¢çš„è¡¨è¾¾å¼ä¸èƒ½åŠ åœ†æ‹¬å·</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// deferåé¢çš„å‡½æ•°è°ƒç”¨ï¼Œä¸èƒ½åŠ æ‹¬å·ï¼Œä¼šæŠ¥è¯­æ³•é”™è¯¯</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰è‹¥æ‰§è¡Œå¤šæ¬¡deferè¯­å¥ï¼Œåˆ™æ»¡è¶³LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰ï¼Œå³å…ˆdeferçš„åæ‰§è¡Œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•1&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d %p \n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næµ‹è¯•2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d %p \n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næµ‹è¯•3&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d %p \n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">æµ‹è¯•1</span>
<span class="line"><span class="token number">5</span> 0xc0000180b8 </span>
<span class="line"><span class="token number">4</span> 0xc0000180b8 </span>
<span class="line"><span class="token number">3</span> 0xc0000180b8 </span>
<span class="line"><span class="token number">2</span> 0xc0000180b8 </span>
<span class="line"><span class="token number">1</span> 0xc0000180b8 </span>
<span class="line"><span class="token number">0</span> 0xc0000180b8 </span>
<span class="line">               </span>
<span class="line">æµ‹è¯•2          </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line"><span class="token number">6</span> 0xc0000180f0 </span>
<span class="line">               </span>
<span class="line">æµ‹è¯•3          </span>
<span class="line"><span class="token number">5</span> 0xc0000180f8 </span>
<span class="line"><span class="token number">4</span> 0xc000018110 </span>
<span class="line"><span class="token number">3</span> 0xc000018118 </span>
<span class="line"><span class="token number">2</span> 0xc000018120 </span>
<span class="line"><span class="token number">1</span> 0xc000018128 </span>
<span class="line"><span class="token number">0</span> 0xc000018130 </span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰deferå’Œreturnæ‰§è¡Œé¡ºåºçš„é—®é¢˜</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åœ¨deferä¸­ä¿®æ”¹è¿”å›å€¼æˆåŠŸï¼Œå‰ææ˜¯å¿…é¡»æå‰å£°æ˜è¿”å›å€¼</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		result <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åœ¨deferä¸­ä¿®æ”¹è¿”å›å€¼å¤±è´¥ï¼Œå¹¶æœªæå‰å£°æ˜è¿”å›å€¼</span></span>
<span class="line"><span class="token comment">// åŸå› æ˜¯ï¼š</span></span>
<span class="line"><span class="token comment">// 		returnå¹¶éåŸå­æ“ä½œï¼Œå…±åˆ†ä¸ºä¸¤æ­¥ï¼Œèµ‹å€¼å’Œå‡½æ•°è¿”å›</span></span>
<span class="line"><span class="token comment">//		èµ‹å€¼ï¼šå°†ç»“æœå†™å…¥åˆ°è¿”å›å€¼ä¸­ï¼Œå¦‚æœæœªæå‰å£°æ˜ï¼Œå°±å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­</span></span>
<span class="line"><span class="token comment">//		å‡½æ•°è¿”å›ï¼šå‡½æ•°å¸¦ç€å½“å‰è¿”å›å€¼é€€å‡º</span></span>
<span class="line"><span class="token comment">// æ‰§è¡Œé¡ºåºï¼šreturnèµ‹å€¼ --&gt; defer --&gt; returnå‡½æ•°è¿”å›</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add2</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	result <span class="token operator">:=</span> x <span class="token operator">+</span> y <span class="token comment">// resultå¿…é¡»å®šä¹‰åœ¨å‰é¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		result <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> result</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 13</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 9</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰deferå¯ä»¥æ•æ‰panic</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// recoverå‡½æ•°åªèƒ½ç”¨åœ¨deferä¸­</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;panic: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Close success!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WithPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NonPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">WithPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">NonPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// panic:  1</span></span>
<span class="line"><span class="token comment">// Close success!</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰derferå¹¶ä¸èƒ½ä¿è¯ä¸€å®šä¼šæ‰§è¡Œï¼šos.Exit</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;defer called&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¿è¡Œä¹‹åï¼Œå‘ç°ä»€ä¹ˆéƒ½æ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜deferæ²¡æœ‰æ­£å¸¸æ‰§è¡Œ</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ6ï¼‰derferå¹¶ä¸èƒ½ä¿è¯ä¸€å®šä¼šæ‰§è¡Œï¼šæ­»é”ç­‰ä¸¥é‡é”™è¯¯</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;defer called&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">//go func() {</span></span>
<span class="line">	<span class="token comment">//	ch &lt;- struct{}{}</span></span>
<span class="line">	<span class="token comment">//</span></span>
<span class="line">	<span class="token comment">//}()</span></span>
<span class="line"></span>
<span class="line">	<span class="token operator">&lt;-</span>ch</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¿è¡Œä¹‹åï¼Œç›´æ¥æŠ¥é”™ fatal error: all goroutines are asleep - deadlock!</span></span>
<span class="line"><span class="token comment">// å¹¶ä¸”deferæ²¡æœ‰æ­£å¸¸æ‰§è¡Œ</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ³›å‹å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ³›å‹å‡½æ•°"><span>æ³›å‹å‡½æ•°</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºç¡€ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Print ç¬¬ä¸€ä¸ªæ³›å‹å‡½æ•°</span></span>
<span class="line"><span class="token keyword">func</span> Print<span class="token punctuation">[</span>T any<span class="token punctuation">]</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ­£è§„çš„æ³›å‹å‡½æ•°è°ƒç”¨æ–¹æ³•,è¯­æ³•: function[å‚æ•°ç±»å‹](å‚æ•°)</span></span>
<span class="line">	Print<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	Print<span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨ç±»å‹æ¨å¯¼å¯ä»¥ä¸ç”¨æ˜¾å¼ä¼ é€’å‚æ•°ç±»å‹</span></span>
<span class="line">	<span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">{</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">1.3</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¿™æ ·ä¹Ÿå¯ä»¥,ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¸ä¼šè¿™æ ·ç”¨</span></span>
<span class="line">	<span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>any<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10.5</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token number">1</span></span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">3</span></span>
<span class="line">a</span>
<span class="line">b</span>
<span class="line">c</span>
<span class="line"><span class="token number">1.1</span></span>
<span class="line"><span class="token number">1.2</span></span>
<span class="line"><span class="token number">1.3</span></span>
<span class="line"><span class="token number">10</span></span>
<span class="line"><span class="token number">10.5</span></span>
<span class="line">abc</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰ç±»å‹çº¦æŸ</summary><p>ç¼–è¯‘å¤±è´¥çš„å†™æ³•</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Max è¿”å›æœ€å¤§å€¼</span></span>
<span class="line"><span class="token keyword">func</span> Max<span class="token punctuation">[</span>T any<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åŸå› æ˜¯aå’Œbéƒ½å±äºTç±»å‹ï¼Œè€ŒTç±»å‹å±äºanyç±»å‹ï¼Œä¸¤ä¸ªanyç±»å‹æ˜¯ä¸èƒ½æ¯”è¾ƒçš„</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token comment"># command-line-arguments</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:7:5: invalid operation: a <span class="token operator">&gt;</span> b <span class="token punctuation">(</span>type parameter T is not comparable with <span class="token operator">&gt;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>ä¿®æ­£åçš„å†™æ³•</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Comparable å®šä¹‰å¯æ¯”è¾ƒå¯¹è±¡</span></span>
<span class="line"><span class="token keyword">type</span> Comparable <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">int8</span> <span class="token operator">|</span> <span class="token builtin">int16</span> <span class="token operator">|</span> <span class="token builtin">int32</span> <span class="token operator">|</span> <span class="token builtin">int64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">uint</span> <span class="token operator">|</span> <span class="token builtin">uint8</span> <span class="token operator">|</span> <span class="token builtin">uint32</span> <span class="token operator">|</span> <span class="token builtin">uint64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">float32</span> <span class="token operator">|</span> <span class="token builtin">float64</span> <span class="token operator">|</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Max è¿”å›æœ€å¤§å€¼</span></span>
<span class="line"><span class="token keyword">func</span> Max<span class="token punctuation">[</span>T Comparable<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Max2 å¦‚æœæ”¯æŒçš„ç±»å‹æ¯”è¾ƒå°‘çš„è¯å¯ä»¥ç›´æ¥å†™åœ¨å‡½æ•°ç­¾åä¸­</span></span>
<span class="line"><span class="token keyword">func</span> Max2<span class="token punctuation">[</span>T <span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸–ç•Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max2</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸–ç•Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">0.1</span></span>
<span class="line">ä½ å¥½</span>
<span class="line">ä½ å¥½</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æ”¯æŒè¡ç”Ÿç±»å‹</summary><p>ç¼–è¯‘å¤±è´¥çš„å†™æ³•</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Comparable å®šä¹‰å¯æ¯”è¾ƒå¯¹è±¡</span></span>
<span class="line"><span class="token keyword">type</span> Comparable <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">int8</span> <span class="token operator">|</span> <span class="token builtin">int16</span> <span class="token operator">|</span> <span class="token builtin">int32</span> <span class="token operator">|</span> <span class="token builtin">int64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">uint</span> <span class="token operator">|</span> <span class="token builtin">uint8</span> <span class="token operator">|</span> <span class="token builtin">uint32</span> <span class="token operator">|</span> <span class="token builtin">uint64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">float32</span> <span class="token operator">|</span> <span class="token builtin">float64</span> <span class="token operator">|</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Max è¿”å›æœ€å¤§å€¼</span></span>
<span class="line"><span class="token keyword">func</span> Max<span class="token punctuation">[</span>T Comparable<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line"><span class="token keyword">type</span> MyInt <span class="token builtin">int</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token function">MyInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MyInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token comment"># command-line-arguments</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:25:17: MyInt does not implement Comparable <span class="token punctuation">(</span>possibly missing ~ <span class="token keyword">for</span> <span class="token for-or-select variable">int</span> <span class="token keyword">in</span> constraint Comparable<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>ä¿®æ­£åçš„å†™æ³•</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// åªç»™å‡ºå…³é”®ä»£ç ï¼Œintå‰é¢åŠ ä¸€ä¸ª~ï¼Œä»£è¡¨æ”¯æŒå…¶è¡ç”Ÿç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Comparable å®šä¹‰å¯æ¯”è¾ƒå¯¹è±¡</span></span>
<span class="line"><span class="token keyword">type</span> Comparable <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	~<span class="token builtin">int</span> <span class="token operator">|</span> <span class="token builtin">int8</span> <span class="token operator">|</span> <span class="token builtin">int16</span> <span class="token operator">|</span> <span class="token builtin">int32</span> <span class="token operator">|</span> <span class="token builtin">int64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">uint</span> <span class="token operator">|</span> <span class="token builtin">uint8</span> <span class="token operator">|</span> <span class="token builtin">uint32</span> <span class="token operator">|</span> <span class="token builtin">uint64</span> <span class="token operator">|</span></span>
<span class="line">		<span class="token builtin">float32</span> <span class="token operator">|</span> <span class="token builtin">float64</span> <span class="token operator">|</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">2</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰å†…ç½®çš„ç±»å‹</summary><p>å®‰è£…</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go get golang.org/x/exp/constraints</span>
<span class="line">go: downloading golang.org/x/exp v0.0.0-20230131160201-f062dba9d201</span>
<span class="line">go: added golang.org/x/exp v0.0.0-20230131160201-f062dba9d201</span>
<span class="line"></span></code></pre></div><p>ä½¿ç”¨</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;golang.org/x/exp/constraints&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Max è¿”å›æœ€å¤§å€¼</span></span>
<span class="line"><span class="token keyword">func</span> Max<span class="token punctuation">[</span>T constraints<span class="token punctuation">.</span>Ordered<span class="token punctuation">]</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸–ç•Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go                        </span>
<span class="line"><span class="token number">2</span></span>
<span class="line"><span class="token number">0.1</span></span>
<span class="line">ä½ å¥½</span>
<span class="line"></span></code></pre></div></details><br><h2 id="è‡ªå®šä¹‰" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰"><span>è‡ªå®šä¹‰</span></a></h2><h3 id="è‡ªå®šä¹‰åˆ«å" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰åˆ«å"><span>è‡ªå®šä¹‰åˆ«å</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰è‡ªå®šä¹‰åˆ«å</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å®šä¹‰åˆ«åï¼Œ ä½¿ç”¨=ï¼Œ ä¸èƒ½ç»™Counteræ·»åŠ æ–¹æ³•ï¼ŒCounteræœ¬è´¨ä¸Šå°±æ˜¯int</span></span>
<span class="line">	<span class="token keyword">type</span> Counter <span class="token operator">=</span> <span class="token builtin">int</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨åˆ«åï¼Œå¯ä»¥ç»§ç»­åƒä½¿ç”¨intä¸€æ ·ä½¿ç”¨ï¼Œæœ¬è´¨ä¸Šå®ƒå°±æ˜¯int</span></span>
<span class="line">	<span class="token keyword">var</span> a Counter <span class="token operator">=</span> <span class="token number">20</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 21</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å†…ç½®çš„åˆ«å</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// byte is an alias for uint8 and is equivalent to uint8 in all ways. It is</span></span>
<span class="line"><span class="token comment">// used, by convention, to distinguish byte values from 8-bit unsigned</span></span>
<span class="line"><span class="token comment">// integer values.</span></span>
<span class="line"><span class="token keyword">type</span> <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token builtin">uint8</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// rune is an alias for int32 and is equivalent to int32 in all ways. It is</span></span>
<span class="line"><span class="token comment">// used, by convention, to distinguish character values from integer values.</span></span>
<span class="line"><span class="token keyword">type</span> <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token builtin">int32</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// any is an alias for interface{} and is equivalent to interface{} in all ways.</span></span>
<span class="line"><span class="token keyword">type</span> any <span class="token operator">=</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="è‡ªå®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰ç±»å‹"><span>è‡ªå®šä¹‰ç±»å‹</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰è‡ªå®šä¹‰ç±»å‹ï¼šåŸºç¡€ä½¿ç”¨</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è‡ªå®šä¹‰ç±»å‹, è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç±»å‹</span></span>
<span class="line">	<span class="token comment">// Numberé™¤äº†å’Œintå’Œç›¸åŒçš„æ•°æ®ç»“æ„å¤–ï¼Œå…¶ä»–æ–¹é¢æ²¡æœ‰ä»»ä½•å…³ç³»</span></span>
<span class="line">	<span class="token keyword">type</span> Number <span class="token builtin">int</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// èµ‹å€¼</span></span>
<span class="line">	<span class="token keyword">var</span> a Number <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">	<span class="token keyword">var</span> b <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">200</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é”™è¯¯ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line">	<span class="token comment">//fmt.Println(add(1, a)) // è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºNumberå·²ç»æ˜¯å…¨æ–°çš„ç±»å‹äº†</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å’ŒåŸç±»å‹å¯ä»¥åšç±»å‹è½¬æ¢</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %#v\n&quot;</span><span class="token punctuation">,</span> <span class="token function">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// int 100</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %#v\n&quot;</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// main.Number 200</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ï¼šå®šä¹‰å¤æ‚çš„ç±»å‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;golang.org/x/crypto/bcrypt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line"><span class="token comment">//type intSlice []int</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå‡è®¾è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ç»“æ„ä½“</span></span>
<span class="line"><span class="token keyword">type</span> Form <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	UserName <span class="token builtin">string</span></span>
<span class="line">	Password <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewForm</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Form <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Form<span class="token punctuation">{</span></span>
<span class="line">		UserName<span class="token punctuation">:</span> username<span class="token punctuation">,</span></span>
<span class="line">		Password<span class="token punctuation">:</span> password<span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line"><span class="token keyword">type</span> LoginForm Form</span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç»™å®ƒå¢åŠ ä¸€äº›æ–¹æ³•</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>LoginForm<span class="token punctuation">)</span> <span class="token function">Encrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	hashed<span class="token punctuation">,</span> err <span class="token operator">:=</span> bcrypt<span class="token punctuation">.</span><span class="token function">GenerateFromPassword</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token punctuation">,</span> bcrypt<span class="token punctuation">.</span>DefaultCost<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> err</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>hashed<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>LoginForm<span class="token punctuation">)</span> <span class="token function">ValidatePasswordHashed</span><span class="token punctuation">(</span>hash <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	err <span class="token operator">:=</span> bcrypt<span class="token punctuation">.</span><span class="token function">CompareHashAndPassword</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>hash<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å®ä¾‹åŒ–ä¸€ä¸ªFormå¯¹è±¡</span></span>
<span class="line">	form <span class="token operator">:=</span> <span class="token function">NewForm</span><span class="token punctuation">(</span><span class="token string">&quot;jinhui&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qaz.123&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç±»å‹è½¬æ¢</span></span>
<span class="line">	loginForm <span class="token operator">:=</span> <span class="token function">LoginForm</span><span class="token punctuation">(</span><span class="token operator">*</span>form<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> loginForm<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åŠ è§£å¯†æ“ä½œ</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è·å–åŠ å¯†å­—ç¬¦ä¸²</span></span>
<span class="line">		hashed<span class="token punctuation">,</span> err <span class="token operator">:=</span> loginForm<span class="token punctuation">.</span><span class="token function">Encrypt</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;</span><span class="token punctuation">,</span> hashed<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// éªŒè¯åŠ å¯†å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;éªŒè¯åŠ å¯†ä¸²: &quot;</span><span class="token punctuation">,</span> loginForm<span class="token punctuation">.</span><span class="token function">ValidatePasswordHashed</span><span class="token punctuation">(</span>hashed<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å°†ç±»å‹è½¬æ¢å›å» LoginForm -&gt; Form</span></span>
<span class="line">	form2 <span class="token operator">:=</span> <span class="token function">Form</span><span class="token punctuation">(</span>loginForm<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> form2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">main.LoginForm<span class="token punctuation">{</span>UserName:<span class="token string">&quot;jinhui&quot;</span>, Password:<span class="token string">&quot;qaz.123&quot;</span><span class="token punctuation">}</span></span>
<span class="line">åŠ å¯†å­—ç¬¦ä¸²:  <span class="token variable">$2a</span><span class="token variable">$10</span><span class="token variable">$DnrKdw</span>.Gp.yQs9z.mKQOKOJc/jbHc0/sLUusR3YOYpylkT8Lt/uTy</span>
<span class="line">éªŒè¯åŠ å¯†ä¸²:  <span class="token boolean">true</span></span>
<span class="line">åŠ å¯†å­—ç¬¦ä¸²:  <span class="token variable">$2a</span><span class="token variable">$10</span><span class="token variable">$P6iEQKFy99kdCBefE</span>.MCKO171rd4zIfLmMNbvTediK.mRATx2EVgC</span>
<span class="line">éªŒè¯åŠ å¯†ä¸²:  <span class="token boolean">true</span></span>
<span class="line">åŠ å¯†å­—ç¬¦ä¸²:  <span class="token variable">$2a</span><span class="token variable">$10</span><span class="token variable">$kmV5jDMJfC4Bzy51IaVq9uCX9w</span>//pig9hABRPr.u9Ob5KsF6u7ouK</span>
<span class="line">éªŒè¯åŠ å¯†ä¸²:  <span class="token boolean">true</span></span>
<span class="line">main.Form<span class="token punctuation">{</span>UserName:<span class="token string">&quot;jinhui&quot;</span>, Password:<span class="token string">&quot;qaz.123&quot;</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰è‡ªå®šä¹‰ç±»å‹ï¼šä»¿http handlerå¯¹è±¡è½¬æ¢</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"> </span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line"><span class="token comment">// å¯ä»¥ä½¿ç”¨HandFunc(å‡½æ•°å) å°†å‡½æ•°è½¬ä¸ºHandFuncå¯¹è±¡ï¼Œå‡½æ•°éœ€è¦å’ŒHandFuncä¿æŒç­¾åä¸€è‡´</span></span>
<span class="line"><span class="token keyword">type</span> HandFunc <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹-æ‰©å±•æ–¹æ³•</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>f HandFunc<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token comment">// è¿™é‡Œçš„fæ˜¯HandFuncå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸Šé¢æ‰€è¯´çš„å‡½æ•°å¯¹è±¡</span></span>
<span class="line">   <span class="token comment">// æ‰€ä»¥è¿™é‡Œè°ƒç”¨f(x, y)å°±ç›¸å½“äºè°ƒç”¨ å‡½æ•°(x, y)</span></span>
<span class="line">   <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"> </span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰å‡½æ•°</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token comment">// å°†è‡ªå®šä¹‰å‡½æ•°è½¬ä¸ºè‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line">   add2 <span class="token operator">:=</span> <span class="token function">HandFunc</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> add2<span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">   <span class="token comment">// æ­£å¸¸è°ƒç”¨</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">   <span class="token comment">// è‡ªå®šä¹‰ç±»å‹å¯ä»¥è°ƒç”¨æ›´å¤šçš„æ–¹æ³•</span></span>
<span class="line">   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>add2<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">func<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span> int</span>
<span class="line">main.HandFunc</span>
<span class="line"><span class="token number">3</span>            </span>
<span class="line"><span class="token number">3</span>            </span>
<span class="line"><span class="token number">3</span>        </span>
<span class="line"></span></code></pre></div></details><h2 id="-3" tabindex="-1"><a class="header-anchor" href="#-3"><span></span></a></h2><h2 id="ç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“"><span>ç»“æ„ä½“</span></a></h2><p>Goè¯­è¨€çš„ç»“æ„ä½“å…¶å®å°±ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç±»</p><h3 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€"><span>åŸºç¡€</span></a></h3><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç»“æ„ä½“å®šä¹‰è¯­æ³•</span></span>
<span class="line"><span class="token comment">//     è¯­æ³•1ï¼š type ç»“æ„ä½“åç§° struct {}</span></span>
<span class="line"><span class="token comment">//     è¯­æ³•2ï¼š è¿˜å¯ä»¥å®šä¹‰åŒ¿åç»“æ„ä½“ï¼Œå‚è€ƒä¸‹æ–¹ä»£ç </span></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	id      <span class="token builtin">int</span></span>
<span class="line">	name    <span class="token builtin">string</span></span>
<span class="line">	address <span class="token builtin">string</span></span>
<span class="line">	phone   <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–ç©ºç»“æ„ä½“</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// {0   }</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">//ä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–</span></span>
<span class="line">	user1 <span class="token operator">:=</span> User<span class="token punctuation">{</span></span>
<span class="line">		id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Serry&quot;</span><span class="token punctuation">,</span> address<span class="token punctuation">:</span> <span class="token string">&quot;å¹¿ä¸œçœ&quot;</span><span class="token punctuation">,</span> phone<span class="token punctuation">:</span> <span class="token string">&quot;19111111111&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span> <span class="token comment">// {1 Serry å¹¿ä¸œçœ 19111111111}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨å±æ€§åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> user2 User</span>
<span class="line">	user2<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	user2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Bob&quot;</span></span>
<span class="line">	user2<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">&quot;æ²³åŒ—çœä¿å®šå¸‚&quot;</span></span>
<span class="line">	user2<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token string">&quot;13788888888&quot;</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span> <span class="token comment">// {1 Bob æ²³åŒ—çœä¿å®šå¸‚ 13788888888}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨newå‡½æ•°åˆå§‹åŒ–ã€æŒ‡é’ˆç±»å‹ç»“æ„ä½“ã€‘</span></span>
<span class="line">	<span class="token keyword">var</span> user3 <span class="token operator">*</span>User <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span> <span class="token comment">// &amp;{0   }</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å®šä¹‰åŒ¿åç»“æ„ä½“å¹¶åˆå§‹åŒ–</span></span>
<span class="line">	user4 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">		id    <span class="token builtin">int</span></span>
<span class="line">		phone <span class="token builtin">string</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">{</span></span>
<span class="line">		id<span class="token punctuation">:</span>    <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">		phone<span class="token punctuation">:</span> <span class="token string">&quot;12345678910&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user4<span class="token punctuation">)</span> <span class="token comment">// {1 12345678910}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="è‡ªå®šä¹‰tag" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰tag"><span>è‡ªå®šä¹‰Tag</span></a></h3><p><code>Tag</code>ä½¿ç”¨è¯­æ³•</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token string">`key1:&quot;value1&quot; key2:&quot;value2&quot; key3:&quot;value3&quot;...`</span> <span class="token comment">// é”®å€¼å¯¹ç”¨ç©ºæ ¼åˆ†éš”</span></span>
<span class="line"></span></code></pre></div><p>å·²çŸ¥ä½¿ç”¨äº†ç»“æ„ä½“<code>Tag</code>çš„åº“ï¼š<a href="https://github.com/golang/go/wiki/Well-known-struct-tags" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/wiki/Well-known-struct-tags</a></p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;reflect&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name     <span class="token builtin">string</span> <span class="token string">`my:&quot;username&quot;`</span></span>
<span class="line">	Age      <span class="token builtin">uint8</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`my:&quot;min=6,max=10&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">GetTag</span><span class="token punctuation">(</span>u User<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// é€šè¿‡åå°„è·å–ç±»å‹</span></span>
<span class="line">	t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä»£ç 						ç±»å‹							è¯´æ˜</span></span>
<span class="line">	<span class="token comment">// t.NumField()											ç»“æ„ä½“å­—æ®µæ•°é‡</span></span>
<span class="line">	<span class="token comment">// t.Field(0)											ç¬¬1ä¸ªå­—æ®µ</span></span>
<span class="line">	<span class="token comment">//	t.Field(1).Name 		å­—ç¬¦ä¸²						å­—æ®µåï¼Œè¿™é‡Œæ˜¯ Name</span></span>
<span class="line">	<span class="token comment">// 	t.Field(1).Tag  		StructTag(è‡ªå®šä¹‰å­—ç¬¦ä¸²ç±»å‹)	Tagï¼Œè¿™é‡Œæ˜¯ my:&quot;username&quot;</span></span>
<span class="line">	<span class="token comment">//  t.Field(1).Tag.Get()	æ–¹æ³•							æ ¹æ®keyè·å–value, keyä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10s   %-s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Struct Key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tag Value&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		field <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">		key <span class="token operator">:=</span> field<span class="token punctuation">.</span>Name</span>
<span class="line">		value <span class="token operator">:=</span> field<span class="token punctuation">.</span>Tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;my&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-10s   %-s\n&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	user <span class="token operator">:=</span> User<span class="token punctuation">{</span></span>
<span class="line">		Name<span class="token punctuation">:</span>     <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		Age<span class="token punctuation">:</span>      <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">		Password<span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">GetTag</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">Struct Key   Tag Value</span>
<span class="line">Name         username    </span>
<span class="line">Age                      </span>
<span class="line">Password     <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">6</span>,max<span class="token operator">=</span><span class="token number">10</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç©ºç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#ç©ºç»“æ„ä½“"><span>ç©ºç»“æ„ä½“</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ç©ºç»“æ„ä½“å ç”¨å†…å­˜ä¸º0</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unsafe&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Empty <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨unsafe.Sizeofå¯ä»¥æŸ¥çœ‹å ç”¨å†…å­˜å¤§å°,å•ä½å­—èŠ‚</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>Empty<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 0</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰ç©ºç»“æ„ä½“çš„åº”ç”¨åœºæ™¯ï¼šå¯¹æ–¹æ³•åˆ†ç»„ï¼Œå°†ç›¸åŒç±»å‹çš„æ–¹æ³•ç»„åˆåœ¨ä¸€èµ·ï¼Œä¾¿äºåç»­æ‰©å±•å’Œç»´æŠ¤</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Platform <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>Platform<span class="token punctuation">)</span> <span class="token function">GetOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> runtime<span class="token punctuation">.</span>GOOS</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>Platform<span class="token punctuation">)</span> <span class="token function">GetOSBit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> strconv<span class="token punctuation">.</span>IntSize</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> platform Platform</span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s %dbits\n&quot;</span><span class="token punctuation">,</span> platform<span class="token punctuation">.</span><span class="token function">GetOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> platform<span class="token punctuation">.</span><span class="token function">GetOSBit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// windows 64bits</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ç©ºç»“æ„ä½“çš„åº”ç”¨åœºæ™¯ï¼šå®ç°<code>set</code>ç±»å‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Set <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	s<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Remove</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">delete</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> item<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Exist</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> s<span class="token punctuation">[</span>item<span class="token punctuation">]</span></span>
<span class="line">	<span class="token keyword">return</span> ok</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	set <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span>Set<span class="token punctuation">)</span></span>
<span class="line">	set<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	set<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">Exist</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span></span>
<span class="line">	set<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">Exist</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰ç©ºç»“æ„ä½“çš„åº”ç”¨åœºæ™¯ï¼šç©ºé€šé“ï¼Œå®ç°é€šçŸ¥å‹<code>channel</code>ï¼Œå…¶ä¸éœ€è¦å‘é€ä»»ä½•æ•°æ®ï¼Œåªæ˜¯ç”¨äºåè°ƒ<code>Goroutine</code>è¿è¡Œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">		<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token operator">&lt;-</span>ch</span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç»“æ„ä½“ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“ç»„åˆ"><span>ç»“æ„ä½“ç»„åˆ</span></a></h3><p>ç±»ä¼¼äºç±»çš„ç»§æ‰¿</p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºç¡€ç”¨æ³•</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Addr <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	province <span class="token builtin">string</span></span>
<span class="line">	street   <span class="token builtin">string</span></span>
<span class="line">	number   <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	id    <span class="token builtin">int</span></span>
<span class="line">	name  <span class="token builtin">string</span></span>
<span class="line">	addr  Addr</span>
<span class="line">	phone <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> addr <span class="token operator">=</span> Addr<span class="token punctuation">{</span></span>
<span class="line">		province<span class="token punctuation">:</span> <span class="token string">&quot;Hebei&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		street<span class="token punctuation">:</span>   <span class="token string">&quot;å¤©å¨è·¯&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		number<span class="token punctuation">:</span>   <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">var</span> user <span class="token operator">=</span> User<span class="token punctuation">{</span></span>
<span class="line">		id<span class="token punctuation">:</span>    <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">		name<span class="token punctuation">:</span>  <span class="token string">&quot;bob&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		addr<span class="token punctuation">:</span>  addr<span class="token punctuation">,</span></span>
<span class="line">		phone<span class="token punctuation">:</span> <span class="token string">&quot;137111111111&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰K-VåŒåç®€å†™</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Basic <span class="token comment">// Basic Basicçš„ç®€å†™å½¢å¼,ä½†ä¸ç›´æ¥å†™Basic Basicæœ‰åŒºåˆ«</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Basic <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span></span>
<span class="line">	Age  <span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>b <span class="token operator">*</span>Basic<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> b<span class="token punctuation">.</span>Name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	u <span class="token operator">:=</span> User<span class="token punctuation">{</span></span>
<span class="line">		Basic<span class="token punctuation">{</span></span>
<span class="line">			Name<span class="token punctuation">:</span> <span class="token string">&quot;July&quot;</span><span class="token punctuation">,</span></span>
<span class="line">			Age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">)</span>   <span class="token comment">// main.User{Basic:main.Basic{Name:&quot;July&quot;, Age:18}}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// July, Userç»“æ„ä½“å®ä¾‹å¯ä»¥ç›´æ¥ä½¿ç”¨Basicç»“æ„ä½“çš„æ–¹æ³•,å¦‚æœæ˜¯éç®€å†™å½¢å¼åˆ™ä¸å¯ä»¥ç›´æ¥è°ƒç”¨</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç»“æ„ä½“æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“æ–¹æ³•"><span>ç»“æ„ä½“æ–¹æ³•</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºç¡€ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// å®šä¹‰ç»“æ„ä½“</span></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸€èˆ¬æˆ‘ä»¬ä¼šä¸ºç»“æ„ä½“å®šä¹‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼ˆè¿™ä¸æ˜¯å¿…é¡»çš„ï¼‰</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰ç»“æ„ä½“æ–¹æ³•</span></span>
<span class="line"><span class="token comment">// è¯­æ³•ï¼šfunc (æ¥æ”¶è€…å˜é‡ æ¥æ”¶è€…ç±»å‹) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°)</span></span>
<span class="line"><span class="token comment">//      æ¥æ”¶è€…å˜é‡: å»ºè®®ä½¿ç”¨æ¥æ”¶è€…ç±»å‹åç§°é¦–å­—æ¯çš„å°å†™ï¼Œè€Œä¸æ˜¯selfã€thisä¹‹ç±»çš„å‘½å</span></span>
<span class="line"><span class="token comment">//      æ¥æ”¶è€…ç±»å‹ï¼šå€¼ç±»å‹å’ŒæŒ‡é’ˆç±»å‹</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•1ï¼šå€¼æ¥æ”¶è€…ä¼šå°†ç»“æ„ä½“æ‹·è´ä¸€ä»½åˆ°æ–¹æ³•å†…</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Person <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;SetName: %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span></span>
<span class="line">	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	bob <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;bob&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;main: %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>bob<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	bob<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bob<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line">	<span class="token comment">// main: 0xc00004a250</span></span>
<span class="line">	<span class="token comment">// SetName: 0xc00004a260</span></span>
<span class="line">	<span class="token comment">// bob</span></span>
<span class="line">    <span class="token comment">// æ€»ç»“ï¼šå€¼æ¥æ”¶è€…ä¼šå°†ç»“æ„ä½“æ‹·è´ä¸€ä»½åˆ°æ–¹æ³•å†…ï¼Œæ‰€ä»¥å¯¼è‡´å¹¶æ²¡æœ‰å¯¹ç»“æ„ä½“ä¿®æ”¹æˆåŠŸ</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•2ï¼šæŒ‡é’ˆæ¥æ”¶è€…ä¸ä¼šæ‹·è´ç»“æ„ä½“</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// è¿™é‡Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šä¸º return (*p).name</span></span>
<span class="line">	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;SetName: %p\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span></span>
<span class="line">	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	bob <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;bob&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;main: %p\n&quot;</span><span class="token punctuation">,</span> bob<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	bob<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bob<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line">	<span class="token comment">// main: 0xc00010e110</span></span>
<span class="line">	<span class="token comment">// SetName: 0xc00010e110</span></span>
<span class="line">	<span class="token comment">// jack</span></span>
<span class="line">    <span class="token comment">// æ€»ç»“ï¼šæŒ‡é’ˆæ¥æ”¶è€…ä¸ä¼šæ‹·è´ç»“æ„ä½“ï¼Œæ‰€ä»¥å¯¹ç»“æ„ä½“ä¿®æ”¹æˆåŠŸ</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ç»“æ„ä½“æ˜¯map-vçš„æ€ªå¼‚è¡Œä¸º</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span></span>
<span class="line">	Sex  <span class="token builtin">string</span></span>
<span class="line">	Age  <span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">uint</span><span class="token punctuation">]</span>Person<span class="token punctuation">{</span></span>
<span class="line">		<span class="token number">0</span><span class="token punctuation">:</span> Person<span class="token punctuation">{</span><span class="token string">&quot;å¼ æ— å¿Œ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token number">1</span><span class="token punctuation">:</span> Person<span class="token punctuation">{</span><span class="token string">&quot;èµµæ•&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•1ï¼šè¿™ä¼šæŠ¥é”™ cannot assign to struct field m[0].Age in map</span></span>
<span class="line">	m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Age <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•2ï¼šè¿‚å›è§£å†³</span></span>
<span class="line">	<span class="token comment">//tmp := m[0]</span></span>
<span class="line">	<span class="token comment">//tmp.Age += 1</span></span>
<span class="line">	<span class="token comment">//m[0] = tmp</span></span>
<span class="line">	<span class="token comment">//fmt.Println(m[0].Age)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•3ï¼šå®šä¹‰mapä¸ºæŒ‡é’ˆç±»å‹åè§£å†³</span></span>
<span class="line">	<span class="token comment">//m2 := map[uint]*Person{</span></span>
<span class="line">	<span class="token comment">//	0: &amp;Person{&quot;å¼ æ— å¿Œ&quot;, &quot;ç”·&quot;, 20},</span></span>
<span class="line">	<span class="token comment">//	1: &amp;Person{&quot;èµµæ•&quot;, &quot;å¥³&quot;, 21},</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line">	<span class="token comment">//</span></span>
<span class="line">	<span class="token comment">//m2[0].Age += 1</span></span>
<span class="line">	<span class="token comment">//fmt.Println(m2[0].Age)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å‡½æ•°å¼é€‰é¡¹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å¼é€‰é¡¹æ¨¡å¼"><span>å‡½æ•°å¼é€‰é¡¹æ¨¡å¼</span></a></h3><p>è¯¥æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•æ›´åŠ¨æ€çµæ´»åœ°ä¸ºå¯¹è±¡é…ç½®å‚æ•°</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰ç»“æ„ä½“</span></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span> <span class="token comment">// å¿…é¡»å­—æ®µ</span></span>
<span class="line">	Age  <span class="token builtin">uint8</span>  <span class="token comment">// éå¿…é¡»</span></span>
<span class="line">	Sex  <span class="token builtin">string</span> <span class="token comment">// éå¿…é¡»</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰å„ç§é€‰é¡¹</span></span>
<span class="line"><span class="token keyword">type</span> Option <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WithAge</span><span class="token punctuation">(</span>age <span class="token builtin">uint8</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>user <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		user<span class="token punctuation">.</span>Age <span class="token operator">=</span> age</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WithSex</span><span class="token punctuation">(</span>sex <span class="token builtin">string</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>user <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		user<span class="token punctuation">.</span>Sex <span class="token operator">=</span> sex</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">DefaultOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Option <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Option<span class="token punctuation">{</span><span class="token function">WithAge</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">&quot;superman&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ„é€ æ–¹æ³•</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewUser</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> options <span class="token operator">...</span>Option<span class="token punctuation">)</span> <span class="token operator">*</span>User <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// (1) å¿…é¡»æœ‰çš„å­—æ®µç›´æ¥å†™åˆ°å‡½æ•°ç­¾åä¸­ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªname</span></span>
<span class="line">	<span class="token comment">// (2) å¯æœ‰å¯æ— çš„é€šè¿‡optionsåŠ¨æ€ä¼ é€’</span></span>
<span class="line">	<span class="token comment">// (3) ä»¥åè‹¥å¢åŠ æ–°çš„é€‰é¡¹ï¼Œä¹Ÿä¸éœ€è¦æ”¹æ„é€ å‡½æ•°</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å®ä¾‹åŒ–ç»“æ„ä½“</span></span>
<span class="line">	user <span class="token operator">:=</span> <span class="token operator">&amp;</span>User<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> name<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è®¾ç½®é»˜è®¤å‚æ•°</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> option <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token function">DefaultOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">option</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è‡ªå®šä¹‰å‚æ•°</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> option <span class="token operator">:=</span> <span class="token keyword">range</span> options <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">option</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> user</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	bob <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">&quot;bob&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	jack <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token function">WithAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">&quot;man&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	julie <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">&quot;julie&quot;</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">&quot;woman&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> bob<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> jack<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> julie<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">//&amp;main.User{Name:&quot;bob&quot;, Age:0xa, Sex:&quot;superman&quot;}</span></span>
<span class="line">	<span class="token comment">//&amp;main.User{Name:&quot;jack&quot;, Age:0x14, Sex:&quot;man&quot;}  </span></span>
<span class="line">	<span class="token comment">//&amp;main.User{Name:&quot;julie&quot;, Age:0xa, Sex:&quot;woman&quot;}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="è®¡ç®—å†…å­˜å ç”¨" tabindex="-1"><a class="header-anchor" href="#è®¡ç®—å†…å­˜å ç”¨"><span>è®¡ç®—å†…å­˜å ç”¨</span></a></h3><p><strong>ç»“è®º</strong></p><p>ç»“æ„ä½“å†…å­˜å ç”¨å¤§å°æ˜¯<span style="color:red;font-weight:bold;">æ¯ä¸ªå­—æ®µå†…å­˜å¯¹é½ä¹‹åå ç”¨ä¹‹å’Œ</span>ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªå­—æ®µå ç”¨ä¹‹å’Œ</p><p><strong>ç»“æ„ä½“å†…å­˜å¯¹é½è§„åˆ™</strong></p><ul><li>ç¬¬ä¸€ä¸ªå­—æ®µåœ¨ä¸ç»“æ„ä½“åç§»é‡ä¸º0çš„åœ°å€å¤„</li><li>å…¶ä»–å­—æ®µè¦å¯¹é½åˆ°å¯¹é½æ•°çš„æ•´æ•°å€çš„åœ°å€å¤„</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŸ¥çœ‹æ¯ç§æ•°æ®ç±»å‹å ç”¨å¤§å°å’Œå¯¹é½æ•°</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unsafe&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;bool  : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int8  : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int16 : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int32 : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;int64 : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;byte  : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;rune  : Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;string: Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;struct: Size %2d, Alignment %d\n&quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token builtin">bool</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span></span>
<span class="line"><span class="token builtin">int8</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span></span>
<span class="line"><span class="token builtin">int16</span> <span class="token punctuation">:</span> Size  <span class="token number">2</span><span class="token punctuation">,</span> Alignment <span class="token number">2</span></span>
<span class="line"><span class="token builtin">int32</span> <span class="token punctuation">:</span> Size  <span class="token number">4</span><span class="token punctuation">,</span> Alignment <span class="token number">4</span></span>
<span class="line"><span class="token builtin">int64</span> <span class="token punctuation">:</span> Size  <span class="token number">8</span><span class="token punctuation">,</span> Alignment <span class="token number">8</span></span>
<span class="line"><span class="token builtin">byte</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span></span>
<span class="line"><span class="token builtin">rune</span>  <span class="token punctuation">:</span> Size  <span class="token number">4</span><span class="token punctuation">,</span> Alignment <span class="token number">4</span></span>
<span class="line"><span class="token builtin">string</span><span class="token punctuation">:</span> Size <span class="token number">16</span><span class="token punctuation">,</span> Alignment <span class="token number">8</span></span>
<span class="line"><span class="token keyword">struct</span><span class="token punctuation">:</span> Size  <span class="token number">0</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Sizeä»£è¡¨å ç”¨å†…å­˜å¤§å°ï¼ˆå•ä½å­—èŠ‚ï¼‰</span></span>
<span class="line"><span class="token comment">// Alignmentä»£è¡¨å†…å­˜å¯¹é½æ•°å­—ï¼ˆå•ä½å­—èŠ‚ï¼‰</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å¯¹é½è§„åˆ™éªŒè¯</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;unsafe&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> P1 <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	a <span class="token builtin">bool</span>   <span class="token comment">// åç§»é‡ä¸º0, è‡ªèº«å ç”¨1ä¸ªå­—èŠ‚</span></span>
<span class="line">	b <span class="token builtin">int32</span>  <span class="token comment">// ä¸aåšå†…å­˜å¯¹é½,int32ç±»å‹çš„å¯¹é½å€æ•°ä¸º4,å¯¼è‡´åç§»é‡ä¸º4,è‡ªèº«åˆå ç”¨4ä¸ªå­—èŠ‚,æ‰€ä»¥æœ¬å­—æ®µç»“æŸä½ç½®åœ¨åç§»é‡ä¸º8çš„ä½ç½®</span></span>
<span class="line">	c <span class="token builtin">byte</span>   <span class="token comment">// ä¸båšå†…å­˜å¯¹é½,åç§»é‡ä¸º9çš„ä½ç½®</span></span>
<span class="line">	d <span class="token builtin">string</span> <span class="token comment">// ä¸cåšå†…å­˜å¯¹é½,åç§»é‡å¼€å§‹ä½ç½®åœ¨16,è‡ªèº«å ç”¨16,æœ€ç»ˆä½ç½®åœ¨32</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> P2 <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	a <span class="token builtin">bool</span>   <span class="token comment">// åç§»é‡ä¸º0,æœ€ç»ˆä½ç½®1</span></span>
<span class="line">	c <span class="token builtin">byte</span>   <span class="token comment">// åç§»é‡ä¸º1,æœ€ç»ˆä½ç½®2</span></span>
<span class="line">	b <span class="token builtin">int32</span>  <span class="token comment">// åç§»é‡å¼€å§‹ä¸º4,ç»“æŸä¸º8</span></span>
<span class="line">	d <span class="token builtin">string</span> <span class="token comment">// åç§»é‡å¼€å§‹ä¸º8,ç»“æŸä¸º 8 + 16 = 24</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>P1<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 32</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>P2<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 24</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><h2 id="-4" tabindex="-1"><a class="header-anchor" href="#-4"><span></span></a></h2><h2 id="æ¥å£" tabindex="-1"><a class="header-anchor" href="#æ¥å£"><span>æ¥å£</span></a></h2><h3 id="æ¥å£æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ¥å£æ˜¯ä»€ä¹ˆ"><span>æ¥å£æ˜¯ä»€ä¹ˆ</span></a></h3><p>æ¥å£æ˜¯ä¸€ä¸ªç±»å‹ï¼Œå°±å’Œ<code>int</code>ã€<code>string</code>ã€<code>map</code>ç­‰ä¸€æ ·ï¼Œæ˜¯ç±»å‹ï¼Œä¸æ˜¯å€¼</p><p>æ¥å£æ˜¯ä¸€ç³»åˆ—æ–¹æ³•çš„é›†åˆï¼Œæ¯”å¦‚<code>io.Writer</code>å°±æ˜¯ä¸€ä¸ªæ¥å£</p><p>æŸä¸ªå€¼å®ç°äº†æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°å®ƒå®ç°äº†æŸä¸ªæ¥å£ï¼Œæ¯”å¦‚<code>os.Stdout</code>å®ç°äº†<code>io.Writer</code>æ¥å£</p><p>ä¸‹é¢ç”¨ä»£ç æ¼”ç¤ºä¸€ä¸‹</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å˜é‡w,ç±»å‹ä¸º io.Writer, è¿™æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡</span></span>
<span class="line">	<span class="token keyword">var</span> w io<span class="token punctuation">.</span>Writer</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç»™æ¥å£ç±»å‹å˜é‡èµ‹å€¼</span></span>
<span class="line">	w <span class="token operator">=</span> os<span class="token punctuation">.</span>Stdout</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è°ƒç”¨</span></span>
<span class="line">	<span class="token boolean">_</span><span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// hello</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><br><h3 id="æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª" tabindex="-1"><a class="header-anchor" href="#æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª"><span>æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª</span></a></h3><p>æ¥å£æ˜¯ä¸€ç§ç±»å‹ï¼Œé‚£ä¹ˆéƒ½å¯ä»¥ç”¨åœ¨å“ªå‘¢ï¼Ÿ</p><p>ï¼ˆ1ï¼‰å£°æ˜å˜é‡ä¸ºæ¥å£ç±»å‹</p><p>ï¼ˆ2ï¼‰å‡½æ•°å½¢å‚æŒ‡å®šä¸ºæ¥å£ç±»å‹</p><p>ï¼ˆ3ï¼‰ç»“æ„ä½“å­—æ®µæŒ‡å®šä¸ºæ¥å£ç±»å‹</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WriteString</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	io<span class="token punctuation">.</span>Writer</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åº”ç”¨1: å£°æ˜ä¸ºæ¥å£å˜é‡</span></span>
<span class="line">	<span class="token keyword">var</span> w io<span class="token punctuation">.</span>Writer</span>
<span class="line">	w <span class="token operator">=</span> os<span class="token punctuation">.</span>Stdout</span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;hello &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åº”ç”¨2: å‡½æ•°å½¢å‚ä¸ºæ¥å£ç±»å‹</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">WriteString</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åº”ç”¨3: ç»“æ„ä½“å­—æ®µä¸ºæ¥å£ç±»å‹</span></span>
<span class="line">	user <span class="token operator">:=</span> User<span class="token punctuation">{</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> user<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœï¼š</span></span>
<span class="line"><span class="token comment">// hello world!</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ"><span>æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ</span></a></h3><p>å‡¡æ˜¯å®ç°äº†æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•çš„å¯¹è±¡éƒ½å¯ä»¥æ˜¯æ¥å£å€¼ï¼Œéƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</p><p>ï¼ˆ1ï¼‰ç»“æ„ä½“ï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰</p><p>ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ï¼ˆä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ä½œä¸ºæ¥å£ç±»å‹çš„å€¼ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªå“ˆ~ï¼‰</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰æ¥å£</span></span>
<span class="line"><span class="token keyword">type</span> Writer <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line"><span class="token keyword">type</span> Stdout <span class="token builtin">string</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m Stdout<span class="token punctuation">)</span> <span class="token function">Write</span><span class="token punctuation">(</span>w <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> os<span class="token punctuation">.</span>Stdout<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> a Stdout <span class="token comment">// å£°æ˜å˜é‡aä¸ºè‡ªå®šä¹‰ç±»å‹</span></span>
<span class="line">	<span class="token keyword">var</span> b Writer <span class="token comment">// å£°æ˜å˜é‡bä¸ºæ¥å£ç±»å‹</span></span>
<span class="line">	b <span class="token operator">=</span> a        <span class="token comment">// è‡ªå®šä¹‰ç±»å‹å®ç°äº†Readeræ¥å£,æ‰€ä»¥å¯ä»¥å°†aèµ‹å€¼ç»™b</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è°ƒç”¨æ–¹æ³•</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> b<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// hello</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…" tabindex="-1"><a class="header-anchor" href="#å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…"><span>å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…</span></a></h3><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰Senderæ¥å£</span></span>
<span class="line"><span class="token keyword">type</span> Sender <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Send</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰å¾®ä¿¡åª’ä»‹</span></span>
<span class="line"><span class="token keyword">type</span> Weixin <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	User     <span class="token builtin">string</span></span>
<span class="line">	Password <span class="token builtin">string</span></span>
<span class="line">	Phone    <span class="token builtin">string</span></span>
<span class="line">	To       <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Weixin<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span> <span class="token comment">// æŒ‡é’ˆæ–¹æ³•</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Weixin Send: %s\n&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰é‚®ç®±åª’ä»‹</span></span>
<span class="line"><span class="token keyword">type</span> Email <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Addr     <span class="token builtin">string</span></span>
<span class="line">	Port     <span class="token builtin">string</span></span>
<span class="line">	User     <span class="token builtin">string</span></span>
<span class="line">	Password <span class="token builtin">string</span></span>
<span class="line">	to       <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>e Email<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span> <span class="token comment">// å€¼æ–¹æ³•</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Email Send: %s\n&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æµ‹è¯•1</span></span>
<span class="line">	<span class="token keyword">var</span> x Sender    <span class="token comment">// å£°æ˜xä¸ºSenderæ¥å£ç±»å‹</span></span>
<span class="line">	x <span class="token operator">=</span> <span class="token operator">&amp;</span>Weixin<span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// ç»™xèµ‹å€¼, æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„,æ‰€ä»¥è¿™é‡Œå¿…é¡»ä½¿ç”¨æŒ‡é’ˆç±»å‹</span></span>
<span class="line">	x<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•2</span></span>
<span class="line">	<span class="token keyword">var</span> y<span class="token punctuation">,</span> z Sender <span class="token comment">// å£°æ˜Senderæ¥å£ç±»å‹</span></span>
<span class="line">	y <span class="token operator">=</span> Email<span class="token punctuation">{</span><span class="token punctuation">}</span>     <span class="token comment">// èµ‹å€¼</span></span>
<span class="line">	z <span class="token operator">=</span> <span class="token operator">&amp;</span>Email<span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">// èµ‹å€¼</span></span>
<span class="line">	y<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•</span></span>
<span class="line">	z<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•,æŒ‡é’ˆå¯¹è±¡è°ƒç”¨çš„æœ¬è´¨è¿˜æ˜¯å€¼å¯¹è±¡è°ƒç”¨,åªæ˜¯è¯­æ³•ç³–</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line">	<span class="token comment">// Weixin Send: hello</span></span>
<span class="line">	<span class="token comment">// Email Send: hello</span></span>
<span class="line">	<span class="token comment">// Email Send: hello</span></span>
<span class="line">	<span class="token comment">// æ€»ç»“:</span></span>
<span class="line">	<span class="token comment">// (1) æŒ‡é’ˆç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•å¿…é¡»ä½¿ç”¨æŒ‡é’ˆå¯¹è±¡æ¥è°ƒç”¨</span></span>
<span class="line">	<span class="token comment">// (2) å€¼ç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•æ—¢å¯ä»¥ç”¨å€¼å¯¹è±¡è°ƒç”¨,ä¹Ÿå¯ä»¥ç”¨æŒ‡é’ˆå¯¹è±¡è°ƒç”¨</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç©ºæ¥å£" tabindex="-1"><a class="header-anchor" href="#ç©ºæ¥å£"><span>ç©ºæ¥å£</span></a></h3><p>ç©ºæ¥å£æ„ä¸ºç€å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„å€¼ï¼Œä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç¡®å®šå€¼æ˜¯ä»€ä¹ˆç±»å‹</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰ç©ºæ¥å£</span></span>
<span class="line"><span class="token keyword">type</span> Empty <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> a Empty</span>
<span class="line">	a <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>	<span class="token comment">// 1</span></span>
<span class="line">	a <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>	<span class="token comment">// Hello</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ–­è¨€å’ŒæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#æ–­è¨€å’ŒæŸ¥è¯¢"><span>æ–­è¨€å’ŒæŸ¥è¯¢</span></a></h3><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</span></span>
<span class="line"><span class="token keyword">type</span> EmailSender <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Addr     <span class="token builtin">string</span></span>
<span class="line">	Port     <span class="token builtin">string</span></span>
<span class="line">	User     <span class="token builtin">string</span></span>
<span class="line">	Password <span class="token builtin">string</span></span>
<span class="line">	to       <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>EmailSender<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</span></span>
<span class="line"><span class="token keyword">type</span> WeiChartSender <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	User     <span class="token builtin">string</span></span>
<span class="line">	Password <span class="token builtin">string</span></span>
<span class="line">	to       <span class="token builtin">string</span></span>
<span class="line">	Phone    <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>WeiChartSender<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å®šä¹‰ä¸€ä¸ªæ¥å£</span></span>
<span class="line"><span class="token keyword">type</span> Sender <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Send</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> a Sender <span class="token operator">=</span> <span class="token operator">&amp;</span>WeiChartSender<span class="token punctuation">{</span>User<span class="token punctuation">:</span> <span class="token string">&quot;æˆ‘æ˜¯å°a&quot;</span><span class="token punctuation">}</span> <span class="token comment">// å®šä¹‰senderä¸ºSenderæ¥å£ç±»å‹; å¦‚æœç”¨newåˆå§‹åŒ–,ç›´æ¥èµ‹å€¼å°±ä¼šæŠ¥é”™äº†</span></span>
<span class="line">	b <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>WeiChartSender<span class="token punctuation">)</span>                     <span class="token comment">// å®šä¹‰bä¸ºWeiChartSenderç»“æ„ä½“æŒ‡é’ˆç±»å‹</span></span>
<span class="line">	b<span class="token punctuation">.</span>User <span class="token operator">=</span> <span class="token string">&quot;æˆ‘æ˜¯å°b&quot;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ­£å¸¸è°ƒç”¨æ–¹æ³•</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­£å¸¸æ–¹æ³•è°ƒç”¨:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Hello world!</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span> <span class="token comment">// Hello world!</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŸ¥çœ‹å„ä¸ªç±»å‹,çœ‹èµ·æ¥ä¸¤ä¸ªç±»å‹éƒ½ä¸€æ ·</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næŸ¥çœ‹ç±»å‹:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// *main.WeiChartSender</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">// *main.WeiChartSender</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è°ƒç”¨å±æ€§, æ¥å£ç±»å‹çš„ä¸èƒ½è°ƒç”¨,å› ä¸ºæ¥å£åªèƒ½è¦æ±‚å‡½æ•°, å®šä¹‰ä¸äº†å±æ€§,å½“ç„¶ä¹Ÿæ²¡æœ‰å®ç°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næŸ¥çœ‹å±æ€§:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//fmt.Println(a.User) // è¿™ä¸ªä¼šæŠ¥é”™ a.User undefined (type Sender has no field or method User)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;b.User=%s\n&quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ¥å£ç±»å‹è½¬æ¢ä¸ºç»“æ„ä½“ -- æ–­è¨€æ–¹å¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næ–­è¨€æ–¹å¼:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> obj<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>WeiChartSender<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ–­è¨€æˆåŠŸ: %#v\n&quot;</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;a.User=%s\n&quot;</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ–­è¨€å¤±è´¥&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ¥å£ç±»å‹è½¬æ¢ä¸ºç»“æ„ä½“ -- æŸ¥è¯¢æ–¹å¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\næŸ¥è¯¢æ–¹å¼:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">switch</span> obj <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token operator">*</span>WeiChartSender<span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢æˆåŠŸ: %#v\n&quot;</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span></span>
<span class="line">        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;a.User=%s\n&quot;</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>User<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥è¯¢å¤±è´¥\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">æ­£å¸¸æ–¹æ³•è°ƒç”¨:</span>
<span class="line">Hello world<span class="token operator">!</span>                                                                </span>
<span class="line">Hello world<span class="token operator">!</span>                                                                </span>
<span class="line">                                                                            </span>
<span class="line">æŸ¥çœ‹ç±»å‹:                                                                   </span>
<span class="line">*main.WeiChartSender                                                        </span>
<span class="line">*main.WeiChartSender                                                        </span>
<span class="line">                                                                            </span>
<span class="line">æŸ¥çœ‹å±æ€§:                                                                   </span>
<span class="line"><span class="token assign-left variable">b.User</span><span class="token operator">=</span>æˆ‘æ˜¯å°b                                                              </span>
<span class="line">                                                                            </span>
<span class="line">æ–­è¨€æ–¹å¼:                                                                   </span>
<span class="line">æ–­è¨€æˆåŠŸ: <span class="token operator">&amp;</span>main.WeiChartSender<span class="token punctuation">{</span>User:<span class="token string">&quot;æˆ‘æ˜¯å°a&quot;</span>, Password:<span class="token string">&quot;&quot;</span>, to:<span class="token string">&quot;&quot;</span>, Phone:<span class="token string">&quot;&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token assign-left variable">a.User</span><span class="token operator">=</span>æˆ‘æ˜¯å°a                                                              </span>
<span class="line">                                                                            </span>
<span class="line">æŸ¥è¯¢æ–¹å¼:                                                                   </span>
<span class="line">æŸ¥è¯¢æˆåŠŸ: <span class="token operator">&amp;</span>main.WeiChartSender<span class="token punctuation">{</span>User:<span class="token string">&quot;æˆ‘æ˜¯å°a&quot;</span>, Password:<span class="token string">&quot;&quot;</span>, to:<span class="token string">&quot;&quot;</span>, Phone:<span class="token string">&quot;&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token assign-left variable">a.User</span><span class="token operator">=</span>æˆ‘æ˜¯å°a</span>
<span class="line"></span></code></pre></div></details><br><h3 id="å¸¸ç”¨æ¥å£" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨æ¥å£"><span>å¸¸ç”¨æ¥å£</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰Stringer</summary><p>å­—ç¬¦ä¸²åŠŸèƒ½æ¥å£</p><p>å®šä¹‰å¦‚ä¸‹</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// fmt.print.go</span></span>
<span class="line"><span class="token keyword">type</span> Stringer <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>æµ‹è¯•ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> A <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span></span>
<span class="line">	Age  <span class="token builtin">uint</span></span>
<span class="line">	Sex  <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;String: å¤§å®¶å¥½, æˆ‘æ˜¯%s, æ€§åˆ«%s, å¹´é¾„%d&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Sex<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Age<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">GoString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;GoString: å¤§å®¶å¥½, æˆ‘æ˜¯%s, æ€§åˆ«%s, å¹´é¾„%d&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Sex<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Age<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	a <span class="token operator">:=</span> <span class="token operator">&amp;</span>A<span class="token punctuation">{</span></span>
<span class="line">		Name<span class="token punctuation">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		Age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">		Sex<span class="token punctuation">:</span>  <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%+v\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// GoString</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18</span>
<span class="line">String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  </span>
<span class="line">String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  </span>
<span class="line">GoString: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18</span>
<span class="line">String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  </span>
<span class="line"><span class="token string">&quot;String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18&quot;</span></span>
<span class="line"></span></code></pre></div></details><h2 id="-5" tabindex="-1"><a class="header-anchor" href="#-5"><span></span></a></h2><h2 id="io" tabindex="-1"><a class="header-anchor" href="#io"><span>IO</span></a></h2><h3 id="fmt-æ ¼å¼åŒ–io" tabindex="-1"><a class="header-anchor" href="#fmt-æ ¼å¼åŒ–io"><span><code>fmt</code>ï¼šæ ¼å¼åŒ–IO</span></a></h3><p>æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/fmt" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/fmt</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å¸¸ç”¨å‡½æ•°</summary><table><thead><tr><th>åˆ†ç±»</th><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¾“å‡ºåˆ°æ§åˆ¶å°</td><td><code>fmt.Print(string)</code></td><td>ä¸æ¢è¡Œ</td></tr><tr><td></td><td><code>fmt.Println(string)</code></td><td>è‡ªåŠ¨æ¢è¡Œï¼Œ<code>ln</code>æ„ä¸º<code>line</code></td></tr><tr><td></td><td><code>fmt.Printf(æ ¼å¼åŒ–å­—ç¬¦, å­—ç¬¦ä¸²)</code></td><td>æ ¼å¼åŒ–è¾“å‡º</td></tr><tr><td>ä½œä¸ºè¿”å›å€¼è¿”å›</td><td><code>fmt.Sprint()</code></td><td></td></tr><tr><td></td><td><code>fmt.Sprintln()</code></td><td></td></tr><tr><td></td><td><code>fmt.Sprintf(æ ¼å¼åŒ–å­—ç¬¦, å­—ç¬¦ä¸²å¯¹è±¡)</code></td><td></td></tr><tr><td>æ¥æ”¶ç”¨æˆ·è¾“å…¥</td><td><code>fmt.Scan(æŒ‡é’ˆå¯¹è±¡)</code></td><td>å°†æ§åˆ¶å°æ¥æ”¶çš„å€¼ èµ‹å€¼ç»™æŒ‡é’ˆå¯¹è±¡</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰fmt.printfæ ¼å¼åŒ–å­—ç¬¦ä¸²</summary><table><thead><tr><th>åˆ†ç±»</th><th>ä¿®é¥°ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¸¸ç”¨</td><td><code>%T</code></td><td>æ•°æ®ç±»å‹</td></tr><tr><td></td><td><code>%v</code></td><td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœå®ç°äº† <code>error </code>æ¥å£ï¼Œä»…è¡¨ç¤ºé”™è¯¯æ¶ˆæ¯</td></tr><tr><td></td><td><code>%+v</code></td><td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“ä¼šæºå¸¦å­—æ®µå</td></tr><tr><td></td><td><code>%#v</code></td><td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“ä¼šæºå¸¦ç»“æ„ä½“åå’Œå­—æ®µå</td></tr><tr><td>æŒ‡é’ˆ</td><td><code>%p</code></td><td>æŒ‡é’ˆåœ°å€ï¼ˆå¸¦ <code>0x</code>ï¼‰</td></tr><tr><td></td><td><code>%#p</code></td><td>æŒ‡é’ˆåœ°å€ï¼ˆä¸å¸¦ <code>0x</code>ï¼‰</td></tr><tr><td>å­—ç¬¦ä¸²</td><td><code>%s</code></td><td>å­—ç¬¦ä¸²æˆ–å­—èŠ‚åˆ‡ç‰‡</td></tr><tr><td></td><td><code>%c</code></td><td>Unicodeç ç‚¹å¯¹åº”çš„å­—ç¬¦</td></tr><tr><td></td><td><code>%q</code></td><td>å¯¹äºå­—ç¬¦ä¸²æˆ–å­—èŠ‚åˆ‡ç‰‡ï¼Œç»“æœä¼šåŠ ä¸ŠåŒå¼•å·ï¼›<br>å¯¹äº<code>byte</code>æˆ–<code>runeï¼Œ</code>ç»“æœä¼šåŠ ä¸Šå•å¼•å·</td></tr><tr><td>å­—ç¬¦ä¸²å®½åº¦</td><td><code>%5s</code></td><td>æœ€å°å®½åº¦ä¸º5ï¼ˆé»˜è®¤å³å¯¹é½ï¼‰</td></tr><tr><td></td><td><code>%-5s</code></td><td>æœ€å°å®½åº¦ä¸º5ï¼ˆå·¦å¯¹é½ï¼‰</td></tr><tr><td></td><td><code>%.5s</code></td><td>æœ€å¤§å®½åº¦ä¸º5ï¼Œå¤šå‡ºéƒ¨åˆ†ä¼šæˆªæ–­</td></tr><tr><td></td><td><code>%5.7s</code></td><td>æœ€å°å®½åº¦ä¸º5ï¼Œæœ€å¤§å®½åº¦ä¸º7</td></tr><tr><td></td><td><code>%-5.7s</code></td><td>æœ€å°å®½åº¦ä¸º5ï¼Œæœ€å¤§å®½åº¦ä¸º7ï¼ˆå·¦å¯¹é½ï¼‰</td></tr><tr><td></td><td><code>%5.3s</code></td><td>å¦‚æœå®½åº¦å¤§äº3ï¼Œåˆ™æˆªæ–­</td></tr><tr><td></td><td><code>%05s</code></td><td>å¦‚æœå®½åº¦å°äº5ï¼Œå°±ä¼šåœ¨å­—ç¬¦ä¸²å‰é¢è¡¥é›¶</td></tr><tr><td>æ•´å‹</td><td><code>%b</code></td><td>äºŒè¿›åˆ¶æ•°</td></tr><tr><td></td><td><code>%o</code></td><td>å…«è¿›åˆ¶æ•°</td></tr><tr><td></td><td><code>%#o</code></td><td>å…«è¿›åˆ¶æ•°</td></tr><tr><td></td><td><code>%d</code></td><td>åè¿›åˆ¶æ•°</td></tr><tr><td></td><td><code>%x</code></td><td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œa-f</td></tr><tr><td></td><td><code>%X</code></td><td>æ‰“å°16è¿›åˆ¶æ•°ï¼ŒA-F</td></tr><tr><td></td><td><code>%#x</code>ã€<code>%#X</code></td><td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œå¸¦<code>0x</code>ã€<code>0X</code></td></tr><tr><td></td><td><code>% x</code>ã€<code>% X</code></td><td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œå‰é¢å¸¦ä¸€ä¸ªç©ºæ ¼</td></tr><tr><td>æµ®ç‚¹æ•°</td><td><code>%f</code></td><td>æµ®ç‚¹æ•°, é»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå³<code>%.6</code></td></tr><tr><td></td><td><code>%e</code></td><td>ç§‘å­¦è®¡æ•°æ³•ï¼Œé»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå³<code>%.6e</code></td></tr><tr><td>æŒ‡é’ˆ</td><td><code>%p</code></td><td>æŒ‡é’ˆï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå¸¦å‰ç¼€<code>0x</code></td></tr><tr><td></td><td><code>%#p</code></td><td>æŒ‡é’ˆï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä¸å¸¦å‰ç¼€<code>0x</code></td></tr><tr><td>å¸ƒå°”å€¼</td><td><code>%t</code></td><td>æ‰“å°<code>true</code>æˆ–<code>false</code></td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰fmt.Printfï¼šåŸºç¡€ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span></span>
<span class="line">	Age  <span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	person <span class="token operator">:=</span> Person<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span></span>
<span class="line">	numbers <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¸¸ç”¨ç±»å‹</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v\n&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%+v\n&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v\n&quot;</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//main.Person</span></span>
<span class="line">	<span class="token comment">//{Bob 20}</span></span>
<span class="line">	<span class="token comment">//{Name:Bob Age:20}</span></span>
<span class="line">	<span class="token comment">//main.Person{Name:&quot;Bob&quot;, Age:20}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŒ‡é’ˆç±»å‹ï¼Œå€¼ç±»å‹éœ€è¦ä½¿ç”¨&amp;è·å–æŒ‡é’ˆåœ°å€ï¼Œå¼•ç”¨ç±»å‹åŠ ä¸åŠ &amp;éƒ½å¯ä»¥</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p, %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>person<span class="token punctuation">,</span> numbers<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#p, %#p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>person<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numbers<span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//0xc000004078, 0xc0000161e0</span></span>
<span class="line">	<span class="token comment">//c000004078, c0000161e0</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s, %s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#x\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0x5317, å­—ç¬¦ä¸² -&gt; unicode -&gt; 16è¿›åˆ¶</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> <span class="token number">0x5317</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%q, %q, %q\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;åŒ—äº¬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0x5317</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//åŒ—äº¬, åŒ—äº¬</span></span>
<span class="line">	<span class="token comment">//0x5317</span></span>
<span class="line">	<span class="token comment">//åŒ—</span></span>
<span class="line">	<span class="token comment">//&quot;åŒ—äº¬&quot;, &quot;åŒ—äº¬&quot;, &#39;åŒ—&#39;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­—ç¬¦ä¸²å®½åº¦</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%5s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-5s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%.5s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ABCDEF&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%5.3s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ABCDEF&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//ABC</span></span>
<span class="line">	<span class="token comment">//ABC</span></span>
<span class="line">	<span class="token comment">//ABCDE</span></span>
<span class="line">	<span class="token comment">//ABC</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ•´å‹</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%b\n&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%o\n&quot;</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#o\n&quot;</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%x\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%X\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%X\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#x\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#X\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;% X\n&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//11</span></span>
<span class="line">	<span class="token comment">//11</span></span>
<span class="line">	<span class="token comment">//011</span></span>
<span class="line">	<span class="token comment">//f</span></span>
<span class="line">	<span class="token comment">//F</span></span>
<span class="line">	<span class="token comment">//F</span></span>
<span class="line">	<span class="token comment">//0xf</span></span>
<span class="line">	<span class="token comment">//0XF</span></span>
<span class="line">	<span class="token comment">// F</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 	æµ®ç‚¹æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%.2f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">2.985</span><span class="token punctuation">)</span>                     <span class="token comment">// å¹¶éå››èˆäº”å…¥</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%.2f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">2.986</span><span class="token punctuation">)</span>                     <span class="token comment">// ä¹Ÿä¸æ˜¯å®Œå…¨èˆå»å°æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">3.3333333333333333333333333</span><span class="token punctuation">)</span> <span class="token comment">// é»˜è®¤ä¿ç•™å…­ä½å°æ•°</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span>                         <span class="token comment">// é»˜è®¤ä¿ç•™å…­ä½å°æ•°ï¼Œå³%.06</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ç§‘å­¦è®¡æ•°æ³•</span></span>
<span class="line">    <span class="token comment">// é»˜è®¤ä¸º%.6eï¼›è®¡ç®—æ–¹æ³•ä¸ºï¼š123456.789 = 1.23456789 * 10^5 = 1.23456789e5ï¼Œåˆå› ä¸ºæ˜¯ä¿ç•™6ä½å°æ•°ï¼Œæ‰€ä»¥1.234568</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%e\n&quot;</span><span class="token punctuation">,</span> <span class="token number">123456.789</span><span class="token punctuation">)</span>                  </span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŒ‡é’ˆ</span></span>
<span class="line">	a <span class="token operator">:=</span> <span class="token number">1</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">//0xc0000181c0</span></span>
<span class="line">	<span class="token comment">//c0000181c0</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¸ƒå°”å€¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%t\n&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰fmt.Printfï¼šå¤šè¿›åº¦æ¡å®ç°åŸç†</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">	PreviousLineClear <span class="token operator">=</span> <span class="token string">&quot;\033[F&quot;</span> <span class="token comment">// å…‰æ ‡å›åˆ°ä¸Šä¸€è¡Œè¡Œé¦–å¹¶æ¸…ç©ºè¡Œ</span></span>
<span class="line">	CurrentLineClear  <span class="token operator">=</span> <span class="token string">&quot;\033[K&quot;</span> <span class="token comment">// å…‰æ ‡å›åˆ°å½“å‰è¡Œè¡Œé¦–å¹¶æ¸…ç©ºè¡Œ</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">11</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> i <span class="token operator">!=</span> <span class="token number">11</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>PreviousLineClear<span class="token punctuation">)</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>PreviousLineClear<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%d\n&quot;</span><span class="token punctuation">,</span> CurrentLineClear<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%d\n&quot;</span><span class="token punctuation">,</span> CurrentLineClear<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰fmt.Printfï¼šåŠ¨æ€æŒ‡å®šå®½åº¦</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;|%-10s|\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>    <span class="token comment">// å·¦å¯¹é½ï¼Œå¹¶æŒ‡å®šå®½åº¦ä¸º10</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;|%-*s|\n&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span> <span class="token comment">// å·¦å¯¹é½ï¼Œå¹¶åŠ¨æ€æŒ‡å®šå®½åº¦ä¸º20</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token operator">|</span>Hello World<span class="token operator">!</span><span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>Hello World<span class="token operator">!</span>        <span class="token operator">|</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ6ï¼‰fmt.Printfï¼šä½ç½®å¼•ç”¨</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s %s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>             <span class="token comment">// æ­£å¸¸çš„ä½¿ç”¨æ–¹æ³•</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%[2]s %[1]s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>       <span class="token comment">// [2]å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡, [1]å¼•ç”¨ç¬¬ä¸€ä¸ªå˜é‡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%[2]s %[2]s %[2]s\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token comment">// å¤šæ¬¡å¼•ç”¨æ²¡æœ‰é—®é¢˜</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line"><span class="token number">1</span> <span class="token number">2</span></span>
<span class="line"><span class="token number">2</span> <span class="token number">1</span></span>
<span class="line"><span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ7ï¼‰fmt.Fscanfï¼šæ¥æ”¶ç”¨æˆ·è¾“å…¥</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Enter your name: &quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// ä»os.Stdinè¯»å–, formatæŒ‡å®šæ•°æ®æ ¼å¼, å¹¶èµ‹å€¼ç»™ æŒ‡é’ˆå˜é‡</span></span>
<span class="line">		<span class="token keyword">var</span> name <span class="token builtin">string</span></span>
<span class="line">		<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Fscanf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">,</span> <span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>name<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">continue</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">break</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">Enter your name:		  <span class="token comment"># ç›´æ¥è¾“å…¥ç©ºæ ¼, ä¼šæŠ¥é”™, é‡æ–°å¾ªç¯</span></span>
<span class="line">Enter your name: zhangsan <span class="token comment"># è¾“å…¥, å¹¶æŒ‰å›è½¦</span></span>
<span class="line">zhangsan                  <span class="token comment"># è¾“å‡º, è·³å‡ºå¾ªç¯</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="os-åŸºç¡€æ–‡ä»¶è¯»å†™" tabindex="-1"><a class="header-anchor" href="#os-åŸºç¡€æ–‡ä»¶è¯»å†™"><span><code>os</code>ï¼šåŸºç¡€æ–‡ä»¶è¯»å†™</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/os" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/os</a></p><br><p><strong>ä¸€ã€åŸºç¡€å‡½æ•°</strong></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æ‰“å¼€æ–‡ä»¶çš„ä¸‰ç§æ–¹å¼</summary><p>æ–¹å¼ä¸€ï¼š<code>OpenFile</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// OpenFile(name string, flag int, perm FileMode) (*File, error)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// flagé€‰é¡¹</span></span>
<span class="line"><span class="token comment">//	(1)æ‰“å¼€æ¨¡å¼ï¼ˆå¿…é¡»æŒ‡å®šå…¶ä¸€ï¼‰</span></span>
<span class="line"><span class="token comment">//		os.O_RDONLY         ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶       å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span>
<span class="line"><span class="token comment">//		os.O_WRONLY         ä»¥åªå†™æ–¹å¼æ‰“å¼€          å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span>
<span class="line"><span class="token comment">//		os.O_RDWR           ä»¥è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶       å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span>
<span class="line"><span class="token comment">//	(2)è¾…åŠ©æ§åˆ¶è¡Œä¸º</span></span>
<span class="line"><span class="token comment">//		os.O_APPEND         è¿½åŠ æ–¹å¼å†™å…¥</span></span>
<span class="line"><span class="token comment">//		os.O_CREATE         æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼›Windowsç³»ç»Ÿè¯¥å±æ€§ä¼šè‡ªå¸¦å†™å±æ€§                                          </span></span>
<span class="line"><span class="token comment">//		os.O_EXCL           æ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨ï¼›ä½¿ç”¨åœºæ™¯æ¯”å¦‚ï¼šåªå…è®¸è¿›ç¨‹æ‰“å¼€è‡ªå·±çš„æ–‡ä»¶ æˆ– å¤šè¿›ç¨‹è¿è¡Œæ—¶é€€å‡ºï¼Œåªå…è®¸å•è¿›ç¨‹è¿è¡Œ</span></span>
<span class="line"><span class="token comment">//		os.O_TRUNC          æ–‡ä»¶å­˜åœ¨åˆ™æˆªæ–­ï¼ˆæ¸…ç©ºå†…å®¹ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¸¸ç”¨flagç»„åˆé€‰é¡¹</span></span>
<span class="line"><span class="token comment">//	è¯»æ–‡ä»¶</span></span>
<span class="line"><span class="token comment">//		os.O_RDONLY                             è¯»æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span>
<span class="line"><span class="token comment">//	å†™æ–‡ä»¶</span></span>
<span class="line"><span class="token comment">//		os.O_RDWR | os.O_CREATE                 å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶</span></span>
<span class="line"><span class="token comment">//		os.O_RDWR | os.O_CREATE | os.O_APPEND   å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶è¿½åŠ å†…å®¹</span></span>
<span class="line"><span class="token comment">//		os.O_RDWR | os.O_CREATE | os.O_TRUNC    å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶æ¸…ç©ºæ–‡ä»¶å†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// permé€‰é¡¹</span></span>
<span class="line"><span class="token comment">// 	æ–‡ä»¶æƒé™</span></span>
<span class="line"><span class="token comment">//	(1)åªæœ‰åœ¨åˆ›å»ºæ–‡ä»¶æ—¶æ‰æœ‰ç”¨ï¼Œå½“ä¸éœ€è¦åˆ›å»ºæ–‡ä»¶æ—¶å¯ä»¥è®¾ç½®ä¸º0</span></span>
<span class="line"><span class="token comment">//	(2)å†…ç½®å¸¸é‡os.ModePerm = 0777</span></span>
<span class="line"></span></code></pre></div><p>æ–¹å¼äºŒï¼š<code>Open</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">Open</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> O_RDONLY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ ¸å¿ƒä¸ºOpenFileï¼Œä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</span></span>
<span class="line"></span></code></pre></div><p>æ–¹å¼ä¸‰ï¼š<code>Create</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">Create</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> O_RDWR<span class="token operator">|</span>O_CREATE<span class="token operator">|</span>O_TRUNC<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ ¸å¿ƒä¸ºOpenFileï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶ä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span class="token comment">// ä½¿ç”¨æ—¶å¤šåŠ æ³¨æ„ï¼Œä¸è¦è¯¯æ¸…ç©ºäº†æ–‡ä»¶å†…å®¹!!!</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œå‡½æ•°</summary><table><thead><tr><th>åˆ†ç±»</th><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ›å»ºä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•</td><td><code>CreateTemp(dir, pattern string) (*File, error)</code></td><td>åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œè¿”å›ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„<br>ï¼ˆ1ï¼‰<code>dir</code>æŒ‡å®šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶ç›®å½•ï¼Œä¸ºç©ºä¼šä½¿ç”¨ç”¨æˆ·é»˜è®¤ä¸´æ—¶ç›®å½•<br>ï¼ˆ2ï¼‰<code>pattern </code>æŒ‡å®šæ–‡ä»¶åå‰ç¼€ï¼Œå¦‚æœåŒ…å«<code>*</code>ï¼Œé‚£ä¹ˆä»£æŒ‡æ•´ä¸ªæ–‡ä»¶åï¼Œ<br><code>*</code>è¢«æ›¿æ¢ä¸ºéšæœºå­—ç¬¦ä¸²</td></tr><tr><td></td><td><code>MkdirTemp(dir, pattern string) (string, error)</code></td><td>åŒä¸Šï¼Œåªä¸è¿‡åˆ›å»ºçš„æ˜¯ä¸´æ—¶ç›®å½•</td></tr><tr><td>åˆ›å»ºç›®å½•</td><td><code>Mkdir(name string, perm FileMode) error</code></td><td>åˆ›å»ºç›®å½•ï¼›<br>ï¼ˆ1ï¼‰ä¸æ”¯æŒåˆ›å»ºå¤šçº§ç›®å½•<br>ï¼ˆ2ï¼‰ç›®å½•å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td></tr><tr><td></td><td><code>MkdirAll(path string, perm FileMode) error</code></td><td>åˆ›å»ºç›®å½•<br>ï¼ˆ1ï¼‰æ”¯æŒåˆ›å»ºå¤šçº§ç›®å½•<br>ï¼ˆ2ï¼‰ç›®å½•å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td></tr><tr><td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</td><td><code>Remove(name string) error</code></td><td>åˆ é™¤æ–‡ä»¶æˆ–ç©ºç›®å½•ï¼Œä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td></tr><tr><td></td><td><code>RemoveAll(path string) error</code></td><td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼Œæ”¯æŒéç©ºç›®å½•ï¼Œä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td></tr><tr><td>é‡å‘½å</td><td><code>Rename(oldpath, newpath string) error</code></td><td>æ–‡ä»¶æˆ–ç›®å½•é‡å‘½å</td></tr><tr><td>æ–‡ä»¶è¯¦æƒ…</td><td><code>Stat(name string) (FileInfo, error)</code></td><td>è·å–æ–‡ä»¶è¯¦æƒ…</td></tr><tr><td></td><td><code>Lstat(name string) (FileInfo, error)</code></td><td>åŒä¸Šï¼ŒåŒºåˆ«æ˜¯å¯¹äºé“¾æ¥æ–‡ä»¶ï¼Œ<code>Stat</code>å…·æœ‰ç©¿é€èƒ½åŠ›è€Œ<code>Lstat</code>æ²¡æœ‰</td></tr><tr><td>åˆ¤æ–­æ˜¯å“ªç§é”™è¯¯</td><td><code>IsExist(err error) bool</code></td><td>æ˜¯å¦æ˜¯æ–‡ä»¶å­˜åœ¨é”™è¯¯</td></tr><tr><td></td><td><code>IsNotExist(err error) bool</code></td><td>æ˜¯å¦æ˜¯æ–‡ä»¶ä¸å­˜åœ¨é”™è¯¯</td></tr><tr><td></td><td><code>IsPermission(err error) bool</code></td><td>æ˜¯å¦æ˜¯æƒé™é”™è¯¯</td></tr><tr><td></td><td><code>IsTimeout(err error) bool</code></td><td>æ˜¯å¦æ˜¯è¶…æ—¶é”™è¯¯</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">PathExists</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Stat</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">if</span> os<span class="token punctuation">.</span><span class="token function">IsNotExist</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> err</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> path <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;main.go&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;go.mod&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test.log&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:\\Windows&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> exists<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">PathExists</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s exist: %t\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> exists<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s exist: %t\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token string">&quot;unknown&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">main.go exist: <span class="token boolean">true</span></span>
<span class="line">go.mod exist: <span class="token boolean">true</span>    </span>
<span class="line">test.log exist: <span class="token boolean">false</span> </span>
<span class="line">C:<span class="token punctuation">\</span>Windows exist: <span class="token boolean">true</span></span>
<span class="line"></span></code></pre></div></details><br><p><strong>äºŒã€å†™å…¥æ•°æ®</strong></p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©ºå†…å®¹ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;test.log&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">,</span> <span class="token number">0777</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Open file error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥å†…å®¹ - å­—èŠ‚</span></span>
<span class="line">	byteLine <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;äººä¹‹åˆï¼Œæ€§æœ¬å–„ã€‚æ€§ç›¸è¿‘ï¼Œä¹ ç›¸è¿œã€‚&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	byteLine <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>byteLine<span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>byteLine<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Write error: %s&quot;</span><span class="token punctuation">,</span> byteLine<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥å†…å®¹ - å­—ç¬¦ä¸²</span></span>
<span class="line">	stringLine <span class="token operator">:=</span> <span class="token string">&quot;è‹Ÿä¸æ•™ï¼Œæ€§ä¹ƒè¿ã€‚æ•™ä¹‹é“ï¼Œè´µä»¥ä¸“ã€‚&quot;</span></span>
<span class="line">	stringLine <span class="token operator">=</span> stringLine <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>stringLine<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Write error: %s&quot;</span><span class="token punctuation">,</span> stringLine<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è·å–æ–‡ä»¶æŒ‡é’ˆä½ç½® (ä»å½“å‰ä½ç½®å¼€å§‹ï¼Œåç§»ä¸º0çš„ä½ç½®)</span></span>
<span class="line">	currentSeek<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekCurrent<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Get file current seek error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨æŒ‡é’ˆå†™å…¥ï¼ˆå†™å…¥çš„é•¿åº¦ä¼šå°†æŒ‡é’ˆåé¢çš„å†…å®¹è¦†ç›–ï¼‰</span></span>
<span class="line">	<span class="token comment">// è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨â€æ–°â€œæ›¿æ¢æ‰â€è´µä»¥ä¸“ã€‚â€œä¸­çš„â€è´µâ€œ,æ€è·¯å°±æ˜¯æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°â€è´µâ€œå­—ä¸Šï¼Œç„¶åæ›¿æ¢å³å¯</span></span>
<span class="line">	<span class="token comment">// åç§»é‡è®¡ç®—ï¼š1(&#39;\n&#39;) + 12(&quot;è´µæ–°ä¸“ã€‚&quot;ï¼Œä¸€ä¸ªæ±‰å­—3ä¸ªå­—èŠ‚ï¼Œæ³¨æ„è¿™é‡Œçš„å¥å·æ˜¯ä¸­æ–‡çš„ï¼Œä¹Ÿè®¡ç®—åœ¨æ±‰å­—é‡Œé¢) = 13</span></span>
<span class="line">	seekRune <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;æ–°&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">WriteAt</span><span class="token punctuation">(</span>seekRune<span class="token punctuation">,</span> currentSeek<span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Write error: %s&quot;</span><span class="token punctuation">,</span> byteLine<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><p><strong>ä¸‰ã€è¯»å–æ•°æ®</strong></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŒ‰å­—èŠ‚ä»æ–‡ä»¶å¼€å§‹è¯»å–æ•°æ®</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	fileName <span class="token operator">:=</span> <span class="token string">&quot;test.log&quot;</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶ä¸å­˜åœ¨: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¾ªç¯è¯»å–æ–‡ä»¶</span></span>
<span class="line">	buffer <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// å¤„ç†æ•°æ®</span></span>
<span class="line">		<span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> buffer<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// æ³¨æ„è¿™é‡Œ[:n]</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥è¯»å–ä¸‹ä¸€è¡Œ</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">continue</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// æ–‡ä»¶è¯»å–å®Œæˆ</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">break</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// æ–‡ä»¶è¯»å–å¤±è´¥</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶è¯»å–å¤±è´¥: %s:%s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŒ‰å­—èŠ‚ä»æ–‡ä»¶ä»»æ„ä½ç½®è¯»å–æ•°æ®</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	fileName <span class="token operator">:=</span> <span class="token string">&quot;test.log&quot;</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶ä¸å­˜åœ¨: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è·å–æ–‡ä»¶æŒ‡é’ˆ(æœ«å°¾)</span></span>
<span class="line">	seekEnd<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekEnd<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;File seek error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ReadAtè¯»å–</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line">	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">ReadAt</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> seekEnd<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// è¯»å–æ–‡ä»¶æœ«å°¾çš„4ä¸ªå­—èŠ‚ï¼Œæ¢è¡Œç¬¦1ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡1ä¸ªå­—èŠ‚</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;File readat error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ReadAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰è¯»å–ä¸­æ–‡ä¹±ç é—®é¢˜</summary><p>ä¸€ä¸ªä¸­æ–‡å 3ä¸ªå­—èŠ‚ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„ä½¿ç”¨<code>Read</code>æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;unicode/utf8&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç”Ÿæˆæ•°æ®</span></span>
<span class="line">	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">170</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸­&quot;</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;å›½&quot;</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥æ–‡ä»¶</span></span>
<span class="line">	err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> data<span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadByte</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// æ˜¾ç¤ºæ•°æ®,æœ€åä¸€ä¸ªä¸­æ–‡æ˜¾ç¤ºä¹±ç </span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// æ£€æµ‹åˆ‡ç‰‡[]byteæ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—ï¼ˆä¸èƒ½æœ‰ä¹±ç ï¼‰</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: %t\n&quot;</span><span class="token punctuation">,</span> utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadAllByte</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	data<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadByRune</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">rune</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		r<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token comment">//log.Printf(&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;, fileName, size)</span></span>
<span class="line">		data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> r<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// æ˜¾ç¤ºæ•°æ®</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadByteBySeek</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	<span class="token keyword">var</span> bufsize <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">512</span></span>
<span class="line">	oldSize <span class="token operator">:=</span> bufsize</span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bufsize<span class="token punctuation">)</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// éå®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token operator">!</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// æŒ‡é’ˆå›é€€</span></span>
<span class="line">			<span class="token keyword">if</span> ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">*</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekCurrent<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">,</span> ret<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token comment">// bufå­—èŠ‚æ•°+1</span></span>
<span class="line">			bufsize<span class="token operator">++</span></span>
<span class="line"></span>
<span class="line">			<span class="token keyword">continue</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// å®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">		bufsize <span class="token operator">=</span> oldSize</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadByteNoSeek</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	lastLeft <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ä¸Šæ¬¡è¯»å–ç•™ä¸‹æ¥çš„ä¸å®Œæ•´çš„å­—èŠ‚åˆ‡ç‰‡</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// ä¸ä¸Šæ¬¡è¯»å–é—ç•™å­—èŠ‚åˆå¹¶</span></span>
<span class="line">		buf <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>lastLeft<span class="token punctuation">,</span> buf<span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line">		n <span class="token operator">+=</span> <span class="token function">len</span><span class="token punctuation">(</span>lastLeft<span class="token punctuation">)</span></span>
<span class="line">		lastLeft <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// é‡æ–°åˆå§‹åŒ–</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// æ£€æŸ¥åºåˆ—å®Œæ•´æ€§</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			lastByte <span class="token operator">:=</span> buf<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">			lastLeft <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span>lastByte<span class="token punctuation">}</span><span class="token punctuation">,</span> lastLeft<span class="token operator">...</span><span class="token punctuation">)</span></span>
<span class="line">			n<span class="token operator">--</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// å®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fileName <span class="token operator">:=</span> <span class="token string">&quot;test.log&quot;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------ å†™å…¥æ•°æ® ---------------------&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŒ‰å­—èŠ‚è¯»æ•°æ®(ä¼šè¯»åˆ°ä¹±ç )</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\n------------------ æŒ‰å­—èŠ‚è¯»æ•°æ®(ä¼šè¯»åˆ°ä¹±ç ) ---------------------&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadByte</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­</span></span>
<span class="line">	<span class="token comment">// ç¼ºç‚¹ï¼šå†…å­˜å ç”¨è¿‡å¤§ï¼Œä¸é€‚ç”¨å¤§æ–‡ä»¶</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\n------------------ è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­ ---------------------&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadAllByte</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeè¯»å–æ–‡ä»¶</span></span>
<span class="line">	<span class="token comment">// ç¼ºç‚¹ï¼šä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„è¯»ï¼Œæ•ˆç‡å¤ªä½</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\n------------------ è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeæ–¹å¼è¯»å– ---------------------&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadByRune</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»å–ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å°</span></span>
<span class="line">	<span class="token comment">// ç¼ºç‚¹ï¼šéœ€è¦é€šè¿‡SeekæŒ‡é’ˆæ“ä½œ</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\n- è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»æ•°æ®ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å° -&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadByteBySeek</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£å†³æ–¹æ¡ˆ4ï¼šæŒ‰å­—èŠ‚è¯»å–ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—ï¼Œé‚£ä¹ˆå°†å­—èŠ‚åˆ‡ç‰‡åˆ†å‰²ï¼Œåªæ˜¯ç”¨å®Œæ•´çš„UTF8åºåˆ—ï¼Œä¹±ç éƒ¨åˆ†ä¸ä¸‹ä¸€æ¬¡è¯»å–è¿æ¥èµ·æ¥</span></span>
<span class="line">	<span class="token comment">// ç¼ºç‚¹ï¼šä»£ç æ¯”è¾ƒå¤æ‚</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;\n------- è§£å†³æ–¹æ¡ˆ4ï¼šå­—èŠ‚åˆ†å‰²ä¸é‡ç»„è¯»æ³•ï¼ˆä¸Readè¡¨ç°ä¸€è‡´ï¼‰ ----------&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadByteNoSeek</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">------------------ å†™å…¥æ•°æ® ---------------------</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 å†™å…¥æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes</span>
<span class="line"></span>
<span class="line">------------------ æŒ‰å­—èŠ‚è¯»æ•°æ®<span class="token punctuation">(</span>ä¼šè¯»åˆ°ä¹±ç <span class="token punctuation">)</span> ---------------------</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">512</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ï¿½ï¿½</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: <span class="token boolean">false</span></span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">1</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ï¿½</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">------------------ è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­ ---------------------      </span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½</span>
<span class="line"></span>
<span class="line">------------------ è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeæ–¹å¼è¯»å– ---------------------</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½</span>
<span class="line"></span>
<span class="line">- è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»æ•°æ®ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å° -</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½</span>
<span class="line"></span>
<span class="line">------- è§£å†³æ–¹æ¡ˆ4ï¼šå­—èŠ‚åˆ†å‰²ä¸é‡ç»„è¯»æ³•ï¼ˆä¸Readè¡¨ç°ä¸€è‡´ï¼‰ ----------</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">510</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line">ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">3</span> bytes</span>
<span class="line"><span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: å›½</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æŒ‰è¡Œè¯»å–ä»»ä½•æ–‡æœ¬æ–‡ä»¶</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;main.go&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token boolean">_</span> <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å†²çš„è¯»å–å™¨</span></span>
<span class="line">	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		line<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">break</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token comment">// å»é™¤æ¢è¡Œç¬¦</span></span>
<span class="line">		line <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">TrimRight</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰è¯»å†™å¿«æ·å‡½æ•°</summary><p><code>os.WriteFile</code>å’Œ<code>os.ReadFile</code>åº•å±‚è°ƒç”¨çš„æ˜¯<code>OpenFile</code>ï¼Œä¸€æ¬¡æ€§åŠ è½½æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œé€‚åˆè¯»å–å°æ–‡ä»¶ï¼Œå¤§æ–‡ä»¶æœ‰æ’‘çˆ†å†…å­˜çš„é£é™©</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å†™å…¥æ–‡ä»¶</span></span>
<span class="line">	writeFileName <span class="token operator">:=</span> <span class="token string">&quot;test.log&quot;</span></span>
<span class="line">	err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>writeFileName<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, è¿™é‡Œæ˜¯æµ‹è¯•æ—¥å¿—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æ–‡ä»¶å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> writeFileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æ–‡ä»¶æˆåŠŸ: %s\n&quot;</span><span class="token punctuation">,</span> writeFileName<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å‡½æ•°æºç å¦‚ä¸‹ï¼š</span></span>
<span class="line">	<span class="token comment">//func WriteFile(name string, data []byte, perm FileMode) error {</span></span>
<span class="line">	<span class="token comment">//	f, err := OpenFile(name, O_WRONLY|O_CREATE|O_TRUNC, perm)</span></span>
<span class="line">	<span class="token comment">//	if err != nil {</span></span>
<span class="line">	<span class="token comment">//	return err</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line">	<span class="token comment">//	_, err = f.Write(data)</span></span>
<span class="line">	<span class="token comment">//	if err1 := f.Close(); err1 != nil &amp;&amp; err == nil {</span></span>
<span class="line">	<span class="token comment">//	err = err1</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line">	<span class="token comment">//	return err</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line">	<span class="token comment">// å¯ä»¥çœ‹åˆ°ï¼Œ(1)è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ (2)æ–‡ä»¶è‹¥ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º (3)æ–‡ä»¶è‹¥å­˜åœ¨åˆ™ä¼šæˆªæ–­(æ¸…ç©ºå†…å®¹)ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°å‰éœ€è¦å°å¿ƒä¸€äº›</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ–‡ä»¶</span></span>
<span class="line">	readFileName <span class="token operator">:=</span> <span class="token string">&quot;D:\\iso\\CentOS-7-x86_64-DVD-1708.iso&quot;</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹è¯»å–æ–‡ä»¶: %s\n&quot;</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">)</span></span>
<span class="line">	buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>readFileName<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s\n&quot;</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n&quot;</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// æŸ¥çœ‹æºç å¯ä»¥çœ‹åˆ°ï¼Œ</span></span>
<span class="line">	<span class="token comment">//		(1)ä½¿ç”¨Openæ‰“å¼€æ–‡ä»¶</span></span>
<span class="line">	<span class="token comment">//		(2)å½“æ–‡ä»¶å¤§å°(int64ç±»å‹)èƒ½æ­£å¸¸è½¬ä¸ºintç±»å‹æ—¶ï¼Œbufå°±å–è¿™ä¸ªå€¼ï¼›å¦åˆ™bufè®¾ç½®ä¸º512</span></span>
<span class="line">	<span class="token comment">//		   intæœ€å¤§å€¼è½¬ä¸ºGBæ˜¯å¤šå°‘å‘¢ï¼Ÿ math.MaxInt / 1024 / 1024 / 1024 = 8589934591</span></span>
<span class="line">	<span class="token comment">//		   å½“æ–‡ä»¶å°äº8589934591GBæ—¶ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­</span></span>
<span class="line">	<span class="token comment">// 		   æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±ç­‰åŒäºå°†æ–‡ä»¶ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ï¼Œè¯·ç¡®ä¿å†…å­˜å……è¶³..</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2022</span>/04/24 <span class="token number">14</span>:30:58 å†™å…¥æ–‡ä»¶æˆåŠŸ: test.log</span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">14</span>:30:58 å¼€å§‹è¯»å–æ–‡ä»¶: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso</span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">14</span>:31:00 è¯»å–æ–‡ä»¶æˆåŠŸ: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso: <span class="token number">4521459712</span> bytes</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¯ä»¥çœ‹åˆ°ï¼Œ4ä¸ªå¤šGçš„æ–‡ä»¶2ç§’é’Ÿè¯»å®Œäº†</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="io-ioåŸºæœ¬æ¥å£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#io-ioåŸºæœ¬æ¥å£å®šä¹‰"><span><code>io</code>ï¼šIOåŸºæœ¬æ¥å£å®šä¹‰</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/io" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/io</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ReaderåŸºæœ¬æ¥å£</summary><p><strong>1ã€Readerå®šä¹‰</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// io.Reader</span></span>
<span class="line"><span class="token keyword">type</span> Reader <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Read</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>æ ¹æ®æ¥å£å®šä¹‰å¾—åˆ°çš„ä¿¡æ¯ï¼šè¯»å–æ•°æ®å¹¶å¡«å……åˆ°<code>p</code>ä¸­ï¼Œæœ€å¤šå¡«å……<code>len(p)</code>ä¸ªå­—èŠ‚ï¼›è¿”å›å®é™…è¯»å–åˆ°çš„å­—èŠ‚æ•°<code>n</code>å’Œ<code>error</code></p><p><strong>2ã€Readerè¯»å–è§„åˆ™</strong></p><p>ï¼ˆ1ï¼‰è¯»å–æˆåŠŸï¼Œæ•°æ®å…¨éƒ¨å¡«å……è‡³<code>p</code>ï¼Œæ­¤æ—¶æœ‰<code> n == len(p)</code>ã€<code>err == nil</code></p><p>ï¼ˆ2ï¼‰è¯»å–å¤±è´¥ï¼Œæ­¤æ—¶æœ‰<code>err != nil</code>ï¼Œ<code>err</code>ä»£è¡¨å…·ä½“çš„é”™è¯¯</p><p>ï¼ˆ3ï¼‰è¯»åˆ°<code>EOF</code>ï¼Œæ­¤æ—¶æ”¯æŒä»¥ä¸‹ä¸¤ç§å¤„ç†æƒ…å†µï¼š</p><p>â€‹ â‘  è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°nï¼Œå°†<code>err</code>è®¾ç½®ä¸º<code>EOF</code>ï¼ˆæ¨èï¼‰</p><p>â€‹ â‘¡ è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°nï¼Œå°†<code>err</code>è®¾ç½®ä¸º<code>nil</code>ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œåœ¨ä¸‹ä¸€æ¬¡è¯»å–æ—¶éœ€è¦è¿”å›<code>n == 0, err == nil</code>ï¼ˆä¸æ¨èï¼‰</p><p>ï¼ˆ4ï¼‰<span style="color:blue;font-weight:bold;">å…è®¸æ•°æ®æ²¡å…¨éƒ¨å‡†å¤‡å¥½æ—¶ï¼Œè¿”å›éƒ¨åˆ†æ•°æ®ï¼Œæ­¤æ—¶æœ‰<code>p</code>å°šæœªå¡«å……æ»¡ï¼ŒåŒæ—¶<code>err == nil</code></span>ï¼ˆè¿™ç§æƒ…å†µè¦å°å¿ƒï¼Œå¯èƒ½å†™ä»£ç ä¼šå‡ºç°ä¸€äº›å‘ï¼‰</p><p><strong>3ã€Readeræ¥å£çš„å‡ ç§å®ç°</strong></p><table><thead><tr><th>ç»“æ„ä½“/æ¥å£</th><th>å…·ä½“å®ç°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ä»æ–‡ä»¶ä¸­è¯»ï¼š<br><code>os.File</code>ç»“æ„ä½“</td><td><code>os.OpenFile()</code></td><td>æ–‡ä»¶è¯»å–</td></tr><tr><td></td><td><code>os.Stdin</code>/<code>os.Stdout</code>/<code>os.Stderr</code></td><td>ä¸»è¦ä¸ºæ ‡å‡†è¾“å…¥è¯»å–<code>Stdin</code></td></tr><tr><td>ä»å­—ç¬¦ä¸²ä¸­è¯»ï¼š<br><code>strings.Reader</code>ç»“æ„ä½“</td><td><code>strings.NewReader()</code></td><td><code>Reader</code>æ¥å£ï¼šæœ¬è´¨æ˜¯è°ƒç”¨å†…ç½®å‡½æ•°<code>copy</code>ï¼Œæ— æ³•è¯»å–ä¸­æ–‡<br><code>RuneReader</code>æ¥å£ï¼šæœ¬è´¨æ˜¯æŒ‰å­—èŠ‚éå†ï¼Œå¦‚æœå­—èŠ‚åœ¨ASCIIç èŒƒå›´å†…<br>åˆ™ä½¿ç”¨<code>rune</code>åŒ…è£…ä¸€ä¸‹è¿”å›ï¼Œå¦åˆ™è°ƒç”¨<code>utf8.DecodeRuneInString</code>è§£ç å‡ºç¬¬ä¸€ä¸ª<code>Rune</code>å¹¶è¿”å›</td></tr><tr><td>ä»å­—èŠ‚ä¸­è¯»ï¼š<br><code>bytes.Reader</code>ç»“æ„ä½“</td><td><code>bytes.NewReader()</code></td><td>ç±»ä¼¼äº<code>strings.Reader</code>ç»“æ„ä½“</td></tr><tr><td>ä»ç¼“å†²ä¸­è¯»ï¼š<br><code>bytes.Buffer</code>ç»“æ„ä½“<br><code>bufio.Reader</code>ç»“æ„ä½“</td><td>è¯¦ç»†ä»‹ç»è§åé¢ç« èŠ‚</td><td>è¯¦ç»†ä»‹ç»è§åé¢ç« èŠ‚</td></tr><tr><td>ä»ç½‘ç»œè¿æ¥ä¸­è¯»ï¼š<br><code>net.Conn</code>æ¥å£</td><td>ä»¥åè¡¥å……</td><td>ä»¥åè¡¥å……</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰Readeræ–¹æ³•ä½¿ç”¨</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadFromStdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è¯»å–è¾“å…¥</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s è¯·è¾“å…¥åå­—ï¼š&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006/01/02 15:04:05&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span>Stdin<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// è§£æè¾“å…¥</span></span>
<span class="line">		name <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// åˆ¤æ–­è¾“å…¥æ˜¯å¦åˆæ³•</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ‚¨çš„åå­—ä¸º: %s&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">break</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	reader <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">continue</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">break</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;read error&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">ReadRuneFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	reader <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">&quot;aä½ å¥½&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		r<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ReadFromStdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">ReadRuneFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:13 è¯·è¾“å…¥åå­—ï¼šæ„¤æ€’çš„è¥¿ç“œ</span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 æ‚¨çš„åå­—ä¸º: æ„¤æ€’çš„è¥¿ç“œ</span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 hello world<span class="token operator">!</span></span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 a</span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 ä½ </span>
<span class="line"><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 å¥½</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰Readerå…¶ä»–æ¥å£</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// è¯»å–ä¸€æ¬¡è¿”å›ä¸€ä¸ªå­—èŠ‚</span></span>
<span class="line"><span class="token keyword">type</span> ByteReader <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯»å–ä¸€æ¬¡è¿”å›ä¸€ä¸ªRune</span></span>
<span class="line"><span class="token keyword">type</span> RuneReader <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">,</span> size <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¯ä»¥ä»æŒ‡å®šä½ç½®(å­—èŠ‚)å¤„è¯»å–</span></span>
<span class="line"><span class="token keyword">type</span> ReaderAt <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ReadAt</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> off <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰Readerå°è£…å‡½æ•°</summary><table><thead><tr><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>func ReadAll(r Reader) ([]byte, error)</code></td><td>ä»<code>Reader</code>ä¸­è¯»å®Œæ‰€æœ‰æ•°æ®å†è¿”å›ï¼Œå½“æ–‡ä»¶è¿‡å¤§æ—¶æœ‰æ’‘çˆ†å†…å­˜çš„é£é™©</td></tr><tr><td><code>func ReadFull(r Reader, buf []byte) (n int, err error)</code></td><td>è¯»æ»¡ç¼“å†²åŒºå†è¿”å›ï¼Œæœªè¯»æ»¡ç¼“å†²åŒºï¼ˆå³ä½¿è¯»åˆ°<code>EOF</code>ï¼‰ä¹Ÿä¼šè¿”å›é”™è¯¯</td></tr><tr><td><code>func ReadAtLeast(r Reader, buf []byte, min int) (n int, err error)</code></td><td>æœ€å°‘è¦è¯»<code>min</code>ä¸ªå­—èŠ‚ï¼Œå³ä½¿è¯»åˆ°<code>EOF</code>ä¹Ÿä¼šè¿”å›é”™è¯¯</td></tr><tr><td><code>func LimitReader(r Reader, n int64) Reader</code></td><td>è¿”å›ä¸€ä¸ªæ–°<code>Reader</code>ï¼Œè¯¥<code>Reader</code>æœ€å¤šåªèƒ½è¯»å–<code>n</code>ä¸ªå­—èŠ‚ï¼ˆåç§»ä¸º0ï¼‰</td></tr><tr><td><code>func NewSectionReader(r ReaderAt, off int64, n int64) *SectionReader</code></td><td>è¿”å›ä¸€ä¸ªæ–°<code>Reader</code>ï¼Œè¯¥<code>Reader</code>æœ€å¤šåªèƒ½è¯»å–<code>n</code>ä¸ªå­—èŠ‚ï¼ˆåç§»ä¸º<code>off</code>ï¼‰</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰Writerå’ŒCloseræ¥å£</summary><p><strong>æ¥å£å®šä¹‰</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">type</span> Writer <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Write</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Closer <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ6ï¼‰Readerå’ŒWriterå¤åˆå‡½æ•°</summary><p><strong>io.Copyç³»åˆ—</strong></p><p>ï¼ˆ1ï¼‰<code>func Copy(dst Writer, src Reader) (written int64, err error)</code></p><p>ä¸»è¦åŠŸèƒ½ä¸ºï¼šä»<code>Reader</code>ä¸­è¯»å–ï¼Œå¹¶å†™å…¥åˆ°<code>Writer</code>ä¸­ï¼Œè¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œé”™è¯¯</p><blockquote><p>å®ç°çš„ç»†èŠ‚ï¼š</p><ol><li>å¦‚æœ<code>src</code>å®ç°äº†<code>WriteTo</code>æ¥å£ï¼Œé‚£ä¹ˆå°±è°ƒç”¨<code>src.WriteTo(dst)</code>æ–¹æ³•</li><li>å¦‚æœ<code>dst</code>å®ç°äº†<code>ReaderFrom</code>æ¥å£ï¼Œé‚£ä¹ˆå°±è°ƒç”¨<code>dst.ReadFrom(src)</code>æ–¹æ³•</li><li>å¦‚æœä»¥ä¸Šä¸¤ä¸ªæ¥å£éƒ½æ²¡å®ç°ï¼Œé‚£ä¹ˆå°±ä»<code>src</code>è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºå†å†™å…¥<code>Writer</code></li><li>å¦‚æœ<code>src</code>æ˜¯<code>*LimitedReader</code>ç»“æ„ä½“ï¼Œé‚£ä¹ˆ<code>buffer</code>å¤§å°è®¾å®šä¸ºè§„å®šçš„å¤§å°ï¼Œå¦åˆ™è®¾ç½®ä¸º<code>32KB</code></li></ol></blockquote><p>ï¼ˆ2ï¼‰<code>func CopyBuffer(dst Writer, src Reader, buf []byte) (written int64, err error)</code></p><p>ä¸<code>io.Copy</code>ä¸åŒçš„åœ°æ–¹åœ¨äºå¯ä»¥è‡ªå®šä¹‰<code>buffer</code>å¤§å°çš„<code>Copy</code>ï¼Œä½†æ˜¯è¯·æ³¨æ„åªæœ‰åœ¨<code>src.WriteTo</code>å’Œ<code>dst.ReadFrom</code>éƒ½æ²¡æœ‰å®ç°çš„æƒ…å†µä¸‹ç”Ÿæ•ˆ</p><p>ï¼ˆ3ï¼‰<code>func CopyN(dst Writer, src Reader, n int64) (written int64, err error)</code></p><p>åªæ‹·è´Nä¸ªå­—èŠ‚ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡<code>LimitReader</code>æ¥é™åˆ¶<code>Reader</code>æ‰€èƒ½è¯»å–çš„å­—èŠ‚æ•°</p><p><strong>io.Pipe</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>PipeReader<span class="token punctuation">,</span> <span class="token operator">*</span>PipeWriter<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><ul><li>ä»wä¸­å†™å…¥ï¼Œä»rä¸­è¯»å‡º</li><li>çº¿ç¨‹å®‰å…¨</li><li>æœ¬è´¨ä¸Šæ˜¯æ— ç¼“å†²çš„<code>channel</code>ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨åŒä¸€ä¸ªåç¨‹ä¸­è¯»å’Œå†™</li></ul></details><br><h3 id="bufio-å¸¦ç¼“å†²çš„ioåŒ…" tabindex="-1"><a class="header-anchor" href="#bufio-å¸¦ç¼“å†²çš„ioåŒ…"><span>bufioï¼šå¸¦ç¼“å†²çš„IOåŒ…</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/bufio" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/bufio</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ç¼“å†²åŸç†</summary><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com/bufio.png" alt="bufio"></p><p>æœ¬è´¨ä¸Šæ¥è®²ï¼Œå°±æ˜¯é€šè¿‡å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¥æé«˜æ•ˆç‡ï¼Œä»˜å‡ºçš„ä»£ä»·å°±æ˜¯å†…å­˜å ç”¨å˜å¤š</p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æ„é€ å‡½æ•°</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">NewReader</span><span class="token punctuation">(</span>rd io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token operator">*</span>Reader <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">NewReaderSize</span><span class="token punctuation">(</span>rd<span class="token punctuation">,</span> defaultBufSize<span class="token punctuation">)</span>	</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewWriter</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">)</span> <span class="token operator">*</span>Writer <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">NewWriterSize</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> defaultBufSize<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é»˜è®¤çš„ç¼“å†²åŒºå¤§å°defaultBufSize = 4096</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰Readerä½¿ç”¨ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç”ŸæˆåŸå§‹Reader</span></span>
<span class="line">	<span class="token keyword">var</span> str <span class="token builtin">string</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">170</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		str <span class="token operator">+=</span> <span class="token string">&quot;ä¸­&quot;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	r <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå§‹Readerå¯è¯»å–æ•°æ®å¤§å°: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¸¦ç¼“å†²çš„Reader</span></span>
<span class="line">	<span class="token comment">//reader := bufio.NewReader(f)	// ä½¿ç”¨é»˜è®¤ç¼“å†²å¤§å°</span></span>
<span class="line">	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReaderSize</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">// è‡ªå®šä¹‰ç¼“å†²å¤§å°</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Read error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Read %d bytes\n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŸ¥çœ‹ç¼“å†²åŒºä¿¡æ¯</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç¼“å†²åŒºå¤§å°: %d bytes\n&quot;</span><span class="token punctuation">,</span> reader<span class="token punctuation">.</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰ç¼“å†²åŒºå‰©ä½™çš„å¯è¯»å­—èŠ‚æ•°: %d bytes\n&quot;</span><span class="token punctuation">,</span> reader<span class="token punctuation">.</span><span class="token function">Buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:04:08 åŸå§‹Readerå¯è¯»å–æ•°æ®å¤§å°: <span class="token number">510</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:04:08 Read <span class="token number">100</span> bytes</span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:04:08 ç¼“å†²åŒºå¤§å°: <span class="token number">1024</span> bytes</span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:04:08 å½“å‰ç¼“å†²åŒºå‰©ä½™çš„å¯è¯»å­—èŠ‚æ•°: <span class="token number">410</span> bytes</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰Writerä½¿ç”¨ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å¸¦ç¼“å†²çš„Writer,é»˜è®¤ç¼“å†²åŒº4096å­—èŠ‚ï¼Œä¸‹é¢çš„ä»£ç æ‰‹åŠ¨è®¾ç½®ç¼“å†²åŒºå¤§å°15ä¸ªå­—èŠ‚</span></span>
<span class="line">	<span class="token comment">//writer := bufio.NewWriter(os.Stdout)</span></span>
<span class="line">	writer <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriterSize</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥æ•°æ®ï¼Œæœ¬æ¬¡æ€»å…±å†™å…¥13ä¸ªå­—èŠ‚æ•°æ®</span></span>
<span class="line">	<span class="token comment">// è‹¥ç¼“å†²åŒºå¤§äºç­‰äº13åˆ™å†™å…¥åˆ°ç¼“å†²åŒºï¼Œå±å¹•ä¸Šä¹Ÿä¸ä¼šè¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œå› ä¸ºç¼“å†²åŒºè¿˜å¹¶æ²¡æœ‰å‘çœŸæ­£çš„io.Writerä¸­å†™å…¥</span></span>
<span class="line">	<span class="token comment">// è‹¥ç¼“å†²åŒºå°äº13åˆ™ä¸å†™ç¼“å†²åŒºç›´æ¥å†™åˆ°åŸå§‹çš„io.Writerä¸­å»</span></span>
<span class="line">	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> writer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;hello world!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æˆåŠŸ: %d bytes\n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç¼“å†²åŒºä¿¡æ¯</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ç¼“å†²åŒºå¤§å°: %d bytes\n&quot;</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰ç¼“å†²åŒºå·²å†™å…¥çš„å­—èŠ‚æ•°: %d bytes\n&quot;</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰ç¼“å†²åŒºæœªä½¿ç”¨çš„å­—èŠ‚æ•°: %d bytes\n&quot;</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å°†ç¼“å†²åŒºæ•°æ®å†™å…¥åˆ°io.Writerä¸­</span></span>
<span class="line">	<span class="token comment">// å¿…é¡»è¦åˆ¤æ–­errorï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´å†™å…¥ä¸å®Œæ•´</span></span>
<span class="line">	<span class="token comment">//err := writer.Flush()</span></span>
<span class="line">	<span class="token comment">//if err != nil {</span></span>
<span class="line">	<span class="token comment">//	panic(err)</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ¸…ç©ºç¼“å†²åŒº, æœªå†™å…¥çš„åˆ™ä¸¢å¼ƒ</span></span>
<span class="line">	<span class="token comment">//writer.Reset(writer)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¿”å›æœªä½¿ç”¨å­—èŠ‚ç»„æˆçš„åˆ‡ç‰‡</span></span>
<span class="line">	<span class="token comment">//b := writer.AvailableBuffer()</span></span>
<span class="line">	<span class="token comment">//ç­‰åŒäºb := make([]byte, writer.Available())</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:10:48 å†™å…¥æˆåŠŸ: <span class="token number">13</span> bytes</span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:10:48 ç¼“å†²åŒºå¤§å°: <span class="token number">15</span> bytes</span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:10:48 å½“å‰ç¼“å†²åŒºå·²å†™å…¥çš„å­—èŠ‚æ•°: <span class="token number">13</span> bytes</span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">11</span>:10:48 å½“å‰ç¼“å†²åŒºæœªä½¿ç”¨çš„å­—èŠ‚æ•°: <span class="token number">2</span> bytes</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰å†™ç¼“å†²æ€§èƒ½æµ‹è¯•</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">MustWrite</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst <span class="token builtin">string</span><span class="token punctuation">,</span> bufSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è®°å½•å†™å…¥çš„å­—èŠ‚æ•°</span></span>
<span class="line">	<span class="token keyword">var</span> writeBytes <span class="token builtin">int64</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç»Ÿè®¡æ—¶é—´</span></span>
<span class="line">	now <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;It takes %.2f seconds to copy %d bytes for %s\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> writeBytes<span class="token punctuation">,</span> dst<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰“å¼€srcæ–‡ä»¶</span></span>
<span class="line">	r<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> r<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰“å¼€dstæ–‡ä»¶</span></span>
<span class="line">	w<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> w<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ„å»º reader å’Œ writer</span></span>
<span class="line">	<span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">		reader io<span class="token punctuation">.</span>Reader</span>
<span class="line">		writer io<span class="token punctuation">.</span>Writer</span>
<span class="line">	<span class="token punctuation">)</span></span>
<span class="line">	reader <span class="token operator">=</span> r</span>
<span class="line">	<span class="token keyword">if</span> bufSize <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">		writer <span class="token operator">=</span> w</span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		bufWriter <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriterSize</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> bufSize<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			err <span class="token operator">:=</span> bufWriter<span class="token punctuation">.</span><span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		writer <span class="token operator">=</span> bufWriter</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ–¹å¼1ï¼šä½¿ç”¨io.Copy æˆ– io.CopyBuffer è¯»å–å’Œå†™å…¥</span></span>
<span class="line">	<span class="token comment">//writeBytes, err = io.Copy(writer, reader)</span></span>
<span class="line">	<span class="token comment">//if err != nil {</span></span>
<span class="line">	<span class="token comment">//	log.Fatalln(err)</span></span>
<span class="line">	<span class="token comment">//}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ–¹å¼2ï¼šè‡ªå·±è¯»å–å’Œå†™å…¥</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;read error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token comment">// å†™å…¥æ•°æ®</span></span>
<span class="line">		m<span class="token punctuation">,</span> err <span class="token operator">:=</span> writer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;write error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token comment">// ç»Ÿè®¡å†™å…¥çš„å­—èŠ‚æ•°</span></span>
<span class="line">		writeBytes <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å†™ç¼“å†²æµ‹è¯•</span></span>
<span class="line">	src <span class="token operator">:=</span> <span class="token string">&quot;D:\\iso\\CentOS-7-x86_64-DVD-1708.iso&quot;</span></span>
<span class="line">	dst <span class="token operator">:=</span> <span class="token string">&quot;D:\\iso\\copy.iso&quot;</span></span>
<span class="line">	bufSize <span class="token operator">:=</span> <span class="token number">4</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span> <span class="token comment">// 4MiB</span></span>
<span class="line">	<span class="token function">MustWrite</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> bufSize<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è°ƒæ•´ä»£ç ä¸­ç¼“å†²åŒºå¤§å°ï¼Œåˆ†åˆ«æ‰§è¡Œä¸¤æ¬¡</span></span>
<span class="line"><span class="token comment"># ä»¥ä¸‹æ˜¯æµ‹è¯•äº†ä¸¤å—ç¡¬ç›˜çš„ç»“æœ</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç£ç›˜1</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">12</span>:59:17 It takes <span class="token number">35.35</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>copy.iso  <span class="token comment"># æ— ç¼“å†²åŒº</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:07:17 It takes <span class="token number">29.68</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> D:/iso/copy.iso  <span class="token comment"># 4MBç¼“å†²åŒº</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç£ç›˜2</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:47:17 It takes <span class="token number">94.07</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> F:/.HOMES/admin/ç³»ç»Ÿé•œåƒ/copy.iso  <span class="token comment"># æ— ç¼“å†²åŒº</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:45:17 It takes <span class="token number">47.44</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> F:/.HOMES/admin/ç³»ç»Ÿé•œåƒ/copy.iso  <span class="token comment"># 4MBç¼“å†²åŒº</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line"><span class="token comment"># 1ã€ä½¿ç”¨Read/Writeè¯»å†™æ–¹å¼æ€§èƒ½æœ‰ä¸€å®šçš„æå‡</span></span>
<span class="line"><span class="token comment"># 2ã€ä½†å¦‚æœä½¿ç”¨io.Copyæ–¹å¼è¯»å†™æ–‡ä»¶ï¼Œä¼šä½¿ç”¨dst.ReadFrom(src)æ–¹å¼è¯»å†™ï¼Œå¯¹æˆ‘ä»¬è¿™æ¬¡æµ‹è¯•æ¥è¯´å¹¶ä¸å‡†ï¼Œç”¨ä¸ç”¨bufioï¼Œä¸¤è€…èŠ±è´¹çš„æ—¶é—´å‡ ä¹ä¸€è‡´</span></span>
<span class="line"><span class="token comment"># 3ã€ç¼“å†²åŒºå¹¶ä¸æ˜¯å”¯ä¸€çš„å½±å“å› ç´ ï¼Œå¦‚æœä¸ä½¿ç”¨ç¼“å†²åŒºéƒ½èƒ½æ¦¨å¹²ç¡¬ä»¶æ€§èƒ½ï¼Œé‚£ä¹ˆä½¿ç”¨ç¼“å†²åŒºæå‡ä¹Ÿä¸ä¼šå¤§</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ7ï¼‰è¯»ç¼“å†²æ€§èƒ½æµ‹è¯•</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bufio&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">MustRead</span><span class="token punctuation">(</span>src <span class="token builtin">string</span><span class="token punctuation">,</span> bufSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è®°å½•è¯»å–çš„å­—èŠ‚æ•°</span></span>
<span class="line">	<span class="token keyword">var</span> readBytes <span class="token builtin">int64</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç»Ÿè®¡æ—¶é—´</span></span>
<span class="line">	now <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Read %d bytes in %.2f second: %s\n&quot;</span><span class="token punctuation">,</span> readBytes<span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰“å¼€srcæ–‡ä»¶</span></span>
<span class="line">	r<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">defer</span> r<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ„å»º reader</span></span>
<span class="line">	<span class="token keyword">var</span> reader io<span class="token punctuation">.</span>Reader</span>
<span class="line">	<span class="token keyword">if</span> bufSize <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">		reader <span class="token operator">=</span> r</span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		reader <span class="token operator">=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReaderSize</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> bufSize<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰‹åŠ¨è¯»å–</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;read error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// ç»Ÿè®¡è¯»å–çš„å­—èŠ‚æ•°</span></span>
<span class="line">		readBytes <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è¯»ç¼“å†²æµ‹è¯•</span></span>
<span class="line">	src <span class="token operator">:=</span> <span class="token string">&quot;F:/.HOMES/admin/ç³»ç»Ÿé•œåƒ/CentOS-7-x86_64-DVD-1708.iso&quot;</span></span>
<span class="line">	bufSize <span class="token operator">:=</span> <span class="token number">4</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span> <span class="token comment">// 4MiB</span></span>
<span class="line">	<span class="token function">MustRead</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> bufSize<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è°ƒæ•´ä»£ç ä¸­ç¼“å†²åŒºå¤§å°ï¼Œåˆ†åˆ«æ‰§è¡Œä¸¤æ¬¡</span></span>
<span class="line"><span class="token comment"># ä»¥ä¸‹æ˜¯æµ‹è¯•äº†ä¸¤å—ç¡¬ç›˜çš„ç»“æœ</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç£ç›˜1</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">12</span>:59:17 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">35.35</span> second: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso <span class="token comment"># æ— ç¼“å†²åŒº</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:07:17 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">29.68</span> second: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso <span class="token comment"># 4MBç¼“å†²</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç£ç›˜2</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:40:50 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">14.48</span> second: F:<span class="token punctuation">\</span>.HOMES<span class="token punctuation">\</span>admin<span class="token punctuation">\</span>ç³»ç»Ÿé•œåƒ<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso <span class="token comment"># æ— ç¼“å†²åŒº</span></span>
<span class="line"><span class="token number">2023</span>/04/20 <span class="token number">13</span>:43:03 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">1.06</span> second: F:<span class="token punctuation">\</span>.HOMES<span class="token punctuation">\</span>admin<span class="token punctuation">\</span>ç³»ç»Ÿé•œåƒ<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso  <span class="token comment"># 4MBç¼“å†²åŒº</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line"><span class="token comment"># 1ã€ä½¿ç”¨è¯»ç¼“å†²åŒºæœ‰æ˜æ˜¾çš„æ€§èƒ½æå‡</span></span>
<span class="line"><span class="token comment"># 2ã€ç¼“å†²åŒºå¹¶ä¸æ˜¯å”¯ä¸€çš„å½±å“å› ç´ ï¼Œå¦‚æœä¸ä½¿ç”¨ç¼“å†²åŒºéƒ½èƒ½æ¦¨å¹²ç¡¬ä»¶æ€§èƒ½ï¼Œé‚£ä¹ˆä½¿ç”¨ç¼“å†²åŒºæå‡ä¹Ÿä¸ä¼šå¤§</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ioutils-å·²è¢«os-ioä»£æ›¿" tabindex="-1"><a class="header-anchor" href="#ioutils-å·²è¢«os-ioä»£æ›¿"><span>ioutilsï¼šå·²è¢«os/ioä»£æ›¿</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/io/ioutil" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/io/ioutil</a></p><p>ä»Go 1.16å¼€å§‹ï¼ŒåŒæ ·çš„åŠŸèƒ½ç°åœ¨ç”±åŒ…<code>io</code>åŒ…æˆ–<code>os</code>åŒ…æä¾›ï¼Œåœ¨ä»£ç ä¸­åº”è¯¥ä¼˜å…ˆä½¿ç”¨è¿™äº›å®ç°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç‰¹å®šåŠŸèƒ½æ–‡æ¡£ã€‚</p><h2 id="-6" tabindex="-1"><a class="header-anchor" href="#-6"><span></span></a></h2><h2 id="å¹¶å‘åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘åŸºç¡€"><span>å¹¶å‘åŸºç¡€</span></a></h2><h3 id="goroutine" tabindex="-1"><a class="header-anchor" href="#goroutine"><span>Goroutine</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºç¡€ç¤ºä¾‹</summary><ul><li>Goè¯­è¨€ä¸­æ¯ä¸ªå¹¶å‘æ‰§è¡Œçš„å•å…ƒå«<code>Goroutine</code>ï¼ˆåç¨‹ï¼‰</li><li>ä½¿ç”¨<code>go</code>å…³é”®å­—åæ¥å‡½æ•°è°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ª<code>Goroutine</code></li><li>``Goroutine`æ˜¯å¹¶å‘å®‰å…¨çš„</li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">&#39;Z&#39;</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// start</span></span>
<span class="line"><span class="token comment">// end</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é—®ï¼šåç¨‹å‡½æ•°æ²¡æœ‰æ‰§è¡Œå—ï¼Ÿ</span></span>
<span class="line"><span class="token comment">// ç­”ï¼šåŸå› æ˜¯main()å‡½æ•°å¹¶ä¸ä¼šç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œåå†é€€å‡º,è¿™é‡Œmainå‡½æ•°å·²ç»æ‰§è¡Œå®Œäº†ï¼Œåç¨‹è¿˜æ²¡æ‰§è¡Œåˆ°forå¾ªç¯ï¼Œæ‰€ä»¥é€ æˆåç¨‹æ²¡æœ‰æ‰§è¡Œçš„å‡è±¡</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡ºï¼šä½¿ç”¨WaitGroup-æ–¹å¼1</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å£°æ˜WaitGroup</span></span>
<span class="line"><span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">&#39;Z&#39;</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// start</span></span>
<span class="line"><span class="token comment">// A</span></span>
<span class="line"><span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span></span>
<span class="line"><span class="token comment">// 10</span></span>
<span class="line"><span class="token comment">// end</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡ºï¼šä½¿ç”¨WaitGroup-æ–¹å¼2</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">&#39;Z&#39;</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¦‚æœéœ€è¦ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’wgï¼Œåˆ™wgå¿…é¡»æ˜¯å¼•ç”¨ç±»å‹</span></span>
<span class="line">	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// start</span></span>
<span class="line"><span class="token comment">// A</span></span>
<span class="line"><span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span></span>
<span class="line"><span class="token comment">// 10</span></span>
<span class="line"><span class="token comment">// end</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡ºï¼šä½¿ç”¨ Channel</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">&#39;Z&#39;</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–channel</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">2</span> <span class="token comment">// ä»£è¡¨å¯åŠ¨å‡ ä¸ªgroutine</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é˜»å¡</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token operator">&lt;-</span>ch</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// start</span></span>
<span class="line"><span class="token comment">// A</span></span>
<span class="line"><span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span></span>
<span class="line"><span class="token comment">// 10</span></span>
<span class="line"><span class="token comment">// end</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ5ï¼‰Goroutineç›¸å…³å‡½æ•°</summary><table><thead><tr><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>runtime.NumGoroutine()</code></td><td>è¿”å›å½“å‰å­˜åœ¨çš„<code>Goroutine</code>æ•°é‡</td></tr><tr><td><code>runtime.Gosched()</code></td><td>æš‚åœå½“å‰<code>Goroutine</code>ï¼Œç”±Goè‡ªåŠ¨è°ƒåº¦å…¶ä»–<code>Goroutine</code>æ‰§è¡Œ</td></tr><tr><td><code>runtime.Goexit()</code></td><td>é€€å‡ºå½“å‰<code>Goroutine</code></td></tr><tr><td><code>runtime.GOMAXPROCS(n)</code></td><td>è®¾ç½®å¯ä»¥ä½¿ç”¨çš„æœ€å¤§CPUæ•°é‡ï¼Œé»˜è®¤å€¼ä¸º<code>runtime.NumCPU()</code>ï¼›è¿”å›ä¸Šä¸€æ¬¡è®¾ç½®çš„å€¼</td></tr></tbody></table></details><br><h3 id="channel-åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#channel-åŸºç¡€"><span>Channel åŸºç¡€</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰è¯´æ˜</summary><p><code>Channel</code>ç”¨äº<code>Goroutine</code>ä¹‹é—´çš„é€šä¿¡ï¼Œä¸­æ–‡å¯ä»¥ç§°ä¸ºâ€ç®¡é“&quot;æˆ–&quot;é€šé“&quot;</p><p><strong>æ ¹æ®çŠ¶æ€å¯ä»¥åˆ†ä¸º</strong></p><ul><li><code>nil</code>ï¼Œåªå£°æ˜æœªåˆå§‹åŒ–çš„<code>Channel</code></li><li>æ­£å¸¸ï¼Œå£°æ˜å¹¶åˆå§‹åŒ–çš„<code>Channel</code></li><li>å…³é—­ï¼Œä½¿ç”¨<code>close(Channel)</code></li></ul><p><strong>æ ¹æ®ç¼“å†²æ–¹å¼å¯ä»¥åˆ†ä¸º</strong></p><ul><li>æ— ç¼“å†²åŒº<code>Channel</code></li><li>å¸¦ç¼“å†²åŒº<code>Channel</code></li></ul><p><strong>æ ¹æ®è¯»å†™æ–¹å¼å¯ä»¥åˆ†ä¸º</strong></p><ul><li>è¯»å†™<code>Channel</code></li><li>åªè¯»<code>Channel</code></li><li>åªå†™<code>Channel</code></li></ul></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰å®šä¹‰</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜ä¸€ä¸ªintç±»å‹çš„channel</span></span>
<span class="line">	<span class="token keyword">var</span> channel <span class="token keyword">chan</span> <span class="token builtin">int</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %#v\n&quot;</span><span class="token punctuation">,</span> channel<span class="token punctuation">,</span> channel<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–channel</span></span>
<span class="line">	channel <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %#v\n&quot;</span><span class="token punctuation">,</span> channel<span class="token punctuation">,</span> channel<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä»¥ä¸Šä¸¤å¥å¯ä»¥ç®€å†™æˆå¦‚ä¸‹å½¢å¼ï¼ˆæ¨èè¿™ç§å†™æ³•ï¼‰</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T %#v\n&quot;</span><span class="token punctuation">,</span> ch<span class="token punctuation">,</span> ch<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">//chan int (chan int)(nil)</span></span>
<span class="line"><span class="token comment">//chan int (chan int)(0xc00005e060)</span></span>
<span class="line"><span class="token comment">//chan int (chan int)(0xc00005e0c0)</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰è¯»å’Œå†™</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// å†™æ•°æ®ï¼šå°†100å†™å…¥åˆ°channelä¸­</span></span>
<span class="line">ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯»æ•°æ®-æ–¹å¼1ï¼Œ vä»£è¡¨è¯»åˆ°çš„å€¼</span></span>
<span class="line">v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch</span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯»æ•°æ®-æ–¹å¼2ï¼Œ vä»£è¡¨è¯»åˆ°çš„å€¼, okä»£è¡¨channelçš„çŠ¶æ€ï¼Œtrueä¸ºchannelæ­£å¸¸ï¼Œfalseä¸ºchannelå·²ç»å…³é—­</span></span>
<span class="line">v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch</span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯»å–ç®¡é“-æ–¹å¼3, ä½¿ç”¨rangeéå†ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œè‹¥Channelå…³é—­åˆ™forå¾ªç¯ä¹Ÿéšä¹‹ç»“æŸ</span></span>
<span class="line"><span class="token keyword">for</span> v<span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">{</span></span>
<span class="line">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…³é—­channel</span></span>
<span class="line"><span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è®°å¿†æŠ€å·§ï¼šç®­å¤´ä»£è¡¨æ•°æ®æµå‘</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="channel-æ— ç¼“å†²åŒº" tabindex="-1"><a class="header-anchor" href="#channel-æ— ç¼“å†²åŒº"><span>Channel æ— ç¼“å†²åŒº</span></a></h3><p><strong>å®šä¹‰</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line">ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>	<span class="token comment">// æ— ç¼“å†²åŒºchannel, ç­‰åŒäºmake(chan int, 0)ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨å¯ç¼“å†²æ•°æ®ä¸ªæ•°</span></span>
<span class="line"></span></code></pre></div><p><strong>ç‰¹æ€§</strong></p><ul><li>è¯»å’Œå†™ä¸èƒ½åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</li><li>è¯»å†™æ¬¡æ•°ä¸ä¸€è‡´ä¼šå‘ç”Ÿæ­»é”ï¼š<code>fatal error: all goroutines are asleep - deadlock!</code></li><li>ç®¡é“å…³é—­åï¼š <ul><li>å‡å¦‚ç»§ç»­è¯»ï¼Œä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¼šè¯»å–åˆ°é›¶å€¼</li><li>å‡å¦‚ç»§ç»­å†™ï¼Œä¼šæŠ¥é”™ï¼š<code>panic: send on closed channel</code></li></ul></li><li>å¦‚æœç®¡é“ä¸€åˆ‡éƒ½æ­£å¸¸ï¼Œæœªè¯»å–ä¹‹å‰å†™å…¥ä¼šé˜»å¡ï¼Œæœªå†™å…¥ä¹‹å‰è¯»å–ä¹Ÿä¼šé˜»å¡</li></ul><details class="hint-container details"><summary>æµ‹è¯•1: åŸºç¡€ä½¿ç”¨</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">for</span> curTime <span class="token operator">:=</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			second <span class="token operator">:=</span> curTime<span class="token punctuation">.</span><span class="token function">Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			ch <span class="token operator">&lt;-</span> second</span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Write to Channel  %d\n&quot;</span><span class="token punctuation">,</span> second<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»æ•°æ®</span></span>
<span class="line">	<span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Read from Channel %d\n\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:32 Write to Channel  <span class="token number">32</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:32 Read from Channel <span class="token number">32</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:33 Write to Channel  <span class="token number">33</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:33 Read from Channel <span class="token number">33</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:34 Write to Channel  <span class="token number">34</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:34 Read from Channel <span class="token number">34</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="channel-å¸¦ç¼“å†²åŒº" tabindex="-1"><a class="header-anchor" href="#channel-å¸¦ç¼“å†²åŒº"><span>Channel å¸¦ç¼“å†²åŒº</span></a></h3><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line">ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>	<span class="token comment">// ä»£è¡¨ç¼“å†²åŒºé•¿åº¦ä¸º3ï¼Œå¯ä»¥æ”¾3ä¸ªæ•°æ®</span></span>
<span class="line"></span></code></pre></div><p><strong>ç‰¹æ€§</strong></p><ul><li><p>è¯»å’Œå†™å¯ä»¥åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</p></li><li><p>è¯»å†™æ¬¡æ•°å¯ä»¥ä¸ä¸€è‡´ï¼Œæœ€å¤§å·®ä¸èƒ½è¶…è¿‡ç¼“å†²åŒºé•¿åº¦ï¼Œå¦åˆ™åŒæ ·ä¼šå¼•å‘æ­»é”ï¼š<code>fatal error: all goroutines are asleep - deadlock!</code></p><p>ä¸¾ä¸ªä¾‹å­ï¼Œç¼“å†²åŒºå¤§å°ä¸º1ï¼Œåˆ™å†™å…¥1æ¬¡è¯»å–0æ¬¡æ²¡æœ‰é—®é¢˜ï¼Œå†™å…¥2æ¬¡è¯»å–0æ¬¡å°±ä¼šå¼•å‘æ­»é”</p></li><li><p>ç®¡é“å…³é—­åï¼š</p><ul><li>å‡å¦‚ç»§ç»­è¯»ï¼Œä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¼šå…ˆè¯»å–ç¼“å†²åŒºï¼Œè‹¥ç¼“å†²åŒºè¯»å®Œä¼šè¯»åˆ°é›¶å€¼</li><li>å‡å¦‚ç»§ç»­å†™ï¼Œä¼šæŠ¥é”™ï¼š<code>panic: send on closed channel</code></li></ul></li><li><p>å¦‚æœç®¡é“ä¸€åˆ‡éƒ½æ­£å¸¸ï¼Œ</p><ul><li>åªæœ‰1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code>mainå‡½æ•°</code>ï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šæŠ¥é”™ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šæŠ¥é”™</li><li>è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code>go</code>å…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šé˜»å¡ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šé˜»å¡</li></ul></li></ul><details class="hint-container details"><summary>æµ‹è¯•1: è¯»å’Œå†™å¯ä»¥åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math/rand&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–éšæœºæ•°ç§å­</span></span>
<span class="line">	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥æ•°æ®ï¼ˆ0-99ä¹‹é—´çš„éšæœºæ•°ï¼‰</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–æ•°æ®: &quot;</span><span class="token punctuation">,</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•2: è¯»å†™æ¬¡æ•°å¯ä»¥ä¸ä¸€è‡´</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;math/rand&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–éšæœºæ•°ç§å­</span></span>
<span class="line">	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º10</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥æ•°æ®æ¬¡æ•°, å†™å…¥10æ¬¡è¯»å–0æ¬¡æ²¡é—®é¢˜ï¼Œå†™å…¥11æ¬¡è¯»å–0æ¬¡å°±ä¼šå‘ç”Ÿæ­»é”ï¼Œå› ä¸ºç¼“å†²åŒºå†™æ»¡äº†</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">10</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥æ•°æ®ï¼ˆ0-99ä¹‹é—´çš„éšæœºæ•°ï¼‰</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•3: Channelå…³é—­åå†è¯»å–ï¼Œä¼šè¯»å®Œç¼“å†²åŒºåè¯»å–åˆ°é›¶å€¼</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™ç¼“å†²åŒº</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">200</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">300</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å…³é—­channel</span></span>
<span class="line">	<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–æ•°æ®</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// 100</span></span>
<span class="line"><span class="token comment">// 200</span></span>
<span class="line"><span class="token comment">// 300</span></span>
<span class="line"><span class="token comment">// 0</span></span>
<span class="line"><span class="token comment">// 0</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•4: Channelå…³é—­åå†å†™å…¥ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œä¸æ˜¯å†™å…¥åˆ°ç¼“å†²åŒº</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å…³é—­channel</span></span>
<span class="line">	<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®ï¼Œchannelå·²ç»å…³é—­äº†ï¼Œä¸èƒ½å†™å…¥åˆ°ç¼“å†²åŒºï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œè¿™å’Œæ— ç¼“å†²channelè¡¨ç°ä¸€è‡´</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•5: 1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code>mainå‡½æ•°</code>ï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šæŠ¥é”™</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span> <span class="token comment">// è¿™é‡Œç›´æ¥æŠ¥é”™</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•6: 1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code>mainå‡½æ•°</code>ï¼‰ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šæŠ¥é”™</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// æ­£å¸¸è¯»å–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// æŠ¥é”™</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•7: è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆgoå…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šé˜»å¡</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å¯ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;åç¨‹è¿è¡Œç»“æŸ&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™å…¥</span></span>
<span class="line">	<span class="token comment">// 		å¾ªç¯æ¬¡æ•°ï¼šç¼“å†²åŒº+1æ¬¡</span></span>
<span class="line">	<span class="token comment">//		åç¨‹æœªè¿è¡Œå®Œä¹‹å‰ï¼Œç¬¬4æ¬¡å†™å…¥ä¼šå¡ä½ï¼Œç­‰åç¨‹è¿è¡Œå®Œï¼Œç¬¬4æ¬¡å†™å…¥å°±ä¼šæŠ¥é”™</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token function">cap</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ã€å¼€å§‹ã€‘ç¬¬%dæ¬¡å†™å…¥æ•°æ® | å½“å‰åç¨‹æ•°é‡: %d\n&quot;</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;ã€ç»“æŸã€‘ç¬¬%dæ¬¡å†™å…¥æ•°æ® | å½“å‰åç¨‹æ•°é‡: %d\n\n&quot;</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬1æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬1æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬2æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬2æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬3æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬3æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬4æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span></span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:29:40 åç¨‹è¿è¡Œç»“æŸ</span>
<span class="line">fatal error: all goroutines are asleep - deadlock<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">goroutine <span class="token number">1</span> <span class="token punctuation">[</span>chan send<span class="token punctuation">]</span>:</span>
<span class="line">main.main<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        C:/Users/Administrator/GolandProjects/learn/main.go:24 +0x18d</span>
<span class="line"></span>
<span class="line">Process finished with the <span class="token builtin class-name">exit</span> code <span class="token number">2</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>æµ‹è¯•8: è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆgoå…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šé˜»å¡</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å¯ä¸€ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;åç¨‹è¿è¡Œç»“æŸ&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»å–</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹è¯»å–&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch</span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–ç»“æŸ&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">,</span> ok<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:36:51 å¼€å§‹è¯»å–</span>
<span class="line"><span class="token number">2022</span>/04/17 <span class="token number">13</span>:37:51 åç¨‹è¿è¡Œç»“æŸ</span>
<span class="line">fatal error: all goroutines are asleep - deadlock<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line">goroutine <span class="token number">1</span> <span class="token punctuation">[</span>chan receive<span class="token punctuation">]</span>:</span>
<span class="line">main.main<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        C:/Users/Administrator/GolandProjects/learn/main.go:20 +0x79</span>
<span class="line"></span></code></pre></div></details><br><h3 id="channel-åªè¯»å’Œåªå†™" tabindex="-1"><a class="header-anchor" href="#channel-åªè¯»å’Œåªå†™"><span>Channel åªè¯»å’Œåªå†™</span></a></h3><p>åªæ˜¯åœ¨åŸæœ‰çš„<code>Channel</code>ä¸ŠåŠ äº†ä¸€å±‚é™åˆ¶ï¼Œåªèƒ½è¯»æˆ–åªèƒ½å†™ï¼Œé»˜è®¤çš„<code>Channel</code>æ˜¯è¯»å†™éƒ½æ”¯æŒçš„</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">chanReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¸¦ç¼“å†²åŒºçš„channelï¼Œé»˜è®¤æ˜¯æ”¯æŒè¯»å†™çš„</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">200</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">300</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å£°æ˜ä¸ºåªè¯»channel</span></span>
<span class="line">	<span class="token keyword">var</span> chReadOnly <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span></span>
<span class="line">	chReadOnly <span class="token operator">=</span> ch</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»æ•°æ®</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>chReadOnly<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®ä¼šæŠ¥é”™</span></span>
<span class="line">	<span class="token comment">//chReadOnly &lt;- 400</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">chanWriteOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜åªå†™channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">100</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">200</span></span>
<span class="line">	ch <span class="token operator">&lt;-</span> <span class="token number">300</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»æ•°æ®ä¼šæŠ¥é”™</span></span>
<span class="line">	<span class="token comment">//fmt.Println(&lt;-ch)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">chanReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">chanWriteOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="channelçš„å…¸å‹ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#channelçš„å…¸å‹ç”¨æ³•"><span>Channelçš„å…¸å‹ç”¨æ³•</span></a></h3><br><h3 id="channelçš„é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#channelçš„é”™è¯¯å¤„ç†"><span>Channelçš„é”™è¯¯å¤„ç†</span></a></h3><br><h3 id="select-å¤šè·¯å¤ç”¨ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#select-å¤šè·¯å¤ç”¨ç”¨æ³•"><span>Select å¤šè·¯å¤ç”¨ç”¨æ³•</span></a></h3><p><strong>è¯´æ˜</strong></p><p><code>select</code>æ˜¯ä¸“é—¨ä¸º<code>Goroutine</code>è®¾è®¡çš„ï¼Œç±»ä¼¼äº<code>switch..case</code>è¯­æ³•</p><ul><li>æ¯ä¸ª<code>case </code>è¡¨è¾¾å¼ä¸­éƒ½åªèƒ½åŒ…å«æ“ä½œ<code>Channel</code>çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¯»æˆ–å†™</li><li>å¦‚æœæœ‰å¤šä¸ª<code>case </code>éƒ½å¯ä»¥è¿è¡Œï¼Œ<code>select</code>ä¼šéšæœºå…¬å¹³åœ°é€‰å‡ºä¸€ä¸ªæ‰§è¡Œï¼Œå…¶ä»–ä¸ä¼šæ‰§è¡Œ</li><li>å¦‚æœå¤šä¸ª<code>case </code>éƒ½ä¸èƒ½è¿è¡Œï¼Œè‹¥æœ‰<code>default </code>å­å¥ï¼Œåˆ™æ‰§è¡Œè¯¥è¯­å¥ï¼Œåä¹‹ï¼Œ<code>select </code>å°†é˜»å¡ï¼Œç›´åˆ°æŸä¸ª<code>case </code>å¯ä»¥è¿è¡Œ</li><li>ç©º<code>select</code>ä¼šä¸€ç›´é˜»å¡</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºç¡€ç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	c1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">	c2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•1ï¼šç›´æ¥æ‰§è¡Œä¼šæ‰§è¡Œdefaultè¯­å¥</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•2: ç»™C1ç®¡é“å†™å…¥æ•°æ®ï¼›ç»“æœï¼šåœ¨C1ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š 1</span></span>
<span class="line">	<span class="token comment">//c1 &lt;- 1</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•3ï¼Œç›´æ¥å…³é—­ç®¡é“ï¼›ç»“æœï¼šC1ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼:  0</span></span>
<span class="line">	<span class="token comment">//close(c1)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æµ‹è¯•4ï¼Œä¸¤ä¸ªç®¡é“éƒ½å…³é—­ï¼Œé‚£ä¹ˆselectä¼šéšæœºå–ä¸€ä¸ªï¼Œç„¶åæ‰§è¡Œselectåé¢çš„é€»è¾‘</span></span>
<span class="line">	<span class="token comment">//close(c1)</span></span>
<span class="line">	<span class="token comment">//close(c2)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åœ¨å¤šä¸ªç®¡é“ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œæˆåŠŸå°±æ‰§è¡Œç›¸åº”é€»è¾‘</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c1<span class="token punctuation">:</span></span>
<span class="line">		<span class="token keyword">if</span> ok <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨C1ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;C1ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼: &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c2<span class="token punctuation">:</span></span>
<span class="line">		<span class="token keyword">if</span> ok <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;åœ¨C2ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;C2ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼: &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;select defaultè¿è¡Œ&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰for{ select }é—®é¢˜ï¼šåªèƒ½è·³å‡ºselectä¸èƒ½è·³å‡ºforå¾ªç¯</summary><p>å½“éœ€è¦å¾ªç¯æ“ä½œæ—¶éœ€è¦ä¸<code>for</code>è¿ç”¨ï¼Œè¿™æ—¶å€™å¦‚æœ<code>select</code>ä¸­å«æœ‰<code>break</code>ï¼Œé‚£ä¹ˆåªèƒ½è·³å‡º<code>select</code>å±‚è€Œä¸èƒ½è·³å‡º<code>for</code>å¾ªç¯ï¼Œä¸‹é¢æ¼”ç¤ºä¸€ä¸‹</p><p>é—®é¢˜ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math/rand&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span></span>
<span class="line">			<span class="token keyword">if</span> v <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span></span>
<span class="line">				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–&quot;</span><span class="token punctuation">)</span></span>
<span class="line">				<span class="token keyword">break</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é¢†å¥–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ä¿®æ­£-æ–¹å¼1ï¼šä½¿ç”¨break æ ‡ç­¾</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math/rand&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span></span>
<span class="line">ForEnd<span class="token punctuation">:</span>		<span class="token comment">// æ·»åŠ ä¸€ä¸ªæ ‡ç­¾</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span></span>
<span class="line">			<span class="token keyword">if</span> v <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span></span>
<span class="line">				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–&quot;</span><span class="token punctuation">)</span></span>
<span class="line">				<span class="token keyword">break</span> ForEnd	<span class="token comment">// è·³å‡ºæ­¤æ ‡ç­¾</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é¢†å¥–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>ä¿®æ­£-æ–¹å¼2ï¼šä½¿ç”¨goto æ ‡ç­¾</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;math/rand&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span></span>
<span class="line">			<span class="token keyword">if</span> v <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span></span>
<span class="line">				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–&quot;</span><span class="token punctuation">)</span></span>
<span class="line">				<span class="token keyword">goto</span> ForEnd	<span class="token comment">// è·³åˆ°æŒ‡å®šæ ‡ç­¾</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">ForEnd<span class="token punctuation">:</span> <span class="token comment">// å®šä¹‰æ ‡ç­¾</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é¢†å¥–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ç»ƒä¹ ï¼šè®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´</summary><p>æœ‰é—®é¢˜ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯å­¦ä¹ è¶…æ—¶æ ¸å¿ƒé€»è¾‘</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// æ¨¡æ‹Ÿå‡½æ•°è€—æ—¶æ“ä½œ</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰§è¡Œåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		ret <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">)</span> <span class="token comment">// è¿™ä¸ªæ˜¯æˆ‘ä»¬åŸæœ‰çš„å‡½æ•°,å¹¶ä¸åšä»»ä½•ä¿®æ”¹ï¼Œéä¾µå…¥å¼åšè¶…æ—¶æ§åˆ¶</span></span>
<span class="line">		ch <span class="token operator">&lt;-</span> ret</span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¶…æ—¶æ§åˆ¶</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œè¶…æ—¶&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span></span>
<span class="line">		<span class="token keyword">if</span> ok <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡ŒæˆåŠŸ: &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡ŒæŠ¥é”™: &quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// éƒ½æœ‰å“ªäº›é—®é¢˜ï¼Ÿ</span></span>
<span class="line"><span class="token comment">// (1) mainå†…ä»£ç å¤ªå¤šäº†ï¼Œå°†è¶…æ—¶æ§åˆ¶çš„ä»£ç å•ç‹¬å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­</span></span>
<span class="line"><span class="token comment">// (2) Goroutineæ³„æ¼ï¼šå‡è®¾è¶…æ—¶ä»¥åï¼Œåç¨‹ä¸­è¿˜ä¼šå†™æ•°æ®åˆ°channelä¸­ï¼Œè€Œå¤–è¾¹å·²ç»æ²¡æœ‰è¯»çš„äº†ï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œé€ æˆGoroutineæ³„æ¼</span></span>
<span class="line"><span class="token comment">// (3) è¯¥å‡½æ•°Addè¿”å›å€¼æ²¡æœ‰åŒ…å«é”™è¯¯ï¼Œåœ¨å®é™…åœºæ™¯ä¸­æœ‰äº›å‡½æ•°ä¼šæœ‰é”™è¯¯ï¼Œé”™è¯¯å¦‚ä½•ä¼ é€’ï¼Ÿ</span></span>
<span class="line"></span></code></pre></div><br><p>ä¼˜åŒ–åç‰ˆæœ¬ï¼Œè¿˜ç®—å®Œç¾</p><ul><li><p>å•ç‹¬å°è£…äº†ä¸€ä¸ªå‡½æ•°</p></li><li><p><code>Goroutine</code>æ³„æ¼é—®é¢˜å°†æ— ç¼“å†²çš„<code>channel</code>æ”¹ä¸ºå¸¦ç¼“å†²åŒºçš„<code>channel</code>ï¼Œä½†ä»éœ€è¦åŸæœ¬çš„<code>Add</code>å‡½æ•°æ‰§è¡Œå®Œæˆåæ‰ä¼šé€€å‡º<code>AddWithTimeout</code>å†…éƒ¨å¯åŠ¨çš„åç¨‹ã€‚</p><p>Goä¸æ”¯æŒå¤–éƒ¨æ€æ­»ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åç¨‹ï¼Œå‚è€ƒï¼š<a href="https://github.com/golang/go/issues/32610" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/issues/32610</a></p></li><li><p>æ·»åŠ ä¼ é€’é”™è¯¯ï¼Œ<code>channel</code>ä¿®æ”¹ä¸ºé€šçŸ¥å‹</p></li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;errors&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// æ¨¡æ‹Ÿå‡½æ•°è€—æ—¶æ“ä½œ</span></span>
<span class="line">	<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">,</span> <span class="token boolean">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">AddWithTimeout</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> timeout <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>ret <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span></span>
<span class="line">	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ‰§è¡Œåç¨‹</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		ret<span class="token punctuation">,</span> err <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// è¿™ä¸ªæ˜¯æˆ‘ä»¬åŸæœ‰çš„å‡½æ•°,å¹¶ä¸åšä»»ä½•ä¿®æ”¹</span></span>
<span class="line">		ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¶…æ—¶æ§åˆ¶</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">		err <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Function executed for more than %d seconds: AddWithTimeout(%d, %d)&quot;</span><span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å¼€å¯å¤šä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">AddWithTimeout</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span></span>
<span class="line">			ret <span class="token operator">=</span> ret</span>
<span class="line">			err <span class="token operator">=</span> err</span>
<span class="line">			<span class="token comment">//fmt.Printf(&quot;æ‰§è¡Œç»“æœ: %d, %v\n&quot;, ret, err)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// æ¯éš”1ç§’è¾“å‡ºå½“å‰Goroutineæ•°é‡</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		g <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰Goroutineæ•°é‡: %d\n&quot;</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> g <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">break</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰ç»ƒä¹ ï¼šå¤šä¸ªåç¨‹é¡ºåºæ‰“å°æ•°å­—</summary><p>æœ‰4ä¸ª<code>goroutine</code>ï¼Œæ¯ä¸ª<code>goroutine</code>æ‰“å°ä¸€ä¸ªæ•°å­—ï¼Œè¦æ±‚æŒ‰ç…§1<code>/2/3/4</code>è¿™æ ·çš„é¡ºåºæ‰“å°è¾“å‡º</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Token <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">newWorker</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">,</span> ch <span class="token keyword">chan</span> Token<span class="token punctuation">,</span> nextCh <span class="token keyword">chan</span> Token<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">		token <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch</span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">		nextCh <span class="token operator">&lt;-</span> token</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	chs <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">chan</span> Token<span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¯åŠ¨4ä¸ªåç¨‹</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token function">newWorker</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> chs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> chs<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç»™ç¬¬ä¸€ä¸ªchanå‘é€æ•°æ®</span></span>
<span class="line">	chs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> Token<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¼šä¸€ç›´é˜»å¡</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="context-ä¸Šä¸‹æ–‡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#context-ä¸Šä¸‹æ–‡ç®¡ç†"><span>Context ä¸Šä¸‹æ–‡ç®¡ç†</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/context" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/context</a></p><p><code>context</code>æ˜¯Goçš„æ ‡å‡†åº“ï¼Œç”¨æ¥ç®¡ç†<code>Goroutine</code>çš„ä¸Šä¸‹æ–‡ï¼Œ<code>context</code>æ˜¯å¹¶å‘å®‰å…¨çš„</p><p>ä½¿ç”¨ä¸Šä¸‹æ–‡çš„ç¨‹åºåº”éµå¾ªä»¥ä¸‹è§„åˆ™</p><ul><li>ä¸è¦åœ¨ç»“æ„ç±»å‹ä¸­å­˜å‚¨ä¸Šä¸‹æ–‡ï¼›ç›¸åï¼Œå°†ä¸Šä¸‹æ–‡æ˜¾å¼åœ°ä¼ é€’ç»™æ¯ä¸ªéœ€è¦å®ƒçš„å‡½æ•°</li><li>ä¸Šä¸‹æ–‡åº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé€šå¸¸å‘½åä¸º<code>ctx</code></li><li>å³ä½¿å‡½æ•°å…è®¸ï¼Œä¹Ÿä¸è¦ä¼ é€’nilä¸Šä¸‹æ–‡ã€‚å¦‚æœæ‚¨ä¸ç¡®å®šè¦ä½¿ç”¨å“ªä¸ªä¸Šä¸‹æ–‡ï¼Œè¯·ä½¿ç”¨<code>context.TODO()</code></li></ul><br><details class="hint-container details"><summary>ï¼ˆ1ï¼‰WithCancelï¼šå–æ¶ˆåç¨‹</summary><p>ç”¨æ¥å–æ¶ˆå­åç¨‹ï¼Œä»¥åŠå­™å­åç¨‹ï¼Œä»¥åŠå­™å­çš„å­™å­åç¨‹ç­‰</p><p>å‡½æ•°ç­¾å</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">WithCancel</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">)</span> <span class="token punctuation">(</span>ctx Context<span class="token punctuation">,</span> cancel CancelFunc<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>å…ˆçœ‹ä¸€æ®µæ­£å¸¸çš„ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span>	</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>å¢åŠ å–æ¶ˆåŠŸèƒ½</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;context&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">LOOP<span class="token punctuation">:</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// é€€å‡ºä¿¡å·</span></span>
<span class="line">		<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">			<span class="token keyword">break</span> LOOP</span>
<span class="line">		<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// ä¸šåŠ¡ä»£ç </span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">    <span class="token comment">// Backgroundè¿”å›ä¸€ä¸ªç©ºContextã€‚å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰æˆªæ­¢æ—¥æœŸï¼Œä¹Ÿæ²¡æœ‰å€¼ã€‚</span></span>
<span class="line">	<span class="token comment">// Backgroundæ˜¯æ‰€æœ‰Contextæ ‘çš„æ ¹ã€‚</span></span>
<span class="line">	ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithCancel</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å§‹å·¥ä½œäº†</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 5ç§’åé€€å‡º</span></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰WithDeadlineå’ŒWithTimeoutï¼šå¢åŠ è¿‡æœŸæ—¶é—´</summary><p>å‡½æ•°ç­¾å</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// WithDeadlineå’ŒWithTimeoutæ˜¯åœ¨WithCancelçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªè¿‡æœŸæ—¶é—´</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WithDeadline</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> d time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>			<span class="token comment">// å¢åŠ ä¸€ä¸ªå…·ä½“çš„è¿‡æœŸæ—¶é—´ç‚¹</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>	<span class="token comment">// å¢åŠ ä¸€ä¸ªç›¸å¯¹çš„è¿‡æœŸæ—¶é—´æ®µ</span></span>
<span class="line"></span></code></pre></div><p>å‡½æ•°è¶…æ—¶æ§åˆ¶</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;context&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">LOOP<span class="token punctuation">:</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// é€€å‡ºä¿¡å·</span></span>
<span class="line">		<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">			<span class="token keyword">break</span> LOOP</span>
<span class="line">		<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// ä¸šåŠ¡ä»£ç </span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯</span></span>
<span class="line">	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¼€å§‹å·¥ä½œäº†</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆæˆ–è¶…æ—¶</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰WithValueï¼šå¯ä»¥æºå¸¦ä¸€ä¸ªå€¼</summary><p>å‡½æ•°ç­¾å</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">func</span> <span class="token function">WithValue</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val any<span class="token punctuation">)</span> Context</span>
<span class="line"></span></code></pre></div><p>ç¤ºä¾‹ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;context&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Work</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	ctx <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithValue</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å·¥ä½œ</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">Work</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç­‰å¾…å·¥ä½œå®Œæˆ</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h2 id="å¹¶å‘åŸè¯­" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘åŸè¯­"><span>å¹¶å‘åŸè¯­</span></a></h2><h3 id="äº’æ–¥é”å’Œè¯»å†™é”" tabindex="-1"><a class="header-anchor" href="#äº’æ–¥é”å’Œè¯»å†™é”"><span>äº’æ–¥é”å’Œè¯»å†™é”</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/sync" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/sync</a></p><p><code>sync</code>æ˜¯Goçš„æ ‡å‡†åº“ï¼Œæä¾›äº†æœ€åŸºæœ¬çš„åŒæ­¥åŸè¯­ï¼Œä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼šå¯¹è±¡ä¸€æ—¦è¢«ä½¿ç”¨å°±ä¸åº”è¯¥è¢«å¤åˆ¶ã€‚</p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰é”è¯´æ˜</summary><p>é”æ¥å£</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// A Locker represents an object that can be locked and unlocked.</span></span>
<span class="line"><span class="token keyword">type</span> Locker <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>äº’æ–¥é”</p><p><code>sync.Mutex</code> äº’æ–¥é”ï¼Œåœ¨æŸä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹å¯ä»¥æ‹¿åˆ°é”ï¼Œæ‹¿ä¸åˆ°çš„ä¼šä¸€ç›´é˜»å¡ï¼Œé€‚åˆè¯»å°‘å†™å¤šçš„åœºæ™¯</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		<span class="token comment">// åŠ é”/è§£é”</span></span>
<span class="line"><span class="token function">TryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			<span class="token comment">// å°è¯•è·å–é”ï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œæ­¤å‡½æ•°ä¸ä¼šé˜»å¡</span></span>
<span class="line"></span></code></pre></div><p>è¯»å†™é”</p><p><code>sync.RWMutex</code> è¯»å†™é”ï¼Œåœ¨æŸä¸€æ—¶åˆ»åªèƒ½ç”±ä»»æ„çš„<code>reader</code>æŒæœ‰ï¼Œæˆ–è€…æ˜¯åªèƒ½è¢«å•ä¸ªçš„<code>writer</code>æŒæœ‰ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     	<span class="token comment">// å†™æ“ä½œè°ƒç”¨çš„æ–¹æ³•</span></span>
<span class="line"><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   	<span class="token comment">// è¯»æ“ä½œè°ƒç”¨çš„æ–¹æ³•</span></span>
<span class="line"><span class="token function">TryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">TryRLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// å°è¯•è·å–é”,ä¸ä¼šé˜»å¡</span></span>
<span class="line"><span class="token function">RLocker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           	<span class="token comment">// ä¸ºè¯»æ“ä½œè¿”å›ä¸€ä¸ªLockeræ¥å£çš„å¯¹è±¡ï¼Œä»–çš„Lockæ–¹æ³•ä¼šè°ƒç”¨RLockï¼Œä»–çš„Unlockä¼šè°ƒç”¨RUnlock</span></span>
<span class="line"></span></code></pre></div><p><strong>ğŸ’¡ æ³¨æ„ï¼šæœªæŒæœ‰é”çš„åç¨‹ä¹Ÿå¯ä»¥é‡Šæ”¾é”</strong></p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æµ‹è¯•ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex</span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;è·å–é”&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;é‡Šæ”¾é”&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// æœªæŒæœ‰é”çš„åç¨‹ä¹Ÿå¯ä»¥é‡Šæ”¾é”ï¼Œä½†æ˜¯éå¸¸ä¸æ¨èè¿™ä¹ˆä½¿ç”¨</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æµ‹è¯•ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line">	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex</span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;f1 lock&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;f1 unlock&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;f2 unlock&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line">		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;f2 lock&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;End&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å¹¶å‘å®‰å…¨çš„map" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘å®‰å…¨çš„map"><span>å¹¶å‘å®‰å…¨çš„Map</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸç”ŸMap+è¯»å†™é”</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> RWMap <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	sync<span class="token punctuation">.</span>RWMutex</span>
<span class="line">	m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ„é€ å‡½æ•°</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewRWMap</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>RWMap <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token operator">&amp;</span>RWMap<span class="token punctuation">{</span></span>
<span class="line">		m<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯»æ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Load</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span></span>
<span class="line">	<span class="token keyword">return</span> v<span class="token punctuation">,</span> ok</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å†™æ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Store</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ æ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Delete</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">,</span> k<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// éå†æ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Range</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m<span class="token punctuation">.</span>m <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">f</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¤åˆæ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">LoadAndDelete</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span></span>
<span class="line">	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">,</span> k<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> v<span class="token punctuation">,</span> ok</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">LoadAndStore</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span></span>
<span class="line">	<span class="token keyword">if</span> ok <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> v<span class="token punctuation">,</span> <span class="token boolean">true</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v</span>
<span class="line">	<span class="token keyword">return</span> v<span class="token punctuation">,</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è·å–å¤§å°</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line">	m <span class="token operator">:=</span> <span class="token function">NewRWMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹å†™å…¥æ•°æ®&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// æ³¨æ„è¿™é‡Œè¦å°†iä¼ å…¥</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å†™å…¥æ•°æ®å®Œæˆ&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// éå†</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹éå†æ•°æ®&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> k <span class="token operator">!=</span> v <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;key is error: %d&quot;</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;éå†æ•°æ®å®Œæˆ&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æ ‡å‡†åº“ sync.Map</summary><ul><li><p><code>sync.Map</code>æ˜¯Goä¸ºæˆ‘ä»¬æä¾›çš„å¹¶å‘å®‰å…¨çš„<code>Map</code>ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</p></li><li><p>ä¸åŸç”Ÿ<code>map</code> + <code>sync.RWMutex</code>ç±»ä¼¼ï¼Œç›¸æ¯”è€Œè¨€<code>sync.Map</code>è¯»çš„æ€§èƒ½æ›´å¥½å†™çš„æ€§èƒ½æ›´å·®</p></li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> m sync<span class="token punctuation">.</span>Map</span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®ï¼Œå¹¶å‘å†™</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®ï¼Œæ”¯æŒä¸åŒçš„æ•°æ®ç±»å‹</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&quot;ä¸­å›½&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è¯»æ•°æ®</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// è¯»å–</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">LoadAndDelete</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// è¯»å–å¹¶åˆ é™¤</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">LoadOrStore</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¯»å–,ç¬¬äºŒä¸ªè¿”å›å€¼ä»£è¡¨æ˜¯å¦è¯»å–åˆ°ï¼Œè‹¥è¯»ä¸åˆ°åˆ™è®¾ç½®valueä¸ºè¯¥å€¼å¹¶è¿”å›</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åˆ é™¤æ•°æ®</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token comment">// æ— è¿”å›å€¼</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// éå†</span></span>
<span class="line">	m<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value any<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ç¬¬ä¸‰æ–¹åº“ï¼šé€šè¿‡<code>map</code>åˆ†ç‰‡å®ç°</summary><p><code>Github</code>åœ°å€ï¼š<a href="https://github.com/orcaman/concurrent-map" target="_blank" rel="noopener noreferrer">https://github.com/orcaman/concurrent-map</a></p><p><code>concurrent-map</code>æä¾›äº†ä¸€ç§é«˜æ€§èƒ½çš„è§£å†³æ–¹æ¡ˆ:é€šè¿‡å¯¹å†…éƒ¨<code>map</code>è¿›è¡Œåˆ†ç‰‡ï¼Œé™ä½é”ç²’åº¦ï¼Œä»è€Œè¾¾åˆ°æœ€å°‘çš„é”ç­‰å¾…æ—¶é—´(é”å†²çª)</p><p><strong>å®ç°é€»è¾‘</strong></p><ul><li>é»˜è®¤å¯¹<code>map</code>åˆ†äº†32ç‰‡ï¼ˆæ¯ä¸€ç‰‡æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¯ä¸ªç»“æ„ä½“åŒ…å«åŸç”ŸMapå’Œè¯»å†™é”ï¼‰ï¼Œæ‰€æœ‰åˆ†ç‰‡å­˜å‚¨åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­<code>[]*ConcurrentMapShared</code></li><li>æ¯æ¬¡æ“ä½œæ—¶(å¢åˆ æ”¹æŸ¥)ï¼Œå…ˆé€šè¿‡<code>GetShard(key)</code>è·å–<code>key</code>æ‰€åœ¨çš„åˆ†ç‰‡ï¼Œç„¶åå¯¹åˆ†ç‰‡åŠ é”åå†æ“ä½œ</li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/orcaman/concurrent-map&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line">	m <span class="token operator">:=</span> cmap<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åˆå§‹åŒ–Map</span></span>
<span class="line">	loop <span class="token operator">:=</span> <span class="token number">1000000</span> <span class="token comment">// å¾ªç¯æ¬¡æ•°</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†™æ•°æ®ï¼Œå€¼å¿…é¡»ä¸ºstringï¼Œè¿™æ˜¯ä»£ç é‡Œå†™æ­»çš„</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> loop<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			m<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">*</span>i<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è·å–æ•°æ®å¹¶æ ¡éªŒ</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> loop<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span></span>
<span class="line">				<span class="token keyword">if</span> v <span class="token operator">!=</span> i<span class="token operator">*</span>i <span class="token punctuation">{</span></span>
<span class="line">					log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;key err: %d\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">				<span class="token punctuation">}</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡" tabindex="-1"><a class="header-anchor" href="#ç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡"><span>ç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡</span></a></h3><p><code>sync.Once</code>åªæš´éœ²äº†ä¸€ä¸ªæ–¹æ³•<code>Do</code>,å¤šæ¬¡è°ƒç”¨<code>Do</code>æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨<code>Do</code>æ–¹æ³•æ—¶å‚æ•°<code>f</code>å‡½æ•°æ‰ä¼šæ‰§è¡Œï¼Œ<code>f</code>å‡½æ•°æ˜¯æ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°</p><details class="hint-container details"><summary>å•ä¾‹æ¨¡å¼ä¸é‡ç½®</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	once   sync<span class="token punctuation">.</span>Once</span>
<span class="line">	person <span class="token operator">*</span>Person</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span></span>
<span class="line">	once<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		person <span class="token operator">=</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">return</span> person</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">RestPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	once <span class="token operator">=</span> sync<span class="token punctuation">.</span>Once<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å•ä¾‹æ¨¡å¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡ç½®</span></span>
<span class="line">	<span class="token function">RestPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ç»§ç»­å•ä¾‹æ¨¡å¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// 0xc00004a250</span></span>
<span class="line"><span class="token comment">// 0xc00004a250</span></span>
<span class="line"><span class="token comment">// 0xc00004a260</span></span>
<span class="line"><span class="token comment">// 0xc00004a260</span></span>
<span class="line"></span></code></pre></div><blockquote><p>ğŸ‘€ å…¶ä»–æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼</p><p>æ–¹æ³•1ï¼šå®šä¹‰åŒ…çº§åˆ«çš„å˜é‡<br> æ–¹æ³•2ï¼šåŒ…çº§åˆ«<code>init</code>å‡½æ•°åˆå§‹åŒ–<br> æ–¹æ³•3ï¼šåœ¨<code>main</code>å‡½æ•°ä¸­ï¼Œæ‰§è¡Œä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°</p></blockquote></details><br><h3 id="ç¼“å­˜æ± æé«˜æ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜æ± æé«˜æ€§èƒ½"><span>ç¼“å­˜æ± æé«˜æ€§èƒ½</span></a></h3><p><code>sync.Pool</code>æ˜¯ä¸€ä¸ªä¸´æ—¶ç¼“å­˜æ± ï¼Œå¹¶å‘å®‰å…¨</p><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li>æ± å¯¹è±¡å¯ä»¥éšæ—¶è¢«åƒåœ¾å›æ”¶æ‰ï¼Œæ‰€ä»¥HTTPé•¿è¿æ¥ã€æ•°æ®åº“é•¿è¿æ¥ç­‰ä¸é€‚åˆä½¿ç”¨å®ƒ</li><li>æ± ä¸­è¦æ”¾å…¥å¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œä¸ç„¶æ˜¯å¯¹è±¡çš„æ‹·è´åˆ™èµ·ä¸åˆ°ç¼“å­˜æ± çš„ä½œç”¨</li><li>åœ¨å¯¹è±¡ç”¨å®Œä»¥åï¼Œæ”¾å…¥æ± ä¸­ä¹‹å‰ï¼Œæœ€å¥½åšä¸€ä¸‹æ¸…ç†å·¥ä½œï¼Œä¸ç„¶ä¸‹æ¬¡ä»æ± ä¸­ä¼šæ‹¿åˆ°ä¸€ä¸ªæœ‰ä½¿ç”¨ç—•è¿¹çš„å¯¹è±¡</li><li><code>Get()</code>å’Œ<code>Put(x)</code>æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä½†æ˜¯<code>New()</code>ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä½†æ˜¯å¹¶ä¸å½±å“æˆ‘ä»¬ä½¿ç”¨</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºæœ¬ä½¿ç”¨</summary><p><strong>å®šä¹‰å’Œæ–¹æ³•</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// sync.Poolç»“æ„ä½“å®šä¹‰</span></span>
<span class="line"><span class="token keyword">type</span> Pool <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token operator">...</span> 			<span class="token comment">// å¿½ç•¥</span></span>
<span class="line">	New <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any	<span class="token comment">// å½“æ± ä¸ºç©ºæ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡å¹¶æ”¾å…¥æ± ä¸­</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// sync.Poolç»“æ„ä½“æ–¹æ³•</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">// ä»æ± ä¸­å–èµ°ä¸€ä¸ªå…ƒç´ ï¼ŒåŒæ—¶ä¼šåœ¨æ± ä¸­åˆ é™¤è¿™ä¸ªå…ƒç´ </span></span>
<span class="line">								<span class="token comment">// å¦‚æœPoolä¸­æ²¡æœ‰å…ƒç´ äº†ï¼Œä¼šä½¿ç”¨ç»“æ„ä½“çš„Newæ–¹æ³•åˆ›å»ºä¸€ä¸ªå…ƒç´ </span></span>
<span class="line">        						<span class="token comment">// å¦‚æœç»“æ„ä½“æ²¡æœ‰å®šä¹‰Newæ–¹æ³•ï¼Œé‚£ä¹ˆGetæ–¹æ³•ä¼šè¿”å›nilï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Getæ—¶è¦åˆ¤æ–­nilçš„æƒ…å†µ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span>x any<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>	<span class="token comment">// å°†å…ƒç´ æ”¾åˆ°Poolï¼Œå¦‚æœå…ƒç´ ä¸ºnilï¼Œé‚£ä¹ˆPoolä¼šå¿½ç•¥è¿™ä¸ªå€¼</span></span>
<span class="line"></span></code></pre></div><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Name <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token function">Clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	u<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–æ± </span></span>
<span class="line">	pool <span class="token operator">:=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span></span>
<span class="line">		New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token function">new</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä»æ± ä¸­è·å–å¯¹è±¡</span></span>
<span class="line">	user <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v %p\n&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨å¯¹è±¡</span></span>
<span class="line">	user<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;bob&quot;</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v %p\n&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç”¨å®Œäº†ï¼Œæ”¾å›æ± ä¸­</span></span>
<span class="line">	user<span class="token punctuation">.</span><span class="token function">Clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ”¾å›æ± ä¹‹å‰æ‰§è¡Œæ¸…ç†å·¥ä½œï¼Œä¸ç„¶ä¸‹æ¬¡ä»æ± ä¸­ä¼šæ‹¿åˆ°ä¸€ä¸ªæœ‰ä½¿ç”¨ç—•è¿¹çš„å¯¹è±¡</span></span>
<span class="line">	pool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†æ¬¡ç”³è¯·ä¸€ä¸ª</span></span>
<span class="line">	user2 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%#v %p\n&quot;</span><span class="token punctuation">,</span> user2<span class="token punctuation">,</span> user2<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token comment">// &amp;main.User{Name:&quot;&quot;} 0xc00004a250</span></span>
<span class="line"><span class="token comment">// &amp;main.User{Name:&quot;bob&quot;} 0xc00004a250</span></span>
<span class="line"><span class="token comment">// &amp;main.User{Name:&quot;&quot;} 0xc00004a250</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± " tabindex="-1"><a class="header-anchor" href="#å¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± "><span>å¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± </span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰sync.Poolå®ç°</summary><p>ä»£ç æ¥è‡ª<code>Hugo</code>ï¼š<a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener noreferrer">https://github.com/gohugoio/hugo</a></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bytes&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> bufferPool <span class="token operator">=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span></span>
<span class="line">	New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token operator">&amp;</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// GetBuffer returns a buffer from the pool.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>buf <span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> bufferPool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PutBuffer returns a buffer to the pool.</span></span>
<span class="line"><span class="token comment">// The buffer is reset before it is put back into circulation.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">PutBuffer</span><span class="token punctuation">(</span>buf <span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	buf<span class="token punctuation">.</span><span class="token function">Reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	bufferPool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ä»æ± å­å–å‡ºå¯¹è±¡</span></span>
<span class="line">	buf <span class="token operator">:=</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		buf<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ”¾å…¥æ± å­</span></span>
<span class="line">	<span class="token function">PutBuffer</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†æ¬¡ä»æ± å­å–å‡º</span></span>
<span class="line">	buf2 <span class="token operator">:=</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> buf2<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf2<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰ä½¿ç”¨channelå®ç°</summary><p>ä»£ç æ¥è‡ªminioï¼š<a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">https://github.com/minio/minio</a></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// BytePoolCap implements a leaky pool of []byte in the form of a bounded channel.</span></span>
<span class="line"><span class="token keyword">type</span> BytePoolCap <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	c    <span class="token keyword">chan</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span></span>
<span class="line">	w    <span class="token builtin">int</span></span>
<span class="line">	wcap <span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// NewBytePoolCap creates a new BytePool bounded to the given maxSize, with new</span></span>
<span class="line"><span class="token comment">// byte arrays sized based on width.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">NewBytePoolCap</span><span class="token punctuation">(</span>maxSize <span class="token builtin">int</span><span class="token punctuation">,</span> width <span class="token builtin">int</span><span class="token punctuation">,</span> capwidth <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token operator">&amp;</span>BytePoolCap<span class="token punctuation">{</span></span>
<span class="line">		c<span class="token punctuation">:</span>    <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> maxSize<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">		w<span class="token punctuation">:</span>    width<span class="token punctuation">,</span></span>
<span class="line">		wcap<span class="token punctuation">:</span> capwidth<span class="token punctuation">,</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Get gets a []byte from the BytePool, or creates a new one if none are</span></span>
<span class="line"><span class="token comment">// available in the pool.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> b <span class="token operator">=</span> <span class="token operator">&lt;-</span>bp<span class="token punctuation">.</span>c<span class="token punctuation">:</span></span>
<span class="line">	<span class="token comment">// reuse existing buffer</span></span>
<span class="line">	<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		<span class="token comment">// create new buffer</span></span>
<span class="line">		<span class="token keyword">if</span> bp<span class="token punctuation">.</span>wcap <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">			b <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bp<span class="token punctuation">.</span>w<span class="token punctuation">,</span> bp<span class="token punctuation">.</span>wcap<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">			b <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bp<span class="token punctuation">.</span>w<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Put returns the given Buffer to the BytePool.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">select</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">case</span> bp<span class="token punctuation">.</span>c <span class="token operator">&lt;-</span> b<span class="token punctuation">:</span></span>
<span class="line">		<span class="token comment">// buffer went back into pool</span></span>
<span class="line">	<span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">		<span class="token comment">// buffer didn&#39;t go back into pool, just discard</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Width returns the width of the byte arrays in this pool.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> bp<span class="token punctuation">.</span>w</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// WidthCap returns the cap width of the byte arrays in this pool.</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">WidthCap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> bp<span class="token punctuation">.</span>wcap</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–æ± å­</span></span>
<span class="line">	pool <span class="token operator">:=</span> <span class="token function">NewBytePoolCap</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä»æ± å­å–å‡ºå¯¹è±¡</span></span>
<span class="line">	buf <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä½¿ç”¨</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		buf <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token char">&#39;h&#39;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ”¾å…¥æ± å­</span></span>
<span class="line">	pool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å†æ¬¡ä»æ± å­å–å‡º</span></span>
<span class="line">	buf2 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;é•¿åº¦: %d | å®¹é‡: %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æ³¨æ„äº‹é¡¹ï¼šå†…å­˜æ³„æ¼é—®é¢˜</summary><p>æè¿°ï¼šå½“<code>byte</code>å¾ˆå¤§çš„æ—¶å€™ï¼Œå†æ”¾å…¥æ± å­ï¼Œå°±ä¼šå¼•èµ·å†…å­˜æ³„æ¼</p><p>è§£å†³ï¼šæ”¾å›æ± å­æ—¶åˆ¤æ–­<code>Byte</code>å¤§å°ï¼Œå¦‚æœå¾ˆå¤§å°±ç›´æ¥ä¸¢å¼ƒ</p><p>å‚è€ƒï¼š</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// fmtåŒ…print.goæ–‡ä»¶</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®šä¹‰æ± å­</span></span>
<span class="line"><span class="token keyword">var</span> ppFree <span class="token operator">=</span> sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span></span>
<span class="line">	New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">new</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ”¾å›æ± å­æ“ä½œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>pp<span class="token punctuation">)</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// Proper usage of a sync.Pool requires each entry to have approximately</span></span>
<span class="line">	<span class="token comment">// the same memory cost. To obtain this property when the stored type</span></span>
<span class="line">	<span class="token comment">// contains a variably-sized buffer, we add a hard limit on the maximum buffer</span></span>
<span class="line">	<span class="token comment">// to place back in the pool.</span></span>
<span class="line">	<span class="token comment">//</span></span>
<span class="line">	<span class="token comment">// See https://golang.org/issue/23199</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token function">cap</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>buf<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">64</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span> <span class="token punctuation">{</span>	<span class="token comment">// å®¹é‡è¿‡å¤§åˆ™ä¸¢å¼ƒ</span></span>
<span class="line">		<span class="token keyword">return</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	p<span class="token punctuation">.</span>buf <span class="token operator">=</span> p<span class="token punctuation">.</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">	p<span class="token punctuation">.</span>arg <span class="token operator">=</span> <span class="token boolean">nil</span></span>
<span class="line">	p<span class="token punctuation">.</span>value <span class="token operator">=</span> reflect<span class="token punctuation">.</span>Value<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	p<span class="token punctuation">.</span>wrappedErr <span class="token operator">=</span> <span class="token boolean">nil</span></span>
<span class="line">	ppFree<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æ³¨æ„äº‹é¡¹ï¼šå†…å­˜æµªè´¹é—®é¢˜</summary><p>æè¿°ï¼šå¦‚æœæ± å­å†…çš„<code>buffer</code>æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯å®é™…ç”¨çš„è¯æ¯”è¾ƒå°ï¼Œå°±å­˜åœ¨æµªè´¹é—®é¢˜äº†</p><p>è§£å†³ï¼šå®šä¹‰å¤šç§è§„æ ¼çš„æ± å­ï¼ŒæŒ‰éœ€ä½¿ç”¨</p><p>å‚è€ƒï¼š</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// net/httpåŒ…server.go</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	bufioReaderPool   sync<span class="token punctuation">.</span>Pool</span>
<span class="line">	bufioWriter2kPool sync<span class="token punctuation">.</span>Pool</span>
<span class="line">	bufioWriter4kPool sync<span class="token punctuation">.</span>Pool</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ¡ä»¶å˜é‡åŸºç¡€ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#æ¡ä»¶å˜é‡åŸºç¡€ä½¿ç”¨"><span>æ¡ä»¶å˜é‡åŸºç¡€ä½¿ç”¨</span></a></h3><p><code>sync.Cond</code>å¹¶ä¸è¢«æ¨èä½¿ç”¨ï¼Œè¿™é‡Œæƒå½“äº†è§£ä¸€ä¸‹</p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">read</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> c <span class="token operator">*</span>sync<span class="token punctuation">.</span>Cond<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token operator">!</span>done <span class="token punctuation">{</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ä¼šé‡Šæ”¾é”ï¼Œè¢«å”¤é†’æ—¶åˆä¼šé‡æ–°è·å¾—é”</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&quot;starts reading&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">write</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> c <span class="token operator">*</span>sync<span class="token punctuation">.</span>Cond<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&quot;starts writing&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line">	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	done <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&quot;wakes all&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	c<span class="token punctuation">.</span><span class="token function">Broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	cond <span class="token operator">:=</span> sync<span class="token punctuation">.</span><span class="token function">NewCond</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;reader1&quot;</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;reader2&quot;</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">&quot;reader3&quot;</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;writer&quot;</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="åŸå­æ“ä½œæ— é”å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#åŸå­æ“ä½œæ— é”å¹¶å‘"><span>åŸå­æ“ä½œæ— é”å¹¶å‘</span></a></h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/sync/atomic" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/sync/atomic</a></p><p><code>sync/atomic</code>åŒ…æä¾›äº†ä¸€ç³»åˆ—åŸå­ç›¸å…³æ“ä½œ</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>åŸå­æ“ä½œæ˜¯ä¸å…è®¸ä¸­æ–­çš„ï¼ˆ<code>interrupt</code>ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥å®ç°æ— é”å¹¶å‘ï¼ˆ<code>lock-free</code>ï¼‰</li><li>åŸå­æ“ä½œæ˜¯ä¸å…è®¸ä¸­æ–­çš„ï¼ˆ<code>interrupt</code>ï¼‰ï¼Œæ‰€ä»¥å®ƒå¿…é¡»å¾ˆå¿«ï¼Œæ‰€ä»¥æä¾›çš„åŸå­æ–¹æ³•æ•°é‡å¾ˆå°‘</li><li>åŸå­æ“ä½œç”±åº•å±‚ç¡¬ä»¶å®ç°ï¼Œ<code>Mutex</code>æ˜¯ç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œæ‰€ä»¥åŸå­æ“ä½œæ€§èƒ½æ›´å¥½</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰åŸºæœ¬æ•°æ®ç±»å‹-åŸå­æ“ä½œæ–¹æ³•</summary><table><thead><tr><th>åˆ†ç±»</th><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åŠ å‡æ³•</td><td>(1)<code>AddInt32(addr *int32, delta int32) (new int32)</code><br>(2)<code>AddInt64(addr *int64, delta int64) (new int64)</code><br>(3)<code>AddUint32(addr *uint32, delta uint32) (new uint32)</code><br>(4)<code>AddUint64(addr *uint64, delta uint64) (new uint64)</code><br>(5)<code>AddUintptr(addr *uintptr, delta uintptr) (new uintptr)</code></td><td>ï¼ˆ1ï¼‰å‡æ³•éœ€è¦æ³¨æ„ï¼š<br>å¯¹äº<code>Int</code>ç±»å‹ï¼ŒåŠ ä¸€ä¸ªè´Ÿæ•°å³å¯<br>å¯¹äº<code>Uint</code>ç±»å‹ï¼Œä½¿ç”¨ä½è¿ç®—æ¥å¾—åˆ°è´Ÿæ•°<br>ï¼ˆ2ï¼‰è¿™ä¸ªåªæ”¯æŒ5ç§æ•°æ®ç±»å‹</td></tr><tr><td>äº¤æ¢</td><td>(1)<code>SwapInt32(addr *int32, new int32) (old int32)</code><br>(2)<code>SwapInt64(addr *int64, new int64) (old int64)</code><br>(3)<code>SwapUint32(addr *uint32, new uint32) (old uint32)</code><br>(4)<code>SwapUint64(addr *uint64, new uint64) (old uint64)</code><br>(5)<code>SwapUintptr(addr *uintptr, new uintptr) (old uintptr)</code><br>(6)<code>SwapPointer(addr *unsafe.Pointer, new unsafe.Pointer) (old unsafe.Pointer)</code></td><td>&quot;èµ‹å€¼&quot;å¹¶è¿”å›æ—§å€¼</td></tr><tr><td>æ¯”è¾ƒå¹¶äº¤æ¢</td><td>(1)<code>CompareAndSwapInt32(addr *int32, old, new int32) (swapped bool)</code><br>(2)<code>CompareAndSwapInt64(addr *int64, old, new int64) (swapped bool)</code><br>(3)<code>CompareAndSwapUint32(addr *uint32, old, new uint32) (swapped bool)</code><br>(4)<code>CompareAndSwapUint64(addr *uint64, old, new uint64) (swapped bool)</code><br>(5)<code>CompareAndSwapUintptr(addr *uintptr, old, new uintptr) (swapped bool)</code><br>(6)<code>CompareAndSwapPointer(addr *unsafe.Pointer, old, new unsafe.Pointer) (swapped bool)</code></td><td>&quot;æ¯”è¾ƒå¹¶èµ‹å€¼&quot;å¹¶è¿”å›æ—§å€¼</td></tr><tr><td>åŠ è½½</td><td>(1)<code>LoadInt32(addr *int32) (val int32)</code><br>(2)<code>LoadInt64(addr *int64) (val int64)</code><br>(3)<code>LoadUint32(addr *uint32) (val uint32)</code><br>(4)<code>LoadUint64(addr *uint64) (val uint64)</code><br>(5)<code>LoadUintptr(addr *uintptr) (val uintptr)</code><br>(6)<code>LoadPointer(addr *unsafe.Pointer) (val unsafe.Pointer)</code></td><td>&quot;è¯»å–&quot;å˜é‡çš„å€¼</td></tr><tr><td>å­˜å‚¨</td><td>(1)<code>StoreInt32(addr *int32, val int32)</code><br>(2)<code>StoreInt64(addr *int64, val int64)</code><br>(3)<code>StoreUint32(addr *uint32, val uint32)</code><br>(4)<code>StoreUint64(addr *uint64, val uint64)</code><br>(5)<code>StoreUintptr(addr *uintptr, val uintptr)</code><br>(6)<code>StorePointer(addr *unsafe.Pointer, val unsafe.Pointer)</code></td><td>&quot;èµ‹å€¼&quot;ä¸ä¼šè¿”å›æ—§å€¼<br>è¿™ä¸ªå’Œ<code>Swap</code>ç³»åˆ—å‡½æ•°å¾ˆåƒ</td></tr></tbody></table></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰åŸºæœ¬æ•°æ®ç±»å‹-åŸå­æ“ä½œç¤ºä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync/atomic&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åŠ æ³•</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">	<span class="token keyword">var</span> y <span class="token builtin">uint32</span> <span class="token operator">=</span> <span class="token number">1000</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å› ä¸ºxæ˜¯æœ‰ç¬¦å·æ•´æ•°ï¼Œå¯ä»¥å‡æ³•å¯ä»¥å†™æˆåŠ æ³•ï¼Œ-1 -&gt; + -1</span></span>
<span class="line">	atomic<span class="token punctuation">.</span><span class="token function">AddInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token function">int32</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å› ä¸ºyæ˜¯æ— ç¬¦å·æ•´æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨uint32(-1)</span></span>
<span class="line">	<span class="token comment">// è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨^ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨ï¼ŒæŒ‰ä½å–åï¼Œå¾—åˆ°ç±»ä¼¼-1çš„æ•ˆæœ</span></span>
<span class="line">	atomic<span class="token punctuation">.</span><span class="token function">AddUint32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>y<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token function">uint32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;åŠ å‡æ³•:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;x = %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;y = %d\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\näº¤æ¢:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">100</span></span>
<span class="line">	<span class="token keyword">var</span> y <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">200</span></span>
<span class="line">	old <span class="token operator">:=</span> atomic<span class="token punctuation">.</span><span class="token function">SwapInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// yå€¼ä¿æŒä¸å˜ï¼Œxå€¼æ›´æ–°ä¸ºyå€¼ï¼Œoldä¸ºxçš„æ—§å€¼</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;x = %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;y = %d\n&quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;old = %d\n&quot;</span><span class="token punctuation">,</span> old<span class="token punctuation">)</span>	</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// å…ˆæ¯”è¾ƒï¼Œå†å†³å®šæ˜¯å¦è¦†ç›–</span></span>
<span class="line">	<span class="token comment">// å¦‚æœx == yï¼Œé‚£ä¹ˆç”¨zè¦†ç›–xï¼Œå¹¶è¿”å›true</span></span>
<span class="line">	<span class="token comment">// å¦‚æœx != yï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åšï¼Œå¹¶è¿”å›false</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\næ¯”è¾ƒå¹¶äº¤æ¢:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span></span>
<span class="line">	<span class="token keyword">var</span> y <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span></span>
<span class="line">	<span class="token keyword">var</span> z <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">400</span></span>
<span class="line">	<span class="token keyword">if</span> atomic<span class="token punctuation">.</span><span class="token function">CompareAndSwapInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: %d %d %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ¯”è¾ƒå¹¶äº¤æ¢å¤±è´¥: %d %d %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nåŠ è½½:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">999</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;x = %d\n&quot;</span><span class="token punctuation">,</span> atomic<span class="token punctuation">.</span><span class="token function">LoadInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -999</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;\nå­˜å‚¨:\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">888</span></span>
<span class="line">	atomic<span class="token punctuation">.</span><span class="token function">StoreInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;x = %d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token comment">// 222</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">åŠ å‡æ³•:</span>
<span class="line">x <span class="token operator">=</span> <span class="token number">99</span>                      </span>
<span class="line">y <span class="token operator">=</span> <span class="token number">999</span>                     </span>
<span class="line">                            </span>
<span class="line">äº¤æ¢:                       </span>
<span class="line">x <span class="token operator">=</span> <span class="token number">200</span>                     </span>
<span class="line">y <span class="token operator">=</span> <span class="token number">200</span>                     </span>
<span class="line">old <span class="token operator">=</span> <span class="token parameter variable">-100</span>                  </span>
<span class="line">                            </span>
<span class="line">æ¯”è¾ƒå¹¶äº¤æ¢:                 </span>
<span class="line">æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: <span class="token number">400</span> <span class="token parameter variable">-300</span> <span class="token number">400</span></span>
<span class="line">                            </span>
<span class="line">è½½å…¥:                       </span>
<span class="line">x <span class="token operator">=</span> <span class="token parameter variable">-999</span>                    </span>
<span class="line">                            </span>
<span class="line">å­˜å‚¨:                       </span>
<span class="line">x <span class="token operator">=</span> <span class="token number">222</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰ä»»æ„æ•°æ®ç±»å‹-åŸå­æ“ä½œç¤ºä¾‹</summary><p>å¦‚æœæ˜¯å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œ<code>atomic</code>ä¸ºæˆ‘ä»¬æä¾›äº†<code>Value</code>ç»“æ„ä½“æ¥åŸå­æ“ä½œ</p><p>æ³¨æ„äº‹é¡¹</p><ul><li>é»˜è®¤ä¸º<code>nil</code>å€¼</li><li>åŸå­å€¼å­˜å‚¨çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå†³å®šäº†å®ƒä»Šåèƒ½ä¸”åªèƒ½å­˜å‚¨å“ªä¸€ä¸ªç±»å‹çš„å€¼</li><li>åˆ‡ç‰‡ã€æ˜ å°„ç­‰ä¸æ”¯æŒ&quot;æ¯”è¾ƒå¹¶äº¤æ¢&quot;</li></ul><p>ç¤ºä¾‹ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync/atomic&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// åˆå§‹åŒ–</span></span>
<span class="line">	<span class="token keyword">var</span> v atomic<span class="token punctuation">.</span>Value</span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å­˜å‚¨ä»»æ„æ•°æ®ç±»å‹</span></span>
<span class="line">	v<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// åŠ è½½ä»»æ„æ•°æ®ç±»å‹</span></span>
<span class="line">	x <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;xçš„æ•°æ®ç±»å‹: %T | xçš„å€¼: %#v\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> x<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// äº¤æ¢</span></span>
<span class="line">	v<span class="token punctuation">.</span><span class="token function">Swap</span><span class="token punctuation">(</span><span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ¯”è¾ƒå¹¶äº¤æ¢</span></span>
<span class="line">	<span class="token keyword">if</span> v<span class="token punctuation">.</span><span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token string">&quot;world!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: %s\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;æ¯”è¾ƒå¹¶äº¤æ¢å¤±è´¥: %s\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰ä½¿ç”¨åŸå­æ“ä½œä¼˜åŒ–ä¸¾ä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync/atomic&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> data <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">//data++                  // éåŸå­æ“ä½œï¼Œè¿™ä¼šå¼•èµ·æ•°æ®ç«äº‰</span></span>
<span class="line">			atomic<span class="token punctuation">.</span><span class="token function">AddInt64</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// åŸå­æ“ä½œ</span></span>
<span class="line">			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="è¿è¡Œæ—¶æ•°æ®ç«äº‰æ£€æµ‹" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ—¶æ•°æ®ç«äº‰æ£€æµ‹"><span>è¿è¡Œæ—¶æ•°æ®ç«äº‰æ£€æµ‹</span></a></h3><p>å¹¶å‘è¯»å†™å…±äº«èµ„æºçš„æ—¶å€™ä¼šå‡ºç°æ•°æ®ç«äº‰<code>(data race)</code>ï¼Œæ‰€ä»¥éœ€è¦åƒé”ç­‰æœºåˆ¶æ¥è¿›è¡Œä¿æŠ¤</p><p>åœ¨ç¼–è¯‘<code>(cmpile)</code>ã€æµ‹è¯•<code>ï¼ˆtestï¼‰</code>ã€è¿è¡Œ<code>ï¼ˆrunï¼‰</code>å‰ä½¿ç”¨<code>--race</code>é€‰é¡¹èƒ½æ£€æµ‹æ•°æ®ç«äº‰é—®é¢˜ï¼Œ</p><p>ä»–çš„åŸç†æ˜¯ï¼šåœ¨ç¨‹åºè¿è¡Œä»¥åï¼Œä¼šç›‘æ§ç¨‹åºå¯¹å†…å­˜åœ°å€è®¿é—®ï¼Œå¹¶æ‰“å°å‡ºæç¤º</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¦‚æœç¨‹åºåœ¨ä»¥åä¼šè®¿é—®æŸä¸ªèµ„æºï¼Œæ­¤æ—¶ä½¿ç”¨<code>--race</code>æ˜¯æ£€æµ‹ä¸åˆ°çš„</li><li>å¼€å¯äº†<code>--race</code>ä¸è¦éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œå› ä¸ºä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œæµ‹è¯•æœŸé—´å¯ä»¥å¼€å¯<code>--race</code></li></ul><details class="hint-container details"><summary>å¹¶å‘ä¸å®‰å…¨ä»£ç </summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> data <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			data<span class="token operator">++</span></span>
<span class="line">			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ¯æ¬¡è¿è¡Œç»“æœéƒ½ä¸ä¸€æ ·ï¼Œå¤§æ¦‚åœ¨ä¸º9600å·¦å³ï¼ŒåŸç†æ˜¯äº§ç”Ÿäº†æ•°æ®ç«äº‰ï¼Œdata++ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ“ä½œæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„</span></span>
<span class="line"><span class="token comment">// æ¯”å¦‚è¯´ æœ‰2ä¸ªåç¨‹åŒæ—¶æ‹¿åˆ°äº†dataä¸º100ï¼Œé‚£ä¹ˆåç¨‹1ç»™data+1=101ï¼Œåç¨‹2ä¹Ÿç»™data+1=101ï¼Œç»è¿‡è¿™ä¿©åç¨‹ä¸€ç•ªæ“ä½œï¼Œdataåªå¢é•¿äº†1ï¼Œ</span></span>
<span class="line"><span class="token comment">// æ‰€ä»¥æˆ‘ä»¬è™½ç„¶å¾ªç¯äº†ä¸€ä¸‡æ¬¡ï¼Œå…¶å®ç»“æœè¦&lt;=10000ï¼Œå¦‚æœå°†ä¸Šé¢çš„å¾ªç¯æ¬¡æ•°ä¿®æ”¹ä¸º100æ¬¡ï¼Œé‚£ä¹ˆç»“æœæ˜¯æ­£ç¡®çš„ï¼Œä½†å…¶å®æ˜¯è¿˜æ˜¯æœ‰é—®é¢˜çš„</span></span>
<span class="line"></span></code></pre></div><p>ä¸‹é¢å¼€å¯<code>--race</code>æ£€æµ‹æ•°æ®ç«äº‰</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">Goroutine <span class="token number">8</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> created at:</span>
<span class="line">  main.main<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      C:/Users/Administrator/GolandProjects/learn/main.go:14 +0x84</span>
<span class="line"></span>
<span class="line">Goroutine <span class="token number">7</span> <span class="token punctuation">(</span>finished<span class="token punctuation">)</span> created at:</span>
<span class="line">  main.main<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      C:/Users/Administrator/GolandProjects/learn/main.go:14 +0x84</span>
<span class="line"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span></span>
<span class="line"><span class="token number">10000</span></span>
<span class="line">Found <span class="token number">1</span> data race<span class="token punctuation">(</span>s<span class="token punctuation">)</span>	<span class="token comment"># å‘ç°1ä¸ªæ•°æ®ç«äº‰</span></span>
<span class="line"><span class="token builtin class-name">exit</span> status <span class="token number">66</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ1ï¼‰è§£å†³æ–¹å¼1ï¼šåŠ é”</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> data <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line">	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex</span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			data<span class="token operator">++</span></span>
<span class="line">			mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¿è¡Œå¹¶å¼€å¯--raceæ£€æµ‹</span></span>
<span class="line"><span class="token comment">// go run -race main.go  </span></span>
<span class="line"><span class="token comment">// 10000</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰è§£å†³æ–¹å¼2ï¼šåŸå­æ“ä½œ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync&quot;</span></span>
<span class="line">	<span class="token string">&quot;sync/atomic&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> data <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup</span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">//data++ // éåŸå­æ“ä½œï¼Œè¿™ä¼šå¼•èµ·æ•°æ®ç«äº‰</span></span>
<span class="line">			atomic<span class="token punctuation">.</span><span class="token function">AddInt64</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// åŸå­æ“ä½œ,è¿™é‡Œæ‰‹åŠ¨å°†dataçš„ç±»å‹æ”¹ä¸ºäº†int64,å¦‚æœä¸æ”¹ç±»å‹å¦‚ä½•åš?</span></span>
<span class="line">			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div></details><h2 id="-7" tabindex="-1"><a class="header-anchor" href="#-7"><span></span></a></h2><h2 id="ç¨‹åºä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ç¨‹åºä¼˜åŒ–"><span>ç¨‹åºä¼˜åŒ–</span></a></h2><h3 id="åŸºç¡€ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ä¼˜åŒ–"><span>åŸºç¡€ä¼˜åŒ–</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰gofmtæ ¼å¼åŒ–ä»£ç </summary><p>è¯´æ˜ï¼š</p><ul><li><code>gofmt</code>æ˜¯ä¸€ä¸ªå†…ç½®çš„ç‹¬ç«‹çš„äºŒè¿›åˆ¶å‘½ä»¤ï¼Œæ¨èä½¿ç”¨</li><li><code>go fmt</code>æ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„gofmtï¼Œç›¸å½“äº<code>gofmt -l -w</code></li></ul><p>æ¨èå‘½ä»¤</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">gofmt <span class="token parameter variable">-w</span> <span class="token parameter variable">-r</span> <span class="token string">&quot;interface{} -&gt; any&quot;</span> <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å‚æ•°è§£é‡Š</span></span>
<span class="line"><span class="token comment"># -w ä¼šä¿®æ”¹æºæ–‡ä»¶</span></span>
<span class="line"><span class="token comment"># -r æŒ‡å®šäº†ä¸€æ¡é‡å†™è§„åˆ™,å°†æ‰€æœ‰çš„interface{}æ›¿æ¢ä¸ºany</span></span>
<span class="line"></span></code></pre></div><p>æµ‹è¯•ç”¨ä¾‹</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Ge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;=</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">a <span class="token operator">:=</span> <span class="token number">1</span></span>
<span class="line">b <span class="token operator">:=</span> <span class="token number">2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Ge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Ge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&gt;=</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    a <span class="token operator">:=</span> <span class="token number">1</span></span>
<span class="line">    b <span class="token operator">:=</span> <span class="token number">2</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">Ge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// aå’Œbçš„ç¼©è¿›å·²ç»è¢«æ­£ç¡®æ ¼å¼åŒ–</span></span>
<span class="line"><span class="token comment">// å¯¹äºGeå‡½æ•°ï¼Œå¹¶æ²¡æœ‰æ ¼å¼åŒ–æˆ return a &gt;= b</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰go veté™æ€ä»£ç æ£€æŸ¥</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello world!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line">%<span class="token operator">!</span>d<span class="token punctuation">(</span>string<span class="token operator">=</span>hello world<span class="token operator">!</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>cli-tpl<span class="token operator">&gt;</span>go vet <span class="token builtin class-name">.</span>       </span>
<span class="line"><span class="token comment"># example</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:6:2: fmt.Printf <span class="token function">format</span> %d has arg <span class="token string">&quot;hello world!&quot;</span> of wrong <span class="token builtin class-name">type</span> string</span>
<span class="line"></span></code></pre></div></details><br><h3 id="å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å•å…ƒæµ‹è¯•"><span>å•å…ƒæµ‹è¯•</span></a></h3><p>è¯´æ˜ï¼š</p><ul><li>æ–‡ä»¶åè¦ä»¥<code>_test.go</code>ç»“å°¾</li><li>å‡½æ•°ç­¾å<code>TestXXX(t *testing.T)</code>ï¼Œå…¶ä¸­<code>XXX</code>å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸€èˆ¬ä¸ºæˆ‘ä»¬è¦æµ‹è¯•çš„å‡½æ•°</li><li>æµ‹è¯•å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼š<code>go test .</code></li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰å•å…ƒæµ‹è¯•ä¸¾ä¾‹</summary><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> n1 <span class="token operator">+</span> n2</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int64</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> a<span class="token punctuation">,</span> b <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int64</span> <span class="token punctuation">{</span></span>
<span class="line">		a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b</span>
<span class="line">		<span class="token keyword">return</span> a</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fib <span class="token operator">:=</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>main_test.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">TestAdd</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">int</span> <span class="token punctuation">}</span><span class="token punctuation">{</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// è¿™é‡Œæ•…æ„å†™é”™</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> ret <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> ret <span class="token operator">!=</span> v<span class="token punctuation">.</span>c <span class="token punctuation">{</span></span>
<span class="line">			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;Add(%d, %d) got %d, expectd %d\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> v<span class="token punctuation">.</span>c<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># è¿è¡Œ</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token builtin class-name">.</span></span>
<span class="line">--- FAIL: TestAdd <span class="token punctuation">(</span><span class="token number">0</span>.00s<span class="token punctuation">)</span></span>
<span class="line">    main_test.go:15: Add<span class="token punctuation">(</span><span class="token number">6</span>, <span class="token number">7</span><span class="token punctuation">)</span> got <span class="token number">13</span>, expectd <span class="token number">14</span></span>
<span class="line">FAIL</span>
<span class="line">FAIL    demo    <span class="token number">0</span>.628s</span>
<span class="line">FAIL</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŸ¥çœ‹ä»£ç è¦†ç›–ç‡</summary><p>1ã€è¿˜æ˜¯ä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„åŒæ—¶è¾“å‡ºä»£ç è¦†ç›–ç‡</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-coverprofile</span><span class="token operator">=</span>c.out <span class="token builtin class-name">.</span></span>
<span class="line">--- FAIL: TestAdd <span class="token punctuation">(</span><span class="token number">0</span>.00s<span class="token punctuation">)</span></span>
<span class="line">    main_test.go:15: Add<span class="token punctuation">(</span><span class="token number">6</span>, <span class="token number">7</span><span class="token punctuation">)</span> got <span class="token number">13</span>, expectd <span class="token number">14</span></span>
<span class="line">FAIL</span>
<span class="line">coverage: <span class="token number">12.5</span>% of statements        <span class="token comment"># ä»£ç è¦†ç›–ç‡åªæœ‰12.5%</span></span>
<span class="line">FAIL    demo    <span class="token number">0</span>.593s</span>
<span class="line">FAIL</span>
<span class="line"></span></code></pre></div><p>2ã€çœ‹ä¸€ä¸‹c.outçš„å†…å®¹ï¼Œçœ‹ä¸æ‡‚ï¼Œä¸è¿‡æ²¡å…³ç³»</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mode: <span class="token builtin class-name">set</span></span>
<span class="line">demo/main.go:7.26,9.2 <span class="token number">1</span> <span class="token number">1</span></span>
<span class="line">demo/main.go:11.31,13.22 <span class="token number">2</span> <span class="token number">0</span></span>
<span class="line">demo/main.go:13.22,16.3 <span class="token number">2</span> <span class="token number">0</span></span>
<span class="line">demo/main.go:19.13,21.27 <span class="token number">2</span> <span class="token number">0</span></span>
<span class="line">demo/main.go:21.27,23.3 <span class="token number">1</span> <span class="token number">0</span></span>
<span class="line"></span></code></pre></div><p>3ã€ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä¼šæ‰“å¼€æµè§ˆå™¨ï¼Œçº¢è‰²çš„å°±æ˜¯æ²¡æœ‰æµ‹è¯•åˆ°çš„ä»£ç </p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go tool cover <span class="token parameter variable">-html</span><span class="token operator">=</span>c.out</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20221119112441117.png" alt="image-20221119112441117"></p><p><strong>4ã€ä¿®æ­£å•å…ƒæµ‹è¯•ä¸­çš„é”™è¯¯å¹¶ä¼˜åŒ–ä»£ç è¦†ç›–ç‡</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">TestAdd</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">int</span> <span class="token punctuation">}</span><span class="token punctuation">{</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// ä¿®æ­£é”™è¯¯</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> ret <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> ret <span class="token operator">!=</span> v<span class="token punctuation">.</span>c <span class="token punctuation">{</span></span>
<span class="line">			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;Add(%d, %d) got %d, expectd %d\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> v<span class="token punctuation">.</span>c<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">TestFibonacci</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int64</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	fib <span class="token operator">:=</span> <span class="token function">Fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> ret <span class="token operator">:=</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ret <span class="token operator">!=</span> v <span class="token punctuation">{</span></span>
<span class="line">			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;TestFibonacci()=&gt;fib() got %d, expected %d\n&quot;</span><span class="token punctuation">,</span> ret<span class="token punctuation">,</span> v<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><strong>5ã€å†æ¬¡æµ‹è¯•</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ‰§è¡Œå•å…ƒæµ‹è¯•</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-coverprofile</span><span class="token operator">=</span>c.out <span class="token builtin class-name">.</span></span>
<span class="line">ok      demo    <span class="token number">0</span>.040s  coverage: <span class="token number">62.5</span>% of statements      <span class="token comment"># å·²ç»æé«˜åˆ°62.5%</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å“ªäº›ä»£ç æ²¡æœ‰æµ‹è¯•åˆ°</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>demo<span class="token operator">&gt;</span>go tool cover <span class="token parameter variable">-html</span><span class="token operator">=</span>c.out</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20221119113455828.png" alt="image-20221119113455828"></p></details><br><h3 id="æ¨¡ç³Šæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æ¨¡ç³Šæµ‹è¯•"><span>æ¨¡ç³Šæµ‹è¯•</span></a></h3><p>æ–‡æ¡£ï¼š<a href="https://go.dev/security/fuzz/" target="_blank" rel="noopener noreferrer">https://go.dev/security/fuzz/</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æ¨¡ç³Šæµ‹è¯•ï¼šè‹¥æµ‹è¯•ä¸é€šè¿‡åˆ™ä¼šé€€å‡º</summary><p><code>main_test.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Equal</span><span class="token punctuation">(</span>a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">FuzzEqual</span><span class="token punctuation">(</span>f <span class="token operator">*</span>testing<span class="token punctuation">.</span>F<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	f<span class="token punctuation">.</span><span class="token function">Fuzz</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">Equal</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-fuzz</span> <span class="token builtin class-name">.</span></span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/10 completed</span>
<span class="line">failure <span class="token keyword">while</span> testing seed corpus entry: FuzzEqual/84ed65595ad05a58</span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/10 completed</span>
<span class="line">--- FAIL: FuzzEqual <span class="token punctuation">(</span><span class="token number">0</span>.04s<span class="token punctuation">)</span>                                                                                  </span>
<span class="line">    --- FAIL: FuzzEqual <span class="token punctuation">(</span><span class="token number">0</span>.00s<span class="token punctuation">)</span>                                                                              </span>
<span class="line">        testing.go:1485: panic: runtime error: index out of range <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> with length <span class="token number">0</span>                          </span>
<span class="line">            goroutine <span class="token number">14</span> <span class="token punctuation">[</span>running<span class="token punctuation">]</span>:                                                                          </span>
<span class="line">            runtime/debug.Stack<span class="token punctuation">(</span><span class="token punctuation">)</span>                                                                            </span>
<span class="line">                D:/software/go1.21/src/runtime/debug/stack.go:24 +0x9e                                       </span>
<span class="line">            testing.tRunner.func1<span class="token punctuation">(</span><span class="token punctuation">)</span>                                                                          </span>
<span class="line">                D:/software/go1.21/src/testing/testing.go:1485 +0x1f6                                        </span>
<span class="line">            panic<span class="token punctuation">(</span><span class="token punctuation">{</span>0x9c2f80, 0xc00000e168<span class="token punctuation">}</span><span class="token punctuation">)</span>                                                                  </span>
<span class="line">                D:/software/go1.21/src/runtime/panic.go:884 +0x213                                           </span>
<span class="line">            example.Equal<span class="token punctuation">(</span><span class="token punctuation">..</span>.<span class="token punctuation">)</span>                                                                               </span>
<span class="line">                D:/application/GoLand/example/main_test.go:7                                                 </span>
<span class="line">            example.FuzzEqual.func1<span class="token punctuation">(</span>0x7?, <span class="token punctuation">{</span>0xc000010648?, 0x1?, 0x0?<span class="token punctuation">}</span>, <span class="token punctuation">{</span>0xb793b0?, 0x0?, 0x0?<span class="token punctuation">}</span><span class="token punctuation">)</span>              </span>
<span class="line">                D:/application/GoLand/example/main_test.go:16 +0x13d                                         </span>
<span class="line">            reflect.Value.call<span class="token punctuation">(</span><span class="token punctuation">{</span>0x9a3660?, 0x9e3158?, 0x80ea96?<span class="token punctuation">}</span>, <span class="token punctuation">{</span>0x9d28b3, 0x4<span class="token punctuation">}</span>, <span class="token punctuation">{</span>0xc00005e3c0, 0x3, 0x4?<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">                D:/software/go1.21/src/reflect/value.go:586 +0xb07                                           </span>
<span class="line">            reflect.Value.Call<span class="token punctuation">(</span><span class="token punctuation">{</span>0x9a3660?, 0x9e3158?, 0xae9230?<span class="token punctuation">}</span>, <span class="token punctuation">{</span>0xc00005e3c0?, 0x9d1ea0?, 0xc000010660?<span class="token punctuation">}</span><span class="token punctuation">)</span> </span>
<span class="line">                D:/software/go1.21/src/reflect/value.go:370 +0xbc                                            </span>
<span class="line">            testing.<span class="token punctuation">(</span>*F<span class="token punctuation">)</span>.Fuzz.func1.1<span class="token punctuation">(</span>0x0?<span class="token punctuation">)</span></span>
<span class="line">                D:/software/go1.21/src/testing/fuzz.go:335 +0x3f3</span>
<span class="line">            testing.tRunner<span class="token punctuation">(</span>0xc0000d0000, 0xc0000b0480<span class="token punctuation">)</span></span>
<span class="line">                D:/software/go1.21/src/testing/testing.go:1576 +0x10b</span>
<span class="line">            created by testing.<span class="token punctuation">(</span>*F<span class="token punctuation">)</span>.Fuzz.func1</span>
<span class="line">                D:/software/go1.21/src/testing/fuzz.go:322 +0x5b9</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">FAIL</span>
<span class="line"><span class="token builtin class-name">exit</span> status <span class="token number">1</span></span>
<span class="line">FAIL    example <span class="token number">0</span>.068s</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æ¨¡ç³Šæµ‹è¯•ï¼šä¿®æ­£ä»£ç ï¼Œæµ‹è¯•ä¼šä¸€ç›´æŒç»­ä¸‹å»ï¼Œç›´åˆ°é‡åˆ°æµ‹è¯•å¤±è´¥çš„ç”¨ä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Equal</span><span class="token punctuation">(</span>a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">FuzzEqual</span><span class="token punctuation">(</span>f <span class="token operator">*</span>testing<span class="token punctuation">.</span>F<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	f<span class="token punctuation">.</span><span class="token function">Fuzz</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">Equal</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-fuzz</span> <span class="token builtin class-name">.</span></span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/10 completed</span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">10</span>/10 completed, now fuzzing with <span class="token number">8</span> workers</span>
<span class="line">fuzz: elapsed: 3s, execs: <span class="token number">479364</span> <span class="token punctuation">(</span><span class="token number">159361</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 6s, execs: <span class="token number">987591</span> <span class="token punctuation">(</span><span class="token number">169596</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 9s, execs: <span class="token number">1483634</span> <span class="token punctuation">(</span><span class="token number">165532</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 12s, execs: <span class="token number">1979287</span> <span class="token punctuation">(</span><span class="token number">165039</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 15s, execs: <span class="token number">2496426</span> <span class="token punctuation">(</span><span class="token number">172389</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 18s, execs: <span class="token number">3019692</span> <span class="token punctuation">(</span><span class="token number">173678</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æ¨¡ç³Šæµ‹è¯•ï¼šæ‰‹åŠ¨æ·»åŠ æµ‹è¯•ç”¨ä¾‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Equal</span><span class="token punctuation">(</span>a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">return</span> <span class="token boolean">false</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">FuzzEqual</span><span class="token punctuation">(</span>f <span class="token operator">*</span>testing<span class="token punctuation">.</span>F<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	f<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;c&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;c&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	f<span class="token punctuation">.</span><span class="token function">Fuzz</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">Equal</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/11 completed</span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">11</span>/11 completed, now fuzzing with <span class="token number">8</span> workers</span>
<span class="line">fuzz: elapsed: 3s, execs: <span class="token number">507288</span> <span class="token punctuation">(</span><span class="token number">168238</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 6s, execs: <span class="token number">1019869</span> <span class="token punctuation">(</span><span class="token number">171634</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 9s, execs: <span class="token number">1550486</span> <span class="token punctuation">(</span><span class="token number">176602</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 12s, execs: <span class="token number">2075441</span> <span class="token punctuation">(</span><span class="token number">174965</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 15s, execs: <span class="token number">2582182</span> <span class="token punctuation">(</span><span class="token number">168777</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">..</span>.</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æ¨¡ç³Šæµ‹è¯•ï¼šæŒ‡å®šæµ‹è¯•æ—¶é•¿</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ³¨æ„è¿™é‡Œ-fuzz=Fuzz</span></span>
<span class="line"><span class="token comment"># 1ã€-fuzz å…¶å®åé¢è¿˜æœ‰ä¸ªå€¼ regexp, å†™ä¸€ä¸ªæ­£åˆ™ç”¨æ¥æµ‹è¯•å“ªäº›å‡½æ•°</span></span>
<span class="line"><span class="token comment"># 2ã€å½“ä»…ç”¨-fuzzçš„æ—¶å€™ä¸å†™å€¼ä¹Ÿæ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåé¢è¿˜æœ‰é€‰é¡¹ï¼Œåˆ™å¿…é¡»å†™æˆè¿™ç§å½¢å¼ -fuzz=regexp</span></span>
<span class="line"><span class="token comment"># 3ã€æ‰€æœ‰çš„æ¨¡ç³Šæµ‹è¯•å‡½æ•°éƒ½è¦ä»¥Fuzzå¼€å¤´ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç›´æ¥å°±å†™Fuzzï¼Œç”¨äºæµ‹è¯•æ‰€æœ‰çš„å‡½æ•°</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-fuzz</span><span class="token operator">=</span>Fuzz <span class="token parameter variable">-fuzztime</span><span class="token operator">=</span>10s <span class="token builtin class-name">.</span></span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/11 completed</span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">11</span>/11 completed, now fuzzing with <span class="token number">8</span> workers</span>
<span class="line">fuzz: elapsed: 3s, execs: <span class="token number">478618</span> <span class="token punctuation">(</span><span class="token number">158705</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 6s, execs: <span class="token number">980187</span> <span class="token punctuation">(</span><span class="token number">167299</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 9s, execs: <span class="token number">1508852</span> <span class="token punctuation">(</span><span class="token number">176493</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 10s, execs: <span class="token number">1690426</span> <span class="token punctuation">(</span><span class="token number">161845</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">PASS</span>
<span class="line">ok      example <span class="token number">10</span>.164s</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æ¨¡ç³Šæµ‹è¯•ï¼šæŒ‡å®šè¿›ç¨‹æ•°</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># é»˜è®¤å¯åŠ¨çš„è¿›ç¨‹æ•°ç­‰äºé€»è¾‘CPUæ ¸å¿ƒæ•°,è¿™ä¼šæ¶ˆè€—æ¯”è¾ƒå¤šçš„èµ„æº, -parallelæŒ‡å®šè¿›ç¨‹æ•°</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-fuzz</span><span class="token operator">=</span>Fuzz <span class="token parameter variable">-fuzztime</span><span class="token operator">=</span>10s <span class="token parameter variable">-parallel</span><span class="token operator">=</span><span class="token number">1</span> <span class="token builtin class-name">.</span> </span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">0</span>/11 completed</span>
<span class="line">fuzz: elapsed: 0s, gathering baseline coverage: <span class="token number">11</span>/11 completed, now fuzzing with <span class="token number">1</span> workers</span>
<span class="line">fuzz: elapsed: 3s, execs: <span class="token number">113279</span> <span class="token punctuation">(</span><span class="token number">37629</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 6s, execs: <span class="token number">224589</span> <span class="token punctuation">(</span><span class="token number">37204</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 9s, execs: <span class="token number">340262</span> <span class="token punctuation">(</span><span class="token number">38555</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">fuzz: elapsed: 10s, execs: <span class="token number">379884</span> <span class="token punctuation">(</span><span class="token number">36828</span>/sec<span class="token punctuation">)</span>, new interesting: <span class="token number">0</span> <span class="token punctuation">(</span>total: <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">PASS</span>
<span class="line">ok      example <span class="token number">10</span>.109s</span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ€§èƒ½æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½æµ‹è¯•"><span>æ€§èƒ½æµ‹è¯•</span></a></h3><p>è¯´æ˜ï¼š</p><ul><li>æ–‡ä»¶åè¦ä»¥<code>_test.go</code>ç»“å°¾</li><li>å‡½æ•°ç­¾å<code>BenchmarkXX(b *testing.B)</code>ï¼Œï¼Œå…¶ä¸­<code>XXX</code>å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸€èˆ¬ä¸ºæˆ‘ä»¬è¦æµ‹è¯•çš„å‡½æ•°</li><li>æµ‹è¯•å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼š<code>go test -bench . </code></li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æ€§èƒ½æµ‹è¯•ä¸¾ä¾‹</summary><p><code>main_test.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸ºäº†æ¼”ç¤ºæ–¹æ³•ï¼Œå°†å®é™…çš„ä»£ç ä¹Ÿåœ¨å†™è¿™é‡Œ</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> n1 <span class="token operator">+</span> n2</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkAdd</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è¿™é‡Œæ˜¯é‡ç½®æ—¶é—´ï¼Œå¦‚æœä¸Šé¢æœ‰è€—æ—¶åˆå§‹åŒ–çš„è¯å¯ä»¥æ·»åŠ è¿™ä¸€å¥</span></span>
<span class="line">	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// b.Næ˜¯æ€§èƒ½æµ‹è¯•ä¸ºæˆ‘ä»¬æä¾›çš„è®¡æ•°å™¨</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">Add</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># åŸºæœ¬å‚æ•°</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span></span>
<span class="line">goos: windows</span>
<span class="line">goarch: amd64</span>
<span class="line">pkg: example</span>
<span class="line">cpu: Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-4790K CPU @ <span class="token number">4</span>.00GHz</span>
<span class="line">BenchmarkAdd-8          <span class="token number">1000000000</span>               <span class="token number">0.2540</span> ns/op</span>
<span class="line">PASS</span>
<span class="line">ok      example <span class="token number">2</span>.602s</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line"><span class="token comment"># 1.BenchmarkAddæ˜¯æˆ‘ä»¬çš„æµ‹è¯•å‡½æ•°åç§°</span></span>
<span class="line"><span class="token comment"># 2.-8è¿™é‡Œçš„8æŒ‡çš„æ˜¯ä¸»æœºçš„é€»è¾‘CPUä¸ªæ•°</span></span>
<span class="line"><span class="token comment"># 3.1000000000æŒ‡çš„æ˜¯è¯¥å‡½æ•°è¿è¡Œçš„æ¬¡æ•°</span></span>
<span class="line"><span class="token comment"># 4.0.2540 ns/opæŒ‡çš„æ˜¯æ¯æ¬¡è¿è¡Œå‡½æ•°æ¶ˆè€—çš„çº³ç§’</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å…¶ä»–å‚æ•°</span></span>
<span class="line"><span class="token parameter variable">-benchmem</span>        è¾“å‡ºå†…å­˜åˆ†é…ç»Ÿè®¡ä¿¡æ¯<span class="token punctuation">(</span>B/op æ¯æ¬¡åˆ†é…å†…å­˜å¤§å°, allocs/op æ¯æ¬¡åˆ†é…å†…å­˜æ¬¡æ•°<span class="token punctuation">)</span> go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-benchmem</span></span>
<span class="line"></span>
<span class="line"><span class="token parameter variable">-benchtime</span> 1s    æŒ‡å®šæ¯ä¸ªå‡½æ•°è¿è¡Œæ—¶é•¿,é»˜è®¤ä¸º1s                    go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-benchtime</span> 10s</span>
<span class="line"><span class="token parameter variable">-benchtime</span> 1000x æŒ‡å®šæ¯ä¸ªå‡½æ•°è¿è¡Œæ¬¡æ•°,æ³¨æ„åé¢è¦åŠ ä¸ªx,é»˜è®¤ä¸ºåäº¿æ¬¡    go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-benchtime</span> 100x</span>
<span class="line"></span></code></pre></div></details><br><h3 id="pprofç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#pprofç®€ä»‹"><span>PProfç®€ä»‹</span></a></h3><p>æ–‡æ¡£ï¼š</p><ul><li><a href="https://go.dev/doc/diagnostics" target="_blank" rel="noopener noreferrer">https://go.dev/doc/diagnostics</a></li><li><a href="https://go.dev/blog/pprof" target="_blank" rel="noopener noreferrer">https://go.dev/blog/pprof</a></li></ul><br><p>ä¸»è¦å…³æ³¨çš„æ€§èƒ½æŒ‡æ ‡</p><ul><li>CPU Profileï¼šæŠ¥å‘Šç¨‹åºçš„ CPU ä½¿ç”¨æƒ…å†µï¼ŒæŒ‰ç…§ä¸€å®šé¢‘ç‡å»é‡‡é›†åº”ç”¨ç¨‹åºåœ¨ CPU å’Œå¯„å­˜å™¨ä¸Šé¢çš„æ•°æ®</li><li>Memory Profileï¼ˆHeap Profileï¼‰ï¼šæŠ¥å‘Šç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µ</li><li>Goroutine Profilingï¼šæŠ¥å‘Š goroutines çš„ä½¿ç”¨æƒ…å†µï¼Œæœ‰å“ªäº› goroutineï¼Œå®ƒä»¬çš„è°ƒç”¨å…³ç³»æ˜¯æ€æ ·çš„</li><li>Block Profilingï¼šæŠ¥å‘Š goroutines ä¸åœ¨è¿è¡ŒçŠ¶æ€çš„æƒ…å†µï¼Œå¯ä»¥ç”¨æ¥åˆ†æå’ŒæŸ¥æ‰¾æ­»é”ç­‰æ€§èƒ½ç“¶é¢ˆ</li></ul><p>Goæ ‡å‡†åº“ç”¨äºç”ŸæˆProfile</p><ul><li><p>runtime/pprofï¼šé€‚ç”¨äºå·¥å…·ç±»åº”ç”¨</p></li><li><p>net/http/pprofï¼šé€‚ç”¨äºæœåŠ¡ç±»åº”ç”¨</p></li></ul><p>ç¬¬ä¸‰æ–¹è¾…åŠ©å·¥å…·</p><ul><li><a href="https://graphviz.org/" target="_blank" rel="noopener noreferrer">Graphviz</a>ï¼šå¼€æºå›¾å½¢å¯è§†åŒ–è½¯ä»¶ï¼Œå¼ºçƒˆå»ºè®®å®‰è£…</li></ul><br><p><strong>1ã€æœ¬åœ°æ–‡ä»¶æ–¹å¼é‡‡é›†Profile</strong></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰é‡‡é›†CPU Profileï¼šé€šç”¨æ­¥éª¤è¯¦ç»†ä»‹ç»ç‰ˆ</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;flag&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime/pprof&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	cpuprofile <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;cpuprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write cpu profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-A    running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">10000</span> <span class="token operator">*</span> <span class="token number">10000</span> <span class="token operator">*</span> <span class="token number">800</span></span>
<span class="line">	sum <span class="token operator">:=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		sum <span class="token operator">+=</span> i</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-B    running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	n <span class="token operator">:=</span> <span class="token number">10000</span> <span class="token operator">*</span> <span class="token number">10000</span> <span class="token operator">*</span> <span class="token number">200</span></span>
<span class="line">	sum <span class="token operator">:=</span> <span class="token number">0</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		sum <span class="token operator">+=</span> i</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-Main running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£æå‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line">	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† CPU Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>cpuprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">		f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>cpuprofile<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		err <span class="token operator">=</span> pprof<span class="token punctuation">.</span><span class="token function">StartCPUProfile</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">defer</span> pprof<span class="token punctuation">.</span><span class="token function">StopCPUProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¸»è¦çš„ä»£ç åŒºåŸŸ</span></span>
<span class="line">	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>1ã€æ‰§è¡Œç¨‹åº</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go <span class="token parameter variable">-cpuprofile</span><span class="token operator">=</span>cpu.prof</span>
<span class="line">Function-B    running <span class="token function">time</span> is <span class="token number">5.00</span> seconds</span>
<span class="line">Function-A    running <span class="token function">time</span> is <span class="token number">24.99</span> seconds</span>
<span class="line">Function-Main running <span class="token function">time</span> is <span class="token number">25.12</span> seconds</span>
<span class="line"></span></code></pre></div><p>2ã€ä»¥ç»ˆç«¯æ–¹å¼è§£æCPU Profileæ–‡ä»¶</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 1ã€æ‰“å¼€Profileæ–‡ä»¶</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go tool pprof cpu.prof</span>
<span class="line">File: main.exe</span>
<span class="line">Build ID: xxx<span class="token punctuation">\</span>main.exe2023-02-04 <span class="token number">15</span>:13:07.8986166 +0800 CST</span>
<span class="line">Type: cpu</span>
<span class="line">Time: Feb <span class="token number">4</span>, <span class="token number">2023</span> at <span class="token number">3</span>:13pm <span class="token punctuation">(</span>CST<span class="token punctuation">)</span></span>
<span class="line">Duration: <span class="token number">25</span>.12s, Total samples <span class="token operator">=</span> <span class="token number">15</span>.48s <span class="token punctuation">(</span><span class="token number">61.63</span>%<span class="token punctuation">)</span></span>
<span class="line">Entering interactive mode <span class="token punctuation">(</span>type <span class="token string">&quot;help&quot;</span> <span class="token keyword">for</span> commands, <span class="token string">&quot;o&quot;</span> <span class="token keyword">for</span> options<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line"><span class="token comment"># Duration: 25.12s                 ç¨‹åºè¿è¡Œçš„æ€»æ—¶é—´ï¼Œè¿™ä¸æˆ‘ä»¬ç»Ÿè®¡çš„ Function-Main æ—¶é—´ç›¸åŒ</span></span>
<span class="line"><span class="token comment"># Total samples = 15.48s (61.63%)  æ•°æ®é‡‡æ ·çš„æ€»æ—¶é—´ï¼Œ15.48 / 25.12 ~= 61.63%</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ----------------------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2ã€æ‰§è¡Œtopå‘½ä»¤</span></span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> <span class="token function">top</span></span>
<span class="line">Showing nodes accounting <span class="token keyword">for</span> <span class="token number">15</span>.22s, <span class="token number">98.32</span>% of <span class="token number">15</span>.48s total</span>
<span class="line">Dropped <span class="token number">31</span> nodes <span class="token punctuation">(</span>cum <span class="token operator">&lt;=</span> <span class="token number">0</span>.08s<span class="token punctuation">)</span></span>
<span class="line">Showing <span class="token function">top</span> <span class="token number">10</span> nodes out of <span class="token number">14</span></span>
<span class="line">      flat  flat%   sum%        cum   cum%</span>
<span class="line">    <span class="token number">12</span>.07s <span class="token number">77.97</span>% <span class="token number">77.97</span>%     <span class="token number">15</span>.13s <span class="token number">97.74</span>%  main.A</span>
<span class="line">     <span class="token number">3</span>.04s <span class="token number">19.64</span>% <span class="token number">97.61</span>%      <span class="token number">3</span>.05s <span class="token number">19.70</span>%  main.B</span>
<span class="line">     <span class="token number">0</span>.08s  <span class="token number">0.52</span>% <span class="token number">98.13</span>%      <span class="token number">0</span>.08s  <span class="token number">0.52</span>%  runtime.stdcall1</span>
<span class="line">     <span class="token number">0</span>.02s  <span class="token number">0.13</span>% <span class="token number">98.26</span>%      <span class="token number">0</span>.20s  <span class="token number">1.29</span>%  runtime.findRunnable</span>
<span class="line">     <span class="token number">0</span>.01s <span class="token number">0.065</span>% <span class="token number">98.32</span>%      <span class="token number">0</span>.09s  <span class="token number">0.58</span>%  runtime.startm</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%     <span class="token number">15</span>.13s <span class="token number">97.74</span>%  main.main</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%     <span class="token number">15</span>.13s <span class="token number">97.74</span>%  runtime.main</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%      <span class="token number">0</span>.32s  <span class="token number">2.07</span>%  runtime.mcall</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%      <span class="token number">0</span>.08s  <span class="token number">0.52</span>%  runtime.notewakeup</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%      <span class="token number">0</span>.31s  <span class="token number">2.00</span>%  runtime.park_m</span>
<span class="line">         </span>
<span class="line"><span class="token comment"># è¯´æ˜</span></span>
<span class="line"><span class="token comment"># 15.22sæŒ‡çš„æ˜¯topåˆ—å‡ºæ¥çš„é‡‡æ ·æ—¶é—´ï¼Œå æ®æ€»çš„é‡‡æ ·æ—¶é—´15.48s çš„ 98.32%</span></span>
<span class="line"><span class="token comment"># å‡½æ•°main.Açš„flatæ—¶é—´æ˜¯12.07ç§’ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°Aä¸­ç›´æ¥æ“ä½œçš„æ—¶é—´ï¼Œä¸åŒ…å«è°ƒç”¨å…¶ä»–å‡½æ•°çš„æ—¶é—´</span></span>
<span class="line"><span class="token comment"># å‡½æ•°main.Açš„cum æ—¶é—´æ˜¯15.13ç§’ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°Aä¸­ç›´æ¥æ“ä½œçš„æ—¶é—´ + è°ƒç”¨å…¶ä»–å‡½æ•°çš„æ—¶é—´</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ----------------------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3ã€è°ƒæ•´æ˜¾ç¤ºå•ä½</span></span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> <span class="token assign-left variable">unit</span><span class="token operator">=</span>milliseconds </span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> <span class="token function">top</span></span>
<span class="line">Showing nodes accounting <span class="token keyword">for</span> 15220ms, <span class="token number">98.32</span>% of 15480ms total</span>
<span class="line">Dropped <span class="token number">31</span> nodes <span class="token punctuation">(</span>cum <span class="token operator">&lt;=</span> <span class="token number">77</span>.40ms<span class="token punctuation">)</span></span>
<span class="line">Showing <span class="token function">top</span> <span class="token number">10</span> nodes out of <span class="token number">14</span></span>
<span class="line">      flat  flat%   sum%        cum   cum%</span>
<span class="line">   12070ms <span class="token number">77.97</span>% <span class="token number">77.97</span>%    15130ms <span class="token number">97.74</span>%  main.A</span>
<span class="line">    3040ms <span class="token number">19.64</span>% <span class="token number">97.61</span>%     3050ms <span class="token number">19.70</span>%  main.B</span>
<span class="line">      80ms  <span class="token number">0.52</span>% <span class="token number">98.13</span>%       80ms  <span class="token number">0.52</span>%  runtime.stdcall1</span>
<span class="line">      20ms  <span class="token number">0.13</span>% <span class="token number">98.26</span>%      200ms  <span class="token number">1.29</span>%  runtime.findRunnable</span>
<span class="line">      10ms <span class="token number">0.065</span>% <span class="token number">98.32</span>%       90ms  <span class="token number">0.58</span>%  runtime.startm</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%    15130ms <span class="token number">97.74</span>%  main.main</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%    15130ms <span class="token number">97.74</span>%  runtime.main</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%      320ms  <span class="token number">2.07</span>%  runtime.mcall</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%       80ms  <span class="token number">0.52</span>%  runtime.notewakeup</span>
<span class="line">         <span class="token number">0</span>     <span class="token number">0</span>% <span class="token number">98.32</span>%      310ms  <span class="token number">2.00</span>%  runtime.park_m</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ----------------------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4ã€æŸ¥çœ‹å‡½æ•°Açš„è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> list A </span>
<span class="line">Total: 15480ms</span>
<span class="line">ROUTINE <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> main.A <span class="token keyword">in</span> D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token punctuation">\</span>main.go</span>
<span class="line">   12070ms    15130ms <span class="token punctuation">(</span>flat, cum<span class="token punctuation">)</span> <span class="token number">97.74</span>% of Total</span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">16</span>:func <span class="token function-name function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">17</span>:   // ç¨‹åºè®¡æ—¶</span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">18</span>:   start :<span class="token operator">=</span> time.Now<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">19</span>:   defer <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">20</span>:           fmt.Printf<span class="token punctuation">(</span><span class="token string">&quot;Function-A    running time is %.2f seconds<span class="token entity" title="\n">\n</span>&quot;</span>, time.Since<span class="token punctuation">(</span>start<span class="token punctuation">)</span>.Seconds<span class="token punctuation">(</span><span class="token punctuation">))</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">21</span>:   <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">22</span>:   n :<span class="token operator">=</span> <span class="token number">10000</span> * <span class="token number">10000</span> * <span class="token number">800</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">23</span>:   <span class="token function">sum</span> :<span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">   12070ms    12080ms     <span class="token number">24</span>:   <span class="token keyword">for</span> i :<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i++ <span class="token punctuation">{</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">25</span>:           <span class="token function">sum</span> <span class="token operator">+=</span> i</span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">26</span>:   <span class="token punctuation">}</span></span>
<span class="line">         <span class="token builtin class-name">.</span>     3050ms     <span class="token number">27</span>:   B<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">28</span>:<span class="token punctuation">}</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">29</span>:</span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">30</span>:func <span class="token function-name function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">31</span>:   // ç¨‹åºè®¡æ—¶</span>
<span class="line">         <span class="token builtin class-name">.</span>          <span class="token builtin class-name">.</span>     <span class="token number">32</span>:   start :<span class="token operator">=</span> time.Now<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>3ã€ä»¥Webæ–¹å¼è§£æCPU Profileæ–‡ä»¶</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ‰“å¼€Profileæ–‡ä»¶</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go tool pprof <span class="token parameter variable">-http</span><span class="token operator">=</span>:8080 cpu.prof  </span>
<span class="line">Serving web UI on http://localhost:8080</span>
<span class="line"></span></code></pre></div><p>ï¼ˆ1ï¼‰Graphè§†å›¾ï¼šé»˜è®¤è§†å›¾</p><ul><li>runtime.mainè°ƒç”¨äº†mainæ–¹æ³•ï¼Œmainæ–¹æ³•è°ƒç”¨äº†Aæ–¹æ³•ï¼ŒAæ–¹æ³•åˆè°ƒç”¨äº†Bæ–¹æ³•</li><li>12.07 / 15.13å’Œ3.04 / 3.05å°±æ˜¯æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„flatå’Œcumå€¼</li></ul><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204154458824.png" alt="image-20230204154458824"></p><p>ï¼ˆ2ï¼‰Topè§†å›¾ï¼šView --&gt; Top</p><ul><li>ç‚¹å‡»å¯¹åº”çš„åˆ—å¯ä»¥è¿›è¡Œå‡åºæˆ–é™åºæ’åº</li><li>ä¿®æ”¹æ˜¾ç¤ºå•ä½çš„è¯éœ€è¦æ‰‹åŠ¨ä¿®æ”¹URLæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ http://localhost:8080/ui/top?unit=milliseconds</li></ul><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204154808874.png" alt="image-20230204154808874"></p><p>ï¼ˆ3ï¼‰ç«ç„°å›¾ï¼šView --&gt; Flame Graph</p><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204155316910.png" alt="image-20230204155316910"></p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰é‡‡é›†å †å†…å­˜Heap Memory Profile</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;flag&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime/pprof&quot;</span></span>
<span class="line">	<span class="token string">&quot;strconv&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	cpuprofile <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;cpuprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write cpu profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	memprofile <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;memprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write memory profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-A    running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç¨‹åºé€»è¾‘</span></span>
<span class="line">	<span class="token keyword">var</span> s <span class="token builtin">string</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		s <span class="token operator">+=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	s <span class="token operator">+=</span> <span class="token string">&quot;hello world!&quot;</span></span>
<span class="line">	<span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-B    running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ç¨‹åºé€»è¾‘</span></span>
<span class="line">	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> i<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç¨‹åºè®¡æ—¶</span></span>
<span class="line">	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Function-Main running time is %.2f seconds\n&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// è§£æå‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line">	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† CPU Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>cpuprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">		f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>cpuprofile<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		err <span class="token operator">=</span> pprof<span class="token punctuation">.</span><span class="token function">StartCPUProfile</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">defer</span> pprof<span class="token punctuation">.</span><span class="token function">StopCPUProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† Memory Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>memprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å†…å­˜æ¦‚è¦ä¿¡æ¯é‡‡æ ·é¢‘ç‡ï¼Œä»£è¡¨æ¯åˆ†é…å¤šå°‘ä¸ªå­—èŠ‚ï¼Œå°±å¯¹å †å†…å­˜çš„ä½¿ç”¨æƒ…å†µè¿›è¡Œä¸€æ¬¡é‡‡æ ·</span></span>
<span class="line">		runtime<span class="token punctuation">.</span>MemProfileRate <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>memprofile<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			<span class="token comment">//runtime.GC()</span></span>
<span class="line">			err <span class="token operator">=</span> pprof<span class="token punctuation">.</span><span class="token function">WriteHeapProfile</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¸»è¦çš„ä»£ç åŒºåŸŸ</span></span>
<span class="line">	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 1ã€æ‰§è¡Œç¨‹åº</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go run main.go <span class="token parameter variable">-memprofile</span><span class="token operator">=</span>mem.prof</span>
<span class="line">Function-B    running <span class="token function">time</span> is <span class="token number">0.01</span> seconds</span>
<span class="line">Function-A    running <span class="token function">time</span> is <span class="token number">3.19</span> seconds</span>
<span class="line">Function-Main running <span class="token function">time</span> is <span class="token number">3.22</span> seconds</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2ã€æ‰“å¼€Memory Profileæ–‡ä»¶</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go tool pprof <span class="token parameter variable">-http</span><span class="token operator">=</span>:8080 mem.prof </span>
<span class="line">Serving web UI on http://localhost:8080</span>
<span class="line"></span></code></pre></div><p><strong>1ã€Topè§†å›¾ï¼šSAMPLEç±»å‹é»˜è®¤æ˜¯inuse_space</strong></p><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204155817805.png" alt="image-20230204155817805"></p><p><strong>2ã€å†…å­˜SAMPLEè¯´æ˜</strong></p><ul><li>inuse_spaceï¼šå·²åˆ†é…ä½†å°šæœªé‡Šæ”¾çš„å†…å­˜é‡</li><li>inuse_objectsï¼šå·²åˆ†é…ä½†å°šæœªé‡Šæ”¾çš„å¯¹è±¡æ•°é‡</li><li>alloc_spaceï¼šåˆ†é…çš„å†…å­˜æ€»é‡ï¼ˆåŒ…å«å·²é‡Šæ”¾çš„ï¼‰</li><li>alloc_objectsï¼šåˆ†é…çš„å¯¹è±¡æ€»æ•°ï¼ˆåŒ…å«å·²é‡Šæ”¾çš„ï¼‰</li></ul></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰é‡‡é›†Goroutineä¿¡æ¯</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;flag&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime&quot;</span></span>
<span class="line">	<span class="token string">&quot;runtime/pprof&quot;</span></span>
<span class="line">	<span class="token string">&quot;time&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	cpuprofile       <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;cpuprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write cpu profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	memprofile       <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;memprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write memory profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	goroutineprofile <span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;goroutineprofile&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;write goroutine profile to file&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// è§£æå‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line">	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† CPU Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>cpuprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">		f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>cpuprofile<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">		err <span class="token operator">=</span> pprof<span class="token punctuation">.</span><span class="token function">StartCPUProfile</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">		<span class="token keyword">defer</span> pprof<span class="token punctuation">.</span><span class="token function">StopCPUProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† Memory Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>memprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">		runtime<span class="token punctuation">.</span>MemProfileRate <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>memprofile<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			<span class="token comment">//runtime.GC()</span></span>
<span class="line">			err <span class="token operator">=</span> pprof<span class="token punctuation">.</span><span class="token function">WriteHeapProfile</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// é‡‡é›† Goroutine Profile</span></span>
<span class="line">	<span class="token keyword">if</span> <span class="token operator">*</span>goroutineprofile <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">*</span>goroutineprofile<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">			goroutineProfile <span class="token operator">:=</span> pprof<span class="token punctuation">.</span><span class="token function">Lookup</span><span class="token punctuation">(</span><span class="token string">&quot;goroutine&quot;</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> goroutineProfile <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;pprof not found goroutine profile&quot;</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">			err <span class="token operator">=</span> goroutineProfile<span class="token punctuation">.</span><span class="token function">WriteTo</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¸»è¦çš„ä»£ç åŒºåŸŸ</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">for</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// ä¼‘çœ 1ç§’é’Ÿï¼Œç­‰å¾…æ‰€æœ‰çš„Goroutineéƒ½è¿è¡Œèµ·æ¥</span></span>
<span class="line">	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 1ã€æ‰§è¡Œç¨‹åº</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go run main.go <span class="token parameter variable">-goroutineprofile</span><span class="token operator">=</span>goroutine.prof</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2ã€æ‰“å¼€Goroutine Profileæ–‡ä»¶</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span> go tool pprof <span class="token parameter variable">-http</span><span class="token operator">=</span>:8080 goroutine.prof</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204162627192.png" alt="image-20230204162627192"></p></details><br><p><strong>2ã€HTTPæœåŠ¡æ–¹å¼é‡‡é›†Profile</strong></p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</summary><ul><li>åªéœ€è¦æ·»åŠ  <code>_ &quot;net/http/pprof&quot;</code> å³å¯</li></ul><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token string">&quot;net/http/pprof&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¤„ç†å™¨</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">indexHandler</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	io<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">&quot;Hello, world!\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç›‘å¬åœ°å€</span></span>
<span class="line">	addr <span class="token operator">:=</span> <span class="token string">&quot;127.0.0.1:80&quot;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ³¨å†Œè·¯ç”±</span></span>
<span class="line">	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> indexHandler<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¯åŠ¨æœåŠ¡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;* Running on http://&quot;</span> <span class="token operator">+</span> addr<span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line">* Running on http://127.0.0.1:80</span>
<span class="line"></span></code></pre></div><p>1ã€é€šè¿‡äº¤äº’å¼ç»ˆç«¯è®¿é—®</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ‰§è¡Œå‘½ä»¤</span></span>
<span class="line"><span class="token comment"># 1.éœ€è¦ç­‰å¾…æŒ‡å®šçš„secondsç§’æ•°ï¼Œè¿™é‡Œæ˜¯60ç§’</span></span>
<span class="line"><span class="token comment"># 2.åœ¨ç­‰å¾…æœŸé—´æ‰‹åŠ¨æˆ–è€…ä½¿ç”¨å‘½ä»¤è®¿é—®å‡ æ¬¡WebæœåŠ¡ï¼Œå¦åˆ™PProfæŠ“å–ä¸åˆ°æ•°æ®ï¼Œåœ¨è¿™é‡Œä½¿ç”¨ ab -c 10 -n 1000 http://127.0.0.1/ è®¿é—®1000æ¬¡</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go tool pprof http://127.0.0.1:80/debug/pprof/profile?seconds<span class="token operator">=</span><span class="token number">60</span>   </span>
<span class="line">Fetching profile over HTTP from http://127.0.0.1:80/debug/pprof/profile?seconds<span class="token operator">=</span><span class="token number">60</span></span>
<span class="line">Saved profile <span class="token keyword">in</span> C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>pprof<span class="token punctuation">\</span>pprof.main.exe.samples.cpu.001.pb.gz</span>
<span class="line">File: main.exe</span>
<span class="line">Build ID: C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>go-build201671595<span class="token punctuation">\</span>b001<span class="token punctuation">\</span>exe<span class="token punctuation">\</span>main.exe2023-02-04 <span class="token number">16</span>:28:41.4866189 +0800 CST</span>
<span class="line">Type: cpu</span>
<span class="line">Time: Feb <span class="token number">4</span>, <span class="token number">2023</span> at <span class="token number">4</span>:36pm <span class="token punctuation">(</span>CST<span class="token punctuation">)</span></span>
<span class="line">Duration: <span class="token number">60</span>.01s, Total samples <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">No samples were found with the default sample value type.</span>
<span class="line">Try <span class="token string">&quot;sample_index&quot;</span> <span class="token builtin class-name">command</span> to analyze different sample values.</span>
<span class="line">Entering interactive mode <span class="token punctuation">(</span>type <span class="token string">&quot;help&quot;</span> <span class="token keyword">for</span> commands, <span class="token string">&quot;o&quot;</span> <span class="token keyword">for</span> options<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹æ•°æ®</span></span>
<span class="line"><span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> <span class="token function">top</span></span>
<span class="line">Showing nodes accounting <span class="token keyword">for</span> 220ms, <span class="token number">100</span>% of 220ms total                           </span>
<span class="line">Showing <span class="token function">top</span> <span class="token number">10</span> nodes out of <span class="token number">100</span>                                                   </span>
<span class="line">      flat  flat%   sum%        cum   cum%                                        </span>
<span class="line">     130ms <span class="token number">59.09</span>% <span class="token number">59.09</span>%      130ms <span class="token number">59.09</span>%  runtime.cgocall                       </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">63.64</span>%       10ms  <span class="token number">4.55</span>%  net/http.htmlSig.match                </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">68.18</span>%       10ms  <span class="token number">4.55</span>%  runtime.<span class="token punctuation">(</span>*mheap<span class="token punctuation">)</span>.initSpan             </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">72.73</span>%       10ms  <span class="token number">4.55</span>%  runtime.lockextra                     </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">77.27</span>%       10ms  <span class="token number">4.55</span>%  runtime.readUintptr                   </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">81.82</span>%       10ms  <span class="token number">4.55</span>%  runtime.stdcall1                      </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">86.36</span>%       10ms  <span class="token number">4.55</span>%  runtime.stdcall2                      </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">90.91</span>%       10ms  <span class="token number">4.55</span>%  runtime.writeHeapBits.write           </span>
<span class="line">      10ms  <span class="token number">4.55</span>% <span class="token number">95.45</span>%       10ms  <span class="token number">4.55</span>%  runtime/internal/atomic.<span class="token punctuation">(</span>*Uint64<span class="token punctuation">)</span>.Load</span>
<span class="line">      10ms  <span class="token number">4.55</span>%   <span class="token number">100</span>%      140ms <span class="token number">63.64</span>%  syscall.SyscallN</span>
<span class="line"></span></code></pre></div><p>æ³¨æ„ä¸Šçš„è¾“å‡ºï¼Œä»–ä¼šæŠŠProfileæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ° Saved profile in xxxï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨æœ¬åœ°èµ·ä¸€ä¸ªHTTP Serveræ¥åˆ†æï¼Œæ¥çœ‹ä¸€ä¸‹ç«ç„°å›¾</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go tool pprof <span class="token parameter variable">-http</span><span class="token operator">=</span>:8080 C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>pprof<span class="token punctuation">\</span>pprof.main.exe.samples.cpu.001.pb.gz </span>
<span class="line">Serving web UI on http://localhost:8080</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204170130522.png" alt="image-20230204170130522"></p><p>2ã€é€šè¿‡Webç•Œé¢è®¿é—®</p><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230204164525538.png" alt="image-20230204164525538"></p></details><br><h3 id="é«˜æ•ˆå­—ç¬¦ä¸²æ‹¼æ¥" tabindex="-1"><a class="header-anchor" href="#é«˜æ•ˆå­—ç¬¦ä¸²æ‹¼æ¥"><span>é«˜æ•ˆå­—ç¬¦ä¸²æ‹¼æ¥</span></a></h3><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</summary><p><code>main_test.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;bytes&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line">	<span class="token string">&quot;testing&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;hello world!&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkStringAdd</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> str <span class="token builtin">string</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		str <span class="token operator">+=</span> s</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkFmtSprintf</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> str <span class="token builtin">string</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		str <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s&quot;</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> s<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkByteBuffer</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> buffer bytes<span class="token punctuation">.</span>Buffer</span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		buffer<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkStringsBuilder</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> builder strings<span class="token punctuation">.</span>Builder</span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		builder<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span></span>
<span class="line">goos: windows</span>
<span class="line">goarch: amd64</span>
<span class="line">pkg: example</span>
<span class="line">cpu: Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-4790K CPU @ <span class="token number">4</span>.00GHz</span>
<span class="line">BenchmarkStringAdd-8              <span class="token number">108938</span>            <span class="token number">117779</span> ns/op</span>
<span class="line">BenchmarkFmtSprintf-8              <span class="token number">35947</span>            <span class="token number">117132</span> ns/op</span>
<span class="line">BenchmarkByteBuffer-8           <span class="token number">51002842</span>                <span class="token number">21.09</span> ns/op</span>
<span class="line">BenchmarkStringsBuilder-8       <span class="token number">80014401</span>                <span class="token number">15.30</span> ns/op</span>
<span class="line">PASS</span>
<span class="line">ok      example <span class="token number">21</span>.414s</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ†æç»“æœ: </span></span>
<span class="line"><span class="token comment"># 1ã€æ¨èä½¿ç”¨strings.Builder</span></span>
<span class="line"><span class="token comment"># 2ã€è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„å‡½æ•°strings.Joinç”¨äºå°†å­—ç¬¦ä¸²ç±»å‹çš„åˆ‡ç‰‡è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨çš„strings.Builder</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="å†…è”å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å†…è”å‡½æ•°"><span>å†…è”å‡½æ•°</span></a></h3><ul><li>å†…è”æ¦‚å¿µï¼šæ¯”å¦‚è¯´å‡½æ•°Aè°ƒç”¨äº†å‡½æ•°Bï¼Œé‚£ä¹ˆå°†å‡½æ•°Bå†…è”ä¼˜åŒ–åï¼Œåœ¨å‡½æ•°Aä¸­ä¼šå±•å¼€å‡½æ•°Bçš„å†…å®¹ï¼Œè€Œä¸æ˜¯è°ƒç”¨å‡½æ•°B</li><li>å†…è”ä¼˜åŠ¿ï¼šé¿å…äº†å‡½æ•°è°ƒç”¨æ‰€å¸¦æ¥çš„å¼€é”€ï¼Œä½¿è¿è¡Œé€Ÿåº¦æ›´å¿«</li><li>å†…è”åŠ£åŠ¿ï¼šç¼–è¯‘åäºŒè¿›åˆ¶ä½“ç§¯ä¼šæ›´å¤§</li><li>ä½•æ—¶å‘ç”Ÿï¼š <ul><li>é»˜è®¤æƒ…å†µä¸‹ç”±ç¼–è¯‘å™¨å†³å®šæ˜¯å¦å†…è”</li><li>ä½¿ç”¨<code>go build -gcflags=&quot;-l&quot;</code>å‚æ•°å¯è®¾ç½®å…¨å±€å…³é—­å†…è”ï¼Œè‹¥ä½¿ç”¨<code>-l -l</code>æˆ–æ›´å¤šçš„<code>-l</code>åˆ™åˆä¼šæ‰“å¼€å†…è”ï¼Œå¹¶å¯ç”¨æ›´æ¿€è¿›çš„å†…è”ç­–ç•¥</li><li>ä½¿ç”¨<code>//go:noinline</code>ï¼ˆå†™åœ¨å‡½æ•°å®šä¹‰çš„ä¸Šä¸€è¡Œ, //å’Œgoä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰å‘Šè¯‰ç¼–è¯‘å™¨å¯¹æŸä¸ªå‡½æ•°ä¸è¦è¿›è¡Œå†…è”</li></ul></li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰ä½¿ç”¨å†…è”å’Œä¸ä½¿ç”¨å†…è”æ€§èƒ½å¯¹æ¯”</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;testing&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//go:noinline</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">maxNoinline</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&lt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> b</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> a</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">maxInline</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> a <span class="token operator">&lt;</span> b <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> b</span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> a</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkNoInline</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	x<span class="token punctuation">,</span> y <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span></span>
<span class="line">	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">maxNoinline</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">BenchmarkInline</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	x<span class="token punctuation">,</span> y <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span></span>
<span class="line">	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">maxInline</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token builtin class-name">test</span> <span class="token parameter variable">-bench</span> <span class="token builtin class-name">.</span></span>
<span class="line">goos: windows</span>
<span class="line">goarch: amd64</span>
<span class="line">pkg: example</span>
<span class="line">cpu: Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-4790K CPU @ <span class="token number">4</span>.00GHz</span>
<span class="line">BenchmarkNoInline-8     <span class="token number">794989972</span>                <span class="token number">1.436</span> ns/op</span>
<span class="line">BenchmarkInline-8       <span class="token number">1000000000</span>               <span class="token number">0.2432</span> ns/op</span>
<span class="line">PASS</span>
<span class="line">ok      example <span class="token number">3</span>.981s</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŸ¥çœ‹ç¼–è¯‘å™¨ä¼˜åŒ–ç­–ç•¥</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">package main</span>
<span class="line"></span>
<span class="line">func add<span class="token punctuation">(</span>a, b int<span class="token punctuation">)</span> int <span class="token punctuation">{</span></span>
<span class="line">	<span class="token builtin class-name">return</span> a + b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">func sub<span class="token punctuation">(</span>a, b int<span class="token punctuation">)</span> int <span class="token punctuation">{</span></span>
<span class="line">	<span class="token builtin class-name">return</span> a - b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">func <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	add<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">	sub<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># -gcflags=&quot;-m&quot; ç”¨äºè¾“å‡ºç¼–è¯‘å™¨ä¼˜åŒ–ç­–ç•¥ï¼Œå¦‚æœä½¿ç”¨ä¸¤ä¸ª-måˆ™è¾“å‡ºæ›´å¤šå†…å®¹</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">-gcflags</span><span class="token operator">=</span><span class="token string">&quot;-m&quot;</span> main.go    </span>
<span class="line"><span class="token comment"># command-line-arguments</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:3:6: can inline <span class="token function">add</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:7:6: can inline sub</span>
<span class="line">.<span class="token punctuation">\</span>main.go:11:6: can inline main</span>
<span class="line">.<span class="token punctuation">\</span>main.go:12:5: inlining call to <span class="token function">add</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:13:5: inlining call to sub</span>
<span class="line"></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">-gcflags</span><span class="token operator">=</span><span class="token string">&quot;-m -m&quot;</span> main.go </span>
<span class="line"><span class="token comment"># command-line-arguments</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:3:6: can inline <span class="token function">add</span> with cost <span class="token number">4</span> as: func<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span> int <span class="token punctuation">{</span> <span class="token builtin class-name">return</span> a + b <span class="token punctuation">}</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:7:6: can inline sub with cost <span class="token number">4</span> as: func<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span> int <span class="token punctuation">{</span> <span class="token builtin class-name">return</span> a - b <span class="token punctuation">}</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:11:6: can inline main with cost <span class="token number">16</span> as: <span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> add<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> sub<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:12:5: inlining call to <span class="token function">add</span></span>
<span class="line">.<span class="token punctuation">\</span>main.go:13:5: inlining call to sub</span>
<span class="line"></span></code></pre></div></details><br><h3 id="ä»£ç ç”Ÿæˆ" tabindex="-1"><a class="header-anchor" href="#ä»£ç ç”Ÿæˆ"><span>ä»£ç ç”Ÿæˆ</span></a></h3><p>æ–‡æ¡£ï¼š<a href="https://go.dev/blog/generate" target="_blank" rel="noopener noreferrer">https://go.dev/blog/generate</a></p><details class="hint-container details"><summary>ï¼ˆ1ï¼‰generateè¯´æ˜</summary><p>ç®€å•æ¥è¯´ å°±æ˜¯åœ¨Goä»£ç ä¸­æ·»åŠ ç‰¹å®šçš„æ³¨é‡Šï¼ˆæ¯”å¦‚<code>//go:generate command arg1 arg2</code>ï¼‰ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ <code>go generate</code> ä¾¿èƒ½ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»£ç </p><p>å…¶åŸç†æ˜¯æ˜¯è°ƒç”¨ <code>command</code> å‘½ä»¤ï¼Œå¹¶å°† <code>arg1 arg2</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>command</code></p></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰generateæµ‹è¯•ï¼šstringer</summary><p>1ã€å®‰è£…stringerä½œä¸ºcommand</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å®‰è£…stringer</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go <span class="token function">install</span> golang.org/x/tools/cmd/stringer@latest</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å¸®åŠ©</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>stringer <span class="token parameter variable">-h</span></span>
<span class="line">Usage of stringer:                                                  </span>
<span class="line">        stringer <span class="token punctuation">[</span>flags<span class="token punctuation">]</span> <span class="token parameter variable">-type</span> T <span class="token punctuation">[</span>directory<span class="token punctuation">]</span>                        </span>
<span class="line">        stringer <span class="token punctuation">[</span>flags<span class="token punctuation">]</span> <span class="token parameter variable">-type</span> T files<span class="token punctuation">..</span>. <span class="token comment"># Must be a single package</span></span>
<span class="line">For <span class="token function">more</span> information, see:                                          </span>
<span class="line">        https://pkg.go.dev/golang.org/x/tools/cmd/stringer          </span>
<span class="line">Flags:                                                              </span>
<span class="line">  <span class="token parameter variable">-linecomment</span>                                                      </span>
<span class="line">        use line comment text as printed text when present          </span>
<span class="line">  <span class="token parameter variable">-output</span> string                                                    </span>
<span class="line">        output <span class="token function">file</span> name<span class="token punctuation">;</span> default srcdir/<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span>_string.go</span>
<span class="line">  <span class="token parameter variable">-tags</span> string                                                      </span>
<span class="line">        comma-separated list of build tags to apply</span>
<span class="line">  <span class="token parameter variable">-trimprefix</span> prefix</span>
<span class="line">        trim the prefix from the generated constant names</span>
<span class="line">  <span class="token parameter variable">-type</span> string</span>
<span class="line">        comma-separated list of <span class="token builtin class-name">type</span> names<span class="token punctuation">;</span> must be <span class="token builtin class-name">set</span></span>
<span class="line"></span></code></pre></div><p>2ã€ç¼–å†™Goä»£ç </p><p>é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ <code>weekday/weekday.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> weekday</span>
<span class="line"></span>
<span class="line"><span class="token comment">//go:generate stringer -type=Weekday</span></span>
<span class="line"><span class="token keyword">type</span> Weekday <span class="token builtin">int8</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">(</span></span>
<span class="line">	Sunday    Weekday <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// æ˜ŸæœŸæ—¥</span></span>
<span class="line">	Monday                   <span class="token comment">// æ˜ŸæœŸä¸€</span></span>
<span class="line">	Tuesday                  <span class="token comment">// æ˜ŸæœŸäºŒ</span></span>
<span class="line">	Wednesday                <span class="token comment">// æ˜ŸæœŸä¸‰</span></span>
<span class="line">	Thursday                 <span class="token comment">// æ˜ŸæœŸå››</span></span>
<span class="line">	Friday                   <span class="token comment">// æ˜ŸæœŸäº”</span></span>
<span class="line">	Saterday                 <span class="token comment">// æ˜ŸæœŸå…­</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>3ã€ç”Ÿæˆä»£ç ï¼ˆå¯å¤šæ¬¡æ‰§è¡Œï¼‰</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ç”Ÿæˆä»£ç æ–¹å¼1ï¼šæŒ‡å®šå•ä¸ªæ–‡ä»¶</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go generate weekday/weekday.go</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿæˆä»£ç æ–¹å¼2: æŒ‡å®šæ‰€æœ‰æ–‡ä»¶(æ¨è)</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go generate ./<span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä¸Šé¢çš„æ­¥éª¤ç­‰åŒäº</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>stringer <span class="token parameter variable">-type</span><span class="token operator">=</span>Weekday weekday/weekday.go</span>
<span class="line"></span></code></pre></div><p>4ã€æŸ¥çœ‹æ–°ç”Ÿæˆçš„ä»£ç ï¼šçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œè¿™å°±ä¸æ˜¯ç»™äººçœ‹çš„</p><p><code>weekday_string.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">// Code generated by &quot;stringer -type=Weekday&quot;; DO NOT EDIT.</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">package</span> weekday</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;strconv&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token boolean">_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// An &quot;invalid array index&quot; compiler error signifies that the constant values have changed.</span></span>
<span class="line">	<span class="token comment">// Re-run the stringer command to generate them again.</span></span>
<span class="line">	<span class="token keyword">var</span> x <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Sunday<span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Monday<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Tuesday<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Wednesday<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Thursday<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Friday<span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span></span>
<span class="line">	<span class="token boolean">_</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>Saterday<span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> _Weekday_name <span class="token operator">=</span> <span class="token string">&quot;SundayMondayTuesdayWednesdayThursdayFridaySaterday&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> _Weekday_index <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token punctuation">(</span>i Weekday<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">&gt;=</span> <span class="token function">Weekday</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>_Weekday_index<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">return</span> <span class="token string">&quot;Weekday(&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token keyword">return</span> _Weekday_name<span class="token punctuation">[</span>_Weekday_index<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>_Weekday_index<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>5ã€ç¼–å†™<code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;example/weekday&quot;</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">var</span> day weekday<span class="token punctuation">.</span>Weekday <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>day<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line">Sunday  <span class="token comment"># é»˜è®¤ä¼šä½¿ç”¨å˜é‡åä½œä¸ºString()çš„è¿”å›å€¼</span></span>
<span class="line"></span></code></pre></div><p>6ã€ä¿®æ”¹è¿”å›å€¼ï¼ˆæ·»åŠ -linecommentå‚æ•°ï¼‰</p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">//go:generate stringer -type=Weekday -linecomment</span></span>
<span class="line"><span class="token keyword">type</span> Weekday <span class="token builtin">int8</span></span>
<span class="line"></span></code></pre></div><p>7ã€é‡æ–°ç”Ÿæˆå¹¶æ‰§è¡Œ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># é‡æ–°ç”Ÿæˆä»£ç ,åŸæ¥çš„æ–‡ä»¶ä¸éœ€è¦åˆ é™¤ï¼Œä¼šè¦†ç›–</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go generate ./<span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line"><span class="token comment"># å†æ¬¡æ‰§è¡Œï¼Œä¼šæŠŠæˆ‘ä»¬çš„æ³¨é‡Šä½œä¸ºè¿”å›å€¼è¿”å›</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run main.go</span>
<span class="line">æ˜ŸæœŸæ—¥</span>
<span class="line"></span></code></pre></div></details><h2 id="-8" tabindex="-1"><a class="header-anchor" href="#-8"><span></span></a></h2><h2 id="ç¼–è¯‘ä¸åç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘ä¸åç¼–è¯‘"><span>ç¼–è¯‘ä¸åç¼–è¯‘</span></a></h2><h3 id="ç¼–è¯‘è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘è¿‡ç¨‹"><span>ç¼–è¯‘è¿‡ç¨‹</span></a></h3><p><code>go help build</code>æŸ¥çœ‹å¯ä½¿ç”¨çš„é€‰é¡¹</p><ul><li>-xï¼šè¾“å‡ºç¼–è¯‘å‘½ä»¤ï¼ˆä¼šçœŸæ­£ç¼–è¯‘ï¼‰</li><li>-nï¼šè¾“å‡ºç¼–è¯‘å‘½ä»¤ï¼ˆä¸çœŸæ­£ç¼–è¯‘ï¼‰</li><li>-workï¼šè¾“å‡ºç¼–è¯‘æ‰€ç”¨çš„ä¸´æ—¶ç›®å½•ï¼Œå¹¶ä¸”ç¼–è¯‘å®Œæˆåä¸åˆ é™¤å®ƒ</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŸ¥çœ‹ç¼–è¯‘è¿‡ç¨‹</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go build <span class="token parameter variable">-x</span> main.go</span>
<span class="line"><span class="token assign-left variable">WORK</span><span class="token operator">=</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>go-build1315443961</span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$WORK</span><span class="token punctuation">\</span>b001<span class="token punctuation">\</span></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>go-build1315443961<span class="token punctuation">\</span>b001<span class="token punctuation">\</span>importcfg <span class="token operator">&lt;&lt;</span> <span class="token string">&#39;EOF&#39;<span class="token bash punctuation"> <span class="token comment"># internal</span></span></span>
<span class="line"># import config</span>
<span class="line">packagefile fmt=C:\Users\Administrator\AppData\Local\go-build\d0\d008751497390b11b47f716af2d48f0a52b4e4f15ad4e96f852ce896600f7a11-d</span>
<span class="line">packagefile runtime=C:\Users\Administrator\AppData\Local\go-build\dc\dca431b4db090566a675628d7dcbf136445f9a95f641dae937f91ea22bd2d4d9-d</span>
<span class="line">EOF</span></span>
<span class="line"><span class="token builtin class-name">cd</span> D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example</span>
<span class="line"><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>software<span class="token entity" title="\\">\\</span>go1.21<span class="token entity" title="\\">\\</span>pkg<span class="token entity" title="\\">\\</span>tool<span class="token entity" title="\\">\\</span>windows_amd64<span class="token entity" title="\\">\\</span>compile.exe&quot;</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>_pkg_.a&quot;</span> <span class="token parameter variable">-trimpath</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001=&gt;&quot;</span> <span class="token parameter variable">-p</span> main <span class="token parameter variable">-complete</span> <span class="token parameter variable">-buildid</span> Lvvb2G_hP_XZ3usgOuTV/Lvvb2G_hP_XZ3usgOuTV <span class="token parameter variable">-goversion</span> go1.20.1 <span class="token parameter variable">-c</span><span class="token operator">=</span><span class="token number">4</span> <span class="token parameter variable">-nolocalimports</span> <span class="token parameter variable">-importc</span></span>
<span class="line"><span class="token function">fg</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>importcfg&quot;</span> <span class="token parameter variable">-pack</span> <span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>application<span class="token entity" title="\\">\\</span>GoLand<span class="token entity" title="\\">\\</span>example<span class="token entity" title="\\">\\</span>main.go&quot;</span></span>
<span class="line"><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>software<span class="token entity" title="\\">\\</span>go1.21<span class="token entity" title="\\">\\</span>pkg<span class="token entity" title="\\">\\</span>tool<span class="token entity" title="\\">\\</span>windows_amd64<span class="token entity" title="\\">\\</span>buildid.exe&quot;</span> <span class="token parameter variable">-w</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>_pkg_.a&quot;</span> <span class="token comment"># internal</span></span>
<span class="line"><span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>_pkg_.a&quot;</span> <span class="token string">&quot;C:<span class="token entity" title="\\">\\</span>Users<span class="token entity" title="\\">\\</span>Administrator<span class="token entity" title="\\">\\</span>AppData<span class="token entity" title="\\">\\</span>Local<span class="token entity" title="\\">\\</span>go-build<span class="token entity" title="\\">\\</span>d3<span class="token entity" title="\\">\\</span>d3b4da9f72bf2ddd499f74a20719b0b6f0653ba57a010820a6af34ee295b013e-d&quot;</span> <span class="token comment"># internal</span></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Temp<span class="token punctuation">\</span>go-build1315443961<span class="token punctuation">\</span>b001<span class="token punctuation">\</span>importcfg.link <span class="token operator">&lt;&lt;</span> <span class="token string">&#39;EOF&#39;<span class="token bash punctuation"> <span class="token comment"># internal   </span></span></span>
<span class="line">packagefile command-line-arguments=C:\Users\Administrator\AppData\Local\Temp\go-build1315443961\b001\_pkg_.a</span>
<span class="line">packagefile fmt=C:\Users\Administrator\AppData\Local\go-build\d0\d008751497390b11b47f716af2d48f0a52b4e4f15ad4e96f852ce896600f7a11-d</span>
<span class="line">packagefile runtime=C:\Users\Administrator\AppData\Local\go-build\dc\dca431b4db090566a675628d7dcbf136445f9a95f641dae937f91ea22bd2d4d9-d</span>
<span class="line">packagefile errors=C:\Users\Administrator\AppData\Local\go-build\22\22340e4366791f28988f6f3a7575d8aa9d265a337f86db249f8e2d1646b8536a-d</span>
<span class="line">packagefile internal/fmtsort=C:\Users\Administrator\AppData\Local\go-build\3f\3fd6aa7af7a08e705df8e8cb9fb108ed65ef986360dbda26bf751410c3a39a92-d</span>
<span class="line">packagefile io=C:\Users\Administrator\AppData\Local\go-build\97\97df67bc71f7570fa8f4eac00d9b9c61b439b1de1302e129b1115865e7d7c3f0-d</span>
<span class="line">packagefile math=C:\Users\Administrator\AppData\Local\go-build\2b\2ba07274a733f57ed10ea4bdf76311e25cecf552eca3b8fad78933c66fc6c4eb-d</span>
<span class="line">packagefile os=C:\Users\Administrator\AppData\Local\go-build\ce\ce5c7fa71ee246560c70b4617e2378a9350cd6ab635aa8b563c2ef491ad6999d-d</span>
<span class="line">packagefile reflect=C:\Users\Administrator\AppData\Local\go-build\d4\d43a8556707f808aab38d01959b7cb7fecc6c439d9cf9c48f482245fb7b5c657-d</span>
<span class="line">packagefile sort=C:\Users\Administrator\AppData\Local\go-build\27\27c3c6071b32e60ae3120228932bc2b694f17920cd6e2ee32638509bb77da635-d</span>
<span class="line">packagefile strconv=C:\Users\Administrator\AppData\Local\go-build\c8\c8a4ee954af0570536683f4073282acd047a0cceae89f6ab5b88b1cb4bd79100-d</span>
<span class="line">packagefile sync=C:\Users\Administrator\AppData\Local\go-build\45\45d5d1367ce2963835a3a556257da29e1c92365e2de346f0ae0dbbc16d6aae18-d</span>
<span class="line">packagefile unicode/utf8=C:\Users\Administrator\AppData\Local\go-build\eb\eba51109f217adfb74fee345457554f88b19d810b0cbc1e412f9ef0a1a1cbb12-d</span>
<span class="line">packagefile internal/abi=C:\Users\Administrator\AppData\Local\go-build\46\464fe3375423d934b34e66de338c0fc9fe28461865b53cf759e0947f7c938936-d</span>
<span class="line">packagefile internal/bytealg=C:\Users\Administrator\AppData\Local\go-build\c5\c56ae7575c75d81e23ce7b391325acf8a179ab64977582e69841577685ebae2a-d</span>
<span class="line">packagefile internal/coverage/rtcov=C:\Users\Administrator\AppData\Local\go-build\c3\c3d14dd3818d67f1128aff71e06ed75535a4a02bcc17061e441c5350b3ada97b-d</span>
<span class="line">packagefile internal/cpu=C:\Users\Administrator\AppData\Local\go-build\e9\e95f1c11f5b671b30445e88a4c3e1287fa414d9b26b7ba2d52c185b483ad90d6-d</span>
<span class="line">packagefile internal/goarch=C:\Users\Administrator\AppData\Local\go-build\6f\6fad28715acd394720e72837056967c0edb9d25d9346ab5af37884d9664f83d7-d</span>
<span class="line">packagefile internal/goexperiment=C:\Users\Administrator\AppData\Local\go-build\df\dfb99caf170c7d7fafecf1cc7e1646789b9fd36a4ce5d1c1729ef6b231e18e43-d</span>
<span class="line">packagefile internal/goos=C:\Users\Administrator\AppData\Local\go-build\8d\8dce0662be9de7e7187efcf7d7b9f7ce6fd2bc8a818da5e97448d07453ce9487-d</span>
<span class="line">packagefile runtime/internal/atomic=C:\Users\Administrator\AppData\Local\go-build\87\87eb5a1df29da1e540d700507b81647a113070d4bfac796f39a9b5bb72951e83-d</span>
<span class="line">packagefile runtime/internal/math=C:\Users\Administrator\AppData\Local\go-build\fb\fbfe122c54f39c16e6248588247c633785bfdd1803e61aa866db9d8382df41da-d</span>
<span class="line">packagefile runtime/internal/sys=C:\Users\Administrator\AppData\Local\go-build\1a\1a232e62b66e49a4736220bfbd16f052741940834787ebda972f48457f4b6c35-d</span>
<span class="line">packagefile internal/reflectlite=C:\Users\Administrator\AppData\Local\go-build\ee\eea138a62871ca89d08372e85ed43910b9b00ca6ec2b1f329943541efec00800-d</span>
<span class="line">packagefile math/bits=C:\Users\Administrator\AppData\Local\go-build\e3\e3e4d7abc7d9de219db31dbb3e6e841f078950ef083351ac654c5725acf9ef51-d</span>
<span class="line">packagefile internal/itoa=C:\Users\Administrator\AppData\Local\go-build\70\708a7883b82e58fa8ba023ac983f961b6a66327d6f6bd54a07b76a39e033c741-d</span>
<span class="line">packagefile internal/poll=C:\Users\Administrator\AppData\Local\go-build\0c\0c05dccbfddcfae4266371c925b634dd7e7f5e0e5312581ac079a21b6333ebef-d</span>
<span class="line">packagefile unicode=C:\Users\Administrator\AppData\Local\go-build\69\69ea000512b7cca606b0b6ec1602da34f5310f13a3bfc8053f92f2423746938e-d</span>
<span class="line">packagefile internal/race=C:\Users\Administrator\AppData\Local\go-build\af\af16ab7bf9027876983a2bbdb41af8fa9b8470171ed55f94e994ae573ac5176f-d</span>
<span class="line">packagefile internal/syscall/windows/sysdll=C:\Users\Administrator\AppData\Local\go-build\e2\e285864ad3bee135571cefd7bc643a2acfb030eacf31c4232c65a6ed99095f58-d</span>
<span class="line">packagefile internal/oserror=C:\Users\Administrator\AppData\Local\go-build\33\33e7514715431c2090d782d02f563a1addb0a540224befae479b38957c4ff56f-d</span>
<span class="line">packagefile path=C:\Users\Administrator\AppData\Local\go-build\3d\3d7bdea151cf8ecea3f0e470bdc6b0bb45a5fc8d20519b2b4834c848fb33f1ab-d</span>
<span class="line">packagefile internal/syscall/windows/registry=C:\Users\Administrator\AppData\Local\go-build\30\30f31e001bc5b82d506417871d973383a64464e8794fde68194efca52d56d663-d</span>
<span class="line">modinfo &quot;0w\xaf\f\x92t\b\x02A\xe1\xc1\a\xe6\xd6\x18\xe6path\tcommand-line-arguments\nbuild\t-buildmode=exe\nbuild\t-compiler=gc\nbuild\tCGO_ENABLED=0\nbuild\tGOARCH=amd64\nbuild\tGOOS=windows\nbuild\tGOAMD64=v1\n\xf92C1\x86\x18 r\x0</span>
<span class="line">0\x82B\x10A\x16\xd8\xf2&quot;</span>
<span class="line">EOF</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$WORK</span><span class="token punctuation">\</span>b001<span class="token punctuation">\</span>exe<span class="token punctuation">\</span></span>
<span class="line"><span class="token builtin class-name">cd</span> <span class="token builtin class-name">.</span></span>
<span class="line"><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>software<span class="token entity" title="\\">\\</span>go1.21<span class="token entity" title="\\">\\</span>pkg<span class="token entity" title="\\">\\</span>tool<span class="token entity" title="\\">\\</span>windows_amd64<span class="token entity" title="\\">\\</span>link.exe&quot;</span> <span class="token parameter variable">-o</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>exe<span class="token entity" title="\\">\\</span>a.out.exe&quot;</span> <span class="token parameter variable">-importcfg</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>importcfg.link&quot;</span> <span class="token parameter variable">-buildmode</span><span class="token operator">=</span>pie <span class="token parameter variable">-buildid</span><span class="token operator">=</span>Syb1GKdua8HgR-f5H8Sf/Lvvb2G_hP_XZ3usgOuTV/PnPlne2vLU_3XuTkyDQG/Syb1GKdua8Hg</span>
<span class="line">R-f5H8Sf <span class="token parameter variable">-extld</span><span class="token operator">=</span>gcc <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>_pkg_.a&quot;</span></span>
<span class="line"><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>software<span class="token entity" title="\\">\\</span>go1.21<span class="token entity" title="\\">\\</span>pkg<span class="token entity" title="\\">\\</span>tool<span class="token entity" title="\\">\\</span>windows_amd64<span class="token entity" title="\\">\\</span>buildid.exe&quot;</span> <span class="token parameter variable">-w</span> <span class="token string">&quot;<span class="token variable">$WORK</span><span class="token entity" title="\\">\\</span>b001<span class="token entity" title="\\">\\</span>exe<span class="token entity" title="\\">\\</span>a.out.exe&quot;</span> <span class="token comment"># internal</span></span>
<span class="line"><span class="token function">cp</span> <span class="token variable">$WORK</span><span class="token punctuation">\</span>b001<span class="token punctuation">\</span>exe<span class="token punctuation">\</span>a.out.exe main.exe</span>
<span class="line"><span class="token function">rm</span> <span class="token parameter variable">-r</span> <span class="token variable">$WORK</span><span class="token punctuation">\</span>b001<span class="token punctuation">\</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŸ¥çœ‹åŠ¨æ€é“¾æ¥åº“</summary><p><strong>æµ‹è¯•1ï¼šå¯¹äºæç®€å•çš„ç¨‹åºä¸ä¼šä¾èµ–ä»»ä½•åŠ¨æ€é“¾æ¥åº“</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ç¼–è¯‘</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go build main.go</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å¤§å°</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ls -lh main</span></span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">1</span>.8M Feb  <span class="token number">3</span> <span class="token number">12</span>:38 main</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹åŠ¨æ€é“¾æ¥åº“ï¼Œæ²¡æœ‰ä»»ä½•ä¾èµ–</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ldd main</span></span>
<span class="line">        not a dynamic executable</span>
<span class="line"></span></code></pre></div><p><strong>æµ‹è¯•2ï¼šå¯¹äºéƒ¨åˆ†æ ‡å‡†åº“ä¼šä¾èµ–CGOç›¸å…³çš„é“¾æ¥åº“</strong></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;io&quot;</span></span>
<span class="line">	<span class="token string">&quot;log&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¤„ç†å™¨</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">indexHandler</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	io<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">&quot;Hello, world!\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// ç›‘å¬åœ°å€</span></span>
<span class="line">	addr <span class="token operator">:=</span> <span class="token string">&quot;127.0.0.1:80&quot;</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// æ³¨å†Œè·¯ç”±</span></span>
<span class="line">	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> indexHandler<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// å¯åŠ¨æœåŠ¡</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;* Running on http://&quot;</span> <span class="token operator">+</span> addr<span class="token punctuation">)</span></span>
<span class="line">	log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ç¼–è¯‘</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go build main.go </span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å¤§å°</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ls -lh main</span></span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">6</span>.3M Feb  <span class="token number">3</span> <span class="token number">12</span>:44 main</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹åŠ¨æ€é“¾æ¥åº“,å‘ç°ä¾èµ–ç³»ç»Ÿçš„åŠ¨æ€é“¾æ¥åº“</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ldd main</span></span>
<span class="line">        linux-vdso.so.1 <span class="token punctuation">(</span>0x00007fffd0bf6000<span class="token punctuation">)</span></span>
<span class="line">        libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libpthread.so.0 <span class="token punctuation">(</span>0x00007ff3ad7c8000<span class="token punctuation">)</span></span>
<span class="line">        libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib64/libc.so.6 <span class="token punctuation">(</span>0x00007ff3ad403000<span class="token punctuation">)</span></span>
<span class="line">        /lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007ff3ad9e8000<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line"><span class="token comment"># å…³é—­CGOï¼Œå†é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼Œå‘ç°æ²¡æœ‰ä¾èµ–</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># CGO_ENABLED=0 go build main.go</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ls -lh main</span></span>
<span class="line">-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">6</span>.2M Feb  <span class="token number">3</span> <span class="token number">12</span>:45 main</span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># ldd main</span></span>
<span class="line">        not a dynamic executable</span>
<span class="line"></span></code></pre></div></details><br><h3 id="äº¤å‰ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#äº¤å‰ç¼–è¯‘"><span>äº¤å‰ç¼–è¯‘</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŸ¥çœ‹æ‰€æ”¯æŒçš„å¹³å°å’Œæ¶æ„</summary><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>go tool dist list</span>
<span class="line">aix/ppc64</span>
<span class="line">android/386</span>
<span class="line">android/amd64</span>
<span class="line">android/arm</span>
<span class="line">android/arm64</span>
<span class="line">darwin/amd64</span>
<span class="line">darwin/arm64</span>
<span class="line">dragonfly/amd64</span>
<span class="line">freebsd/386</span>
<span class="line">freebsd/amd64</span>
<span class="line">freebsd/arm</span>
<span class="line">freebsd/arm64</span>
<span class="line">freebsd/riscv64</span>
<span class="line">illumos/amd64</span>
<span class="line">ios/amd64</span>
<span class="line">ios/arm64</span>
<span class="line">js/wasm</span>
<span class="line">linux/386</span>
<span class="line">linux/amd64</span>
<span class="line">linux/arm</span>
<span class="line">linux/arm64</span>
<span class="line">linux/loong64</span>
<span class="line">linux/mips</span>
<span class="line">linux/mips64</span>
<span class="line">linux/mips64le</span>
<span class="line">linux/mipsle</span>
<span class="line">linux/ppc64</span>
<span class="line">linux/ppc64le</span>
<span class="line">linux/riscv64</span>
<span class="line">linux/s390x</span>
<span class="line">netbsd/386</span>
<span class="line">netbsd/amd64</span>
<span class="line">netbsd/arm</span>
<span class="line">netbsd/arm64</span>
<span class="line">openbsd/386</span>
<span class="line">openbsd/amd64</span>
<span class="line">openbsd/arm</span>
<span class="line">openbsd/arm64</span>
<span class="line">openbsd/mips64</span>
<span class="line">plan9/386</span>
<span class="line">plan9/amd64</span>
<span class="line">plan9/arm</span>
<span class="line">solaris/amd64</span>
<span class="line">windows/386</span>
<span class="line">windows/amd64</span>
<span class="line">windows/arm</span>
<span class="line">windows/arm64</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰äº¤å‰ç¼–è¯‘ï¼Œæˆ–è€…å«åšè·¨å¹³å°ç¼–è¯‘</summary><p>äº¤å‰ç¼–è¯‘ç®€å•æ¥è¯´æŒ‡çš„æ˜¯åœ¨å½“å‰å¹³å°ä¸Šå¯ä»¥ç¼–è¯‘å‡ºå…¶ä»–å¹³å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œæ¯”å¦‚åœ¨Windowsä¸‹ç¼–è¯‘LinuxäºŒè¿›åˆ¶ç¨‹åº</p><p>å¯¹äº<code>go</code>æ¥è¯´ä¸»è¦æ§åˆ¶3ä¸ªå˜é‡ï¼š</p><ul><li>CGO_ENABLED=0ï¼šGoåœ¨ç¼–è¯‘æ—¶å¯ä»¥é€‰æ‹©ä½¿ç”¨Cé“¾æ¥åº“(Cé“¾æ¥åº“ä¸æ‰“åŒ…è¿›ç¨‹åº)æˆ–çº¯Goç¼–è¯‘(æ‰“åŒ…æ‰€æœ‰å†…å®¹)ï¼Œ<code>CGO_ENABLED</code>å‚æ•°æ§åˆ¶æ˜¯å¦å¯ç”¨<code>CGO</code></li><li>GOOS=&lt;ç›®æ ‡å¹³å°çš„æ“ä½œç³»ç»Ÿ&gt;ï¼Œæ¯”å¦‚<code>windows</code>ã€<code>linux</code>ã€<code>darwin</code>ã€<code>freebsd</code></li><li>GOARCH=&lt;ç›®æ ‡å¹³å°çš„ä½“ç³»æ¶æ„&gt;ï¼Œæ¯”å¦‚<code>amd64</code>,<code>386</code>ã€<code>arm</code></li></ul><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># Windowsä¸‹ç¼–è¯‘Linuxå’ŒMac64ä½å¯æ‰§è¡Œç¨‹åº</span></span>
<span class="line">SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span></span>
<span class="line">SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux</span>
<span class="line">SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64</span>
<span class="line">go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line">SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span></span>
<span class="line">SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin</span>
<span class="line">SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64</span>
<span class="line">go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Macä¸‹ç¼–è¯‘Linuxå’ŒWindows64ä½å¯æ‰§è¡Œç¨‹åº</span></span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux   <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Linuxä¸‹ç¼–è¯‘Macå’ŒWindows 64ä½å¯æ‰§è¡Œç¨‹åº</span></span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin  <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æ¡ä»¶ç¼–è¯‘ï¼šä½¿ç”¨TAG</summary><ul><li>æºä»£ç çš„å¼€å¤´ç¬¬ä¸€è¡Œä»¥æ³¨é‡Šçš„å½¢å¼æŒ‡å®šéœ€è¦ç¼–è¯‘çš„å¹³å°</li><li>ç¼–è¯‘æ¡ä»¶çš„æ³¨é‡Šå’Œpackage è¯­å¥ä¹‹é—´ä¸€å®šè¦éš”ä¸€è¡Œ</li></ul><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>hello1.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">//go:build windows</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Windows!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>hello2.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token comment">//go:build linux</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Linux!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># Windowsä¸Šæ‰§è¡Œ</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run <span class="token builtin class-name">.</span></span>
<span class="line">Hello Windows<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Linuxä¸Šæ‰§è¡Œ</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go run .</span></span>
<span class="line">Hello Linux<span class="token operator">!</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ4ï¼‰æ¡ä»¶ç¼–è¯‘ï¼šä½¿ç”¨æ–‡ä»¶åç¼€</summary><ul><li>ä½¿ç”¨æ–‡ä»¶åç¼€ååŒºåˆ†ä¸åŒçš„ç¼–è¯‘å¹³å°</li></ul><p><code>main.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>hello_windows_amd64.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Windows!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p><code>hello_linux_amd64.go</code></p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Linux!&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># Windowsä¸Šæ‰§è¡Œ</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>go run <span class="token builtin class-name">.</span></span>
<span class="line">Hello Windows<span class="token operator">!</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Linuxä¸Šæ‰§è¡Œ</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go run .</span></span>
<span class="line">Hello Linux<span class="token operator">!</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="ç¼–è¯‘é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#ç¼–è¯‘é€‰é¡¹"><span>ç¼–è¯‘é€‰é¡¹</span></a></h3><ul><li><code>gc</code>ä»£è¡¨ç¼–è¯‘å™¨ï¼Œ<code>gcflags</code>ä»£è¡¨ç¼–è¯‘å™¨é€‰é¡¹ï¼ˆæ³¨æ„è¿™é‡Œçš„gcå’Œæˆ‘ä»¬å¹³å¸¸è¯´çš„åƒåœ¾å›æ”¶GCä¸æ˜¯ä¸€å›äº‹ï¼‰</li><li><code>ld</code>ä»£è¡¨é“¾æ¥å™¨ï¼Œ<code>ldflags</code> ä»£è¡¨é“¾æ¥å™¨é€‰é¡¹</li></ul><details class="hint-container details"><summary>ï¼ˆ1ï¼‰è‡ªåŠ¨æ³¨å…¥ç‰ˆæœ¬ä¿¡æ¯</summary><p><code>main.go</code>ï¼šè¿™åªæ˜¯ä¸€æ®µæ™®é€šçš„ã€ç®€å•çš„Goä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;os&quot;</span></span>
<span class="line">	<span class="token string">&quot;strings&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> <span class="token punctuation">(</span></span>
<span class="line">	Version   <span class="token builtin">string</span></span>
<span class="line">	GoVersion <span class="token builtin">string</span></span>
<span class="line">	GitCommit <span class="token builtin">string</span></span>
<span class="line">	BuildTime <span class="token builtin">string</span></span>
<span class="line">	OS        <span class="token builtin">string</span></span>
<span class="line">	Arch      <span class="token builtin">string</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	args <span class="token operator">:=</span> os<span class="token punctuation">.</span>Args</span>
<span class="line">	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">2</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">if</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;--version&quot;</span> <span class="token operator">||</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;-v&quot;</span> <span class="token punctuation">{</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Version:             %s\n&quot;</span><span class="token punctuation">,</span> Version<span class="token punctuation">)</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Go version:          %s\n&quot;</span><span class="token punctuation">,</span> GoVersion<span class="token punctuation">)</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Git commit:          %s\n&quot;</span><span class="token punctuation">,</span> GitCommit<span class="token punctuation">)</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Build time:          %s\n&quot;</span><span class="token punctuation">,</span> BuildTime<span class="token punctuation">)</span></span>
<span class="line">			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;OS/Arch:             %s/%s\n&quot;</span><span class="token punctuation">,</span> OS<span class="token punctuation">,</span> Arch<span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">return</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å®šä¹‰å˜é‡</span></span>
<span class="line"><span class="token assign-left variable">AppVersion</span><span class="token operator">=</span>v1.0.0</span>
<span class="line"><span class="token assign-left variable">GoVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go version <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $3}&#39;</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">GitCommit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> rev-parse <span class="token parameter variable">--short</span> HEAD <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">||</span> <span class="token builtin class-name">echo</span> unknown<span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">BuildTime</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d %H:%M:%S %Z %z&quot;</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">OS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOOS<span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">Arch</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOARCH<span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç”Ÿæˆflags</span></span>
<span class="line"><span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token string">&quot;-X main.Version=<span class="token variable">${AppVersion}</span> \</span>
<span class="line">       -X main.GoVersion=<span class="token variable">${GoVersion}</span> \</span>
<span class="line">       -X main.GitCommit=<span class="token variable">${GitCommit}</span> \</span>
<span class="line">       -X &#39;main.BuildTime=<span class="token variable">${BuildTime}</span>&#39; \</span>
<span class="line">       -X main.OS=<span class="token variable">${OS}</span> \</span>
<span class="line">       -X main.Arch=<span class="token variable">${Arch}</span>&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç¼–è¯‘</span></span>
<span class="line">go build <span class="token parameter variable">-ldflags</span> <span class="token string">&quot;<span class="token variable">${flags}</span>&quot;</span> <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¾“å‡ºç»“æœ</span></span>
<span class="line"><span class="token punctuation">[</span>root@localhost example<span class="token punctuation">]</span><span class="token comment"># ./example -v</span></span>
<span class="line">Version:             v1.0.0</span>
<span class="line">Go version:          go1.18.9</span>
<span class="line">Git commit:          unknown</span>
<span class="line">Build time:          <span class="token number">2023</span>-04-16 <span class="token number">13</span>:46:43 CST +0800</span>
<span class="line">OS/Arch:             linux/amd64</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ†æ</span></span>
<span class="line"><span class="token comment"># è¿™ç§æ–¹æ³•å¯¹äº go install å¾ˆä¸å‹å¥½</span></span>
<span class="line"></span></code></pre></div></details><br><h3 id="æ±‡ç¼–ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#æ±‡ç¼–ç›¸å…³"><span>æ±‡ç¼–ç›¸å…³</span></a></h3><details class="hint-container details"><summary>ï¼ˆ1ï¼‰æŸ¥çœ‹æ±‡ç¼–ä»£ç ï¼šä½¿ç”¨GoåŸç”Ÿæ–¹æ³•</summary><p>æˆ‘ä»¬é€šè¿‡åˆ†æ<code>new</code>ã€<code>make</code>ã€<code>go</code>ç­‰å…³é”®å­—çš„æ±‡ç¼–ä»£ç ï¼ŒæŸ¥æ‰¾ä»–ä»¬å®é™…è¿è¡Œçš„ä»£ç </p><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Empty <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">type</span> Point <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	X <span class="token builtin">int</span></span>
<span class="line">	Y <span class="token builtin">int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// new</span></span>
<span class="line">	empty <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Empty<span class="token punctuation">)</span> <span class="token comment">// ç¬¬14è¡Œ</span></span>
<span class="line">	point <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>Point<span class="token punctuation">)</span> <span class="token comment">// ç¬¬15è¡Œ</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// make</span></span>
<span class="line">	s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token comment">// ç¬¬18è¡Œ</span></span>
<span class="line">	m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">// ç¬¬19è¡Œ</span></span>
<span class="line">	c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>     <span class="token comment">// ç¬¬20è¡Œ</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// go</span></span>
<span class="line">	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç¬¬23è¡Œ</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span> <span class="token comment">// ç¬¬27è¡Œ</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æ–¹å¼1</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang ~<span class="token punctuation">]</span><span class="token comment"># go build -gcflags=&quot;-S&quot; main.go 2&gt;&amp;1 | grep -E &#39;main.go:&#39; | grep -E &#39;:14|:15|:18|:19|:20|:23|:27&#39;</span></span>
<span class="line">        0x0026 00038 <span class="token punctuation">(</span>/root/main.go:15<span class="token punctuation">)</span> LEAQ    type:main.Point<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, AX</span>
<span class="line">        0x002d 00045 <span class="token punctuation">(</span>/root/main.go:15<span class="token punctuation">)</span> PCDATA  <span class="token variable">$1</span>, <span class="token variable">$0</span></span>
<span class="line">        0x002d 00045 <span class="token punctuation">(</span>/root/main.go:15<span class="token punctuation">)</span> CALL    runtime.newobject<span class="token punctuation">(</span>SB<span class="token punctuation">)</span> <span class="token comment"># new(Point)è°ƒç”¨çš„æ˜¯runtime.newobjectå‡½æ•°</span></span>
<span class="line">        0x0032 00050 <span class="token punctuation">(</span>/root/main.go:15<span class="token punctuation">)</span> MOVQ    AX, main.point+40<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x0037 00055 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> XORL    BX, BX</span>
<span class="line">        0x0039 00057 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> MOVQ    BX, CX</span>
<span class="line">        0x003c 00060 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> LEAQ    type:int<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, AX</span>
<span class="line">        0x0043 00067 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> PCDATA  <span class="token variable">$1</span>, <span class="token variable">$1</span></span>
<span class="line">        0x0043 00067 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> CALL    runtime.makeslice<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>  <span class="token comment"># makeåˆå§‹åŒ–åˆ‡ç‰‡è°ƒç”¨çš„æ˜¯runtime.makesliceå‡½æ•°</span></span>
<span class="line">        0x0048 00072 <span class="token punctuation">(</span>/root/main.go:18<span class="token punctuation">)</span> MOVQ    AX, main<span class="token punctuation">..</span>autotmp_61+64<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x004d 00077 <span class="token punctuation">(</span>/root/main.go:19<span class="token punctuation">)</span> PCDATA  <span class="token variable">$1</span>, <span class="token variable">$2</span></span>
<span class="line">        0x004d 00077 <span class="token punctuation">(</span>/root/main.go:19<span class="token punctuation">)</span> CALL    runtime.makemap_small<span class="token punctuation">(</span>SB<span class="token punctuation">)</span> <span class="token comment"># makeåˆå§‹åŒ–mapè°ƒç”¨çš„æ˜¯runtime.makemap_smallå‡½æ•°</span></span>
<span class="line">        0x0052 00082 <span class="token punctuation">(</span>/root/main.go:19<span class="token punctuation">)</span> MOVQ    AX, main.m+48<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x0057 00087 <span class="token punctuation">(</span>/root/main.go:20<span class="token punctuation">)</span> XORL    BX, BX</span>
<span class="line">        0x0059 00089 <span class="token punctuation">(</span>/root/main.go:20<span class="token punctuation">)</span> LEAQ    type:chan struct <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, AX</span>
<span class="line">        0x0060 00096 <span class="token punctuation">(</span>/root/main.go:20<span class="token punctuation">)</span> PCDATA  <span class="token variable">$1</span>, <span class="token variable">$3</span></span>
<span class="line">        0x0060 00096 <span class="token punctuation">(</span>/root/main.go:20<span class="token punctuation">)</span> CALL    runtime.makechan<span class="token punctuation">(</span>SB<span class="token punctuation">)</span> <span class="token comment"># makeåˆå§‹åŒ–channelè°ƒç”¨çš„æ˜¯runtime.makechanå‡½æ•°</span></span>
<span class="line">        0x0065 00101 <span class="token punctuation">(</span>/root/main.go:20<span class="token punctuation">)</span> MOVQ    AX, main.c+56<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x006a 00106 <span class="token punctuation">(</span>/root/main.go:23<span class="token punctuation">)</span> LEAQ    main.main.func1Â·f<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, AX</span>
<span class="line">        0x0071 00113 <span class="token punctuation">(</span>/root/main.go:23<span class="token punctuation">)</span> PCDATA  <span class="token variable">$1</span>, <span class="token variable">$4</span></span>
<span class="line">        0x0071 00113 <span class="token punctuation">(</span>/root/main.go:23<span class="token punctuation">)</span> CALL    runtime.newproc<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>  <span class="token comment"># goå…³é”®å­—è°ƒç”¨çš„æ˜¯runtime.newprocå‡½æ•°</span></span>
<span class="line">        0x0076 00118 <span class="token punctuation">(</span>/root/main.go:27<span class="token punctuation">)</span> MOVUPS  X15, main<span class="token punctuation">..</span>autotmp_33+136<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x007f 00127 <span class="token punctuation">(</span>/root/main.go:27<span class="token punctuation">)</span> LEAQ    type:*main.Empty<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, CX</span>
<span class="line">        0x0086 00134 <span class="token punctuation">(</span>/root/main.go:27<span class="token punctuation">)</span> MOVQ    CX, main<span class="token punctuation">..</span>autotmp_33+136<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x008e 00142 <span class="token punctuation">(</span>/root/main.go:27<span class="token punctuation">)</span> LEAQ    runtime.zerobase<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, CX  <span class="token comment"># ç©ºç»“æ„ä½“å°±æ˜¯ä¸€ä¸ªå˜é‡: var zerobase uintptr</span></span>
<span class="line">        0x0095 00149 <span class="token punctuation">(</span>/root/main.go:27<span class="token punctuation">)</span> MOVQ    CX, main<span class="token punctuation">..</span>autotmp_33+144<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">        0x0000 00000 <span class="token punctuation">(</span>/root/main.go:23<span class="token punctuation">)</span> TEXT    main.main.func1<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, ABIInternal, <span class="token variable">$64</span>-0<span class="token comment"># è¿™é‡Œåˆåˆ°äº†23è¡Œè¯´æ˜è¾“å‡ºé¡ºåºä¸è¡Œå·å¹¶ä¸å®Œå…¨ä¸€è‡´</span></span>
<span class="line">        <span class="token punctuation">..</span>.</span>
<span class="line">        <span class="token comment"># åˆ†æ</span></span>
<span class="line">        <span class="token comment"># 1ã€é¦–å…ˆnew(Empty)å¯¹åº”çš„ä»£ç è°ƒç”¨å¹¶æ²¡æœ‰è¾“å‡ºå‡ºæ¥ï¼Œè¿™è¯´æ˜newå¯¹äºç©ºç»“æ„ä½“å’Œéç©ºç»“æ„ä½“çš„åˆå§‹åŒ–å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥åˆ†æ</span></span>
<span class="line">        <span class="token comment"># 2ã€é€šè¿‡ç¬¬27è¡Œå‘ç°newåˆå§‹åŒ–ç©ºç»“æ„ä½“æœ¬è´¨ä¸Šæ˜¯è¿”å›äº†ä¸€ä¸ªå…¨å±€çš„uintptrå˜é‡</span></span>
<span class="line">        <span class="token comment"># 3ã€makeåˆå§‹åŒ–mapè°ƒç”¨çš„æ˜¯runtime.makemap_small,æ ¹æ®åå­—å¯ä»¥çœ‹å‡ºå¯èƒ½æœ‰å¤šç§åˆå§‹åŒ–mapçš„æ–¹æ³•</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ–¹å¼2</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang ~<span class="token punctuation">]</span><span class="token comment"># go build main.go &amp;&amp; go tool objdump ./main | grep -E &#39;main.go:&#39; | grep -E &#39;:14|:15|:18|:19|:20|:23|:27&#39;</span></span>
<span class="line">  main.go:15            0x4804e6                488d05b3d60000          LEAQ 0xd6b3<span class="token punctuation">(</span>IP<span class="token punctuation">)</span>, AX</span>
<span class="line">  main.go:15            0x4804ed                e80ebcf8ff              CALL runtime.newobject<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:15            0x4804f2                <span class="token number">4889442428</span>              MOVQ AX, 0x28<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:18            0x4804f7                31db                    XORL BX, BX</span>
<span class="line">  main.go:18            0x4804f9                4889d9                  MOVQ BX, CX</span>
<span class="line">  main.go:18            0x4804fc                488d05fd790000          LEAQ 0x79fd<span class="token punctuation">(</span>IP<span class="token punctuation">)</span>, AX</span>
<span class="line">  main.go:18            0x480503                e8985afcff              CALL runtime.makeslice<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:18            0x480508                <span class="token number">4889442440</span>              MOVQ AX, 0x40<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:19            0x48050d                e82ec7f8ff              CALL runtime.makemap_small<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:19            0x480512                <span class="token number">4889442430</span>              MOVQ AX, 0x30<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:20            0x480517                31db                    XORL BX, BX</span>
<span class="line">  main.go:20            0x480519                488d05e0740000          LEAQ 0x74e0<span class="token punctuation">(</span>IP<span class="token punctuation">)</span>, AX</span>
<span class="line">  main.go:20            0x480520                e8db41f8ff              CALL runtime.makechan<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:20            0x480525                <span class="token number">4889442438</span>              MOVQ AX, 0x38<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:23            0x48052a                488d058f070200          LEAQ 0x2078f<span class="token punctuation">(</span>IP<span class="token punctuation">)</span>, AX</span>
<span class="line">  main.go:23            0x480531                e84ab7fbff              CALL runtime.newproc<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:27            0x480536                440f11bc2488000000      MOVUPS X15, 0x88<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:27            0x48053f                488d0dfa540000          LEAQ 0x54fa<span class="token punctuation">(</span>IP<span class="token punctuation">)</span>, CX</span>
<span class="line">  main.go:27            0x480546                48898c2488000000        MOVQ CX, 0x88<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:27            0x48054e                488d0dfb890d00          LEAQ runtime.zerobase<span class="token punctuation">(</span>SB<span class="token punctuation">)</span>, CX</span>
<span class="line">  main.go:27            0x480555                48898c2490000000        MOVQ CX, 0x90<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:23            0x4806a0                493b6610                CMPQ 0x10<span class="token punctuation">(</span>R14<span class="token punctuation">)</span>, SP</span>
<span class="line">  main.go:23            0x4806a4                <span class="token number">7656</span>                    JBE 0x4806fc</span>
<span class="line">  main.go:23            0x4806a6                4883ec40                SUBQ <span class="token variable">$0x40</span>, SP</span>
<span class="line">  main.go:23            0x4806aa                48896c2438              MOVQ BP, 0x38<span class="token punctuation">(</span>SP<span class="token punctuation">)</span></span>
<span class="line">  main.go:23            0x4806af                488d6c2438              LEAQ 0x38<span class="token punctuation">(</span>SP<span class="token punctuation">)</span>, BP</span>
<span class="line">  main.go:23            0x4806fc                0f1f4000                NOPL <span class="token number">0</span><span class="token punctuation">(</span>AX<span class="token punctuation">)</span></span>
<span class="line">  main.go:23            0x480700                e8fbaffdff              CALL runtime.morestack_noctxt.abi0<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line">  main.go:23            0x480705                eb99                    JMP main.main.func1<span class="token punctuation">(</span>SB<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ2ï¼‰æŸ¥çœ‹æ±‡ç¼–ä»£ç ï¼šä½¿ç”¨å¯è§†åŒ–å·¥å…·</summary><p>Githubï¼š<a href="https://github.com/loov/lensm" target="_blank" rel="noopener noreferrer">https://github.com/loov/lensm</a></p><p><strong>1ã€åŸºç¡€ä½¿ç”¨</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># å®‰è£…</span></span>
<span class="line">go <span class="token function">install</span> loov.dev/lensm@main</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç¼–è¯‘ç¨‹åº</span></span>
<span class="line">go build <span class="token builtin class-name">.</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æŸ¥çœ‹å¸®åŠ©</span></span>
<span class="line">D:<span class="token punctuation">\</span>application<span class="token punctuation">\</span>GoLand<span class="token punctuation">\</span>example<span class="token operator">&gt;</span>lensm <span class="token parameter variable">--help</span></span>
<span class="line">Usage of lensm:</span>
<span class="line">  <span class="token parameter variable">-context</span> int                         </span>
<span class="line">        <span class="token builtin class-name">source</span> line context <span class="token punctuation">(</span>default <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token parameter variable">-filter</span> string                       </span>
<span class="line">        filter the functions by regexp </span>
<span class="line">  <span class="token parameter variable">-font</span> string                         </span>
<span class="line">        user font                      </span>
<span class="line">  -text-size int                       </span>
<span class="line">        default font size <span class="token punctuation">(</span>default <span class="token number">12</span><span class="token punctuation">)</span> </span>
<span class="line">  <span class="token parameter variable">-watch</span>                               </span>
<span class="line">        auto reload executable</span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä½¿ç”¨lensmæŸ¥çœ‹æ±‡ç¼–</span></span>
<span class="line">lensm -text-size<span class="token operator">=</span><span class="token number">20</span> <span class="token parameter variable">--filter</span> main main.exe</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230225114831320.png" alt="image-20230225114831320"></p><p><strong>2ã€è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># æŒ‡å®šä¸€ä¸ªå¯ä»¥æ˜¾ç¤ºä¸­æ–‡çš„å­—ä½“,æ³¨æ„å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—ä½“éƒ½æ”¯æŒ</span></span>
<span class="line">lensm -text-size<span class="token operator">=</span><span class="token number">20</span> <span class="token parameter variable">--font</span> C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>Fonts<span class="token punctuation">\</span>simkai.ttf <span class="token parameter variable">--filter</span> main main.exe</span>
<span class="line"></span></code></pre></div><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230225124432270.png" alt="image-20230225124432270"></p><p>å­—ä½“æ–‡ä»¶åè·å–æ–¹æ³•</p><p><img src="https://tuchuang-1257805459.cos.accelerate.myqcloud.com//image-20230225124648047.png" alt="image-20230225124648047"></p><p><strong>3ã€windowsä¸Šè®¾ç½®åˆ«å</strong></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ä¸´æ—¶è®¾ç½®åˆ«å</span></span>
<span class="line">doskey <span class="token assign-left variable">lensm</span><span class="token operator">=</span>lensm -text-size<span class="token operator">=</span><span class="token number">16</span> <span class="token parameter variable">--font</span> C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>Fonts<span class="token punctuation">\</span>simkai.ttf <span class="token variable">$*</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä½¿ç”¨</span></span>
<span class="line">lensm <span class="token parameter variable">--filter</span> main main.exe</span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ°¸ä¹…è®¾ç½®åˆ«å</span></span>
<span class="line"><span class="token comment"># 1ã€åˆ°GOPATH/binç›®å½•ä¸‹æ‰¾åˆ°lensm.exeæ–‡ä»¶,æ”¹ä¸€ä¸ªä»»æ„åå­—,æ¯”å¦‚ lensm-original.exe</span></span>
<span class="line"><span class="token comment"># 2ã€æ–°å»ºä¸€ä¸ªlensm.batæ–‡ä»¶, ä½¿ç”¨ lensm --filter main.exe å³å¯</span></span>
<span class="line">@echo off</span>
<span class="line">lensm-original -text-size<span class="token operator">=</span><span class="token number">16</span> <span class="token parameter variable">--font</span> C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>Fonts<span class="token punctuation">\</span>simkai.ttf %*</span>
<span class="line"><span class="token comment"># 3ã€æ–°å»ºä¸€ä¸ªlensmm.batæ–‡ä»¶,ç”¨äºå›ºå®š --filter main å‚æ•°ï¼Œ ä½¿ç”¨ lensmm main.exe å³å¯</span></span>
<span class="line">@echo off</span>
<span class="line">lensm-original -text-size<span class="token operator">=</span><span class="token number">16</span> <span class="token parameter variable">--font</span> C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>Fonts<span class="token punctuation">\</span>simkai.ttf <span class="token parameter variable">--filter</span> main %*</span>
<span class="line"></span></code></pre></div></details><details class="hint-container details"><summary>ï¼ˆ3ï¼‰æŸ¥çœ‹äºŒè¿›åˆ¶æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…</summary><div class="language-go" data-highlighter="prismjs" data-ext="go"><pre><code class="language-go"><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">        <span class="token string">&quot;log&quot;</span></span>
<span class="line">        <span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ç›‘å¬åœ°å€</span></span>
<span class="line">        addr <span class="token operator">:=</span> <span class="token string">&quot;127.0.0.1:80&quot;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å®ä¾‹åŒ–Ginè·¯ç”±å¼•æ“</span></span>
<span class="line">        r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ³¨å†Œè·¯ç”±</span></span>
<span class="line">        r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                c<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;Hello Gin!\n&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å¯åŠ¨Gin Server</span></span>
<span class="line">        log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>è¾“å‡ºç»“æœ</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># ç¼–è¯‘</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go build -o main main.go</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é€šè¿‡äºŒè¿›åˆ¶å¯ä»¥å‘ç°å…¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å—ä»¥åŠæ˜¯å¦å¼€å¯CGOç­‰ä¿¡æ¯</span></span>
<span class="line"><span class="token punctuation">[</span>root@ap-hongkang demo<span class="token punctuation">]</span><span class="token comment"># go version -m main</span></span>
<span class="line">main: go1.19.2</span>
<span class="line">        path    command-line-arguments</span>
<span class="line">        dep     github.com/gin-contrib/sse      v0.1.0  h1:Y/yl/+YNO8GZSjAhjMsSuLt29uWRFHdHYUb5lYOV9qE<span class="token operator">=</span></span>
<span class="line">        dep     github.com/gin-gonic/gin        v1.8.2  h1:UzKToD9/PoFj/V4rvlKqTRKnQYyz8Sc1MJlv4JHPtvY<span class="token operator">=</span></span>
<span class="line">        dep     github.com/go-playground/locales        v0.14.1 h1:EWaQ/wswjilfKLTECiXz7Rh+3BjFhfDFKv/oXslEjJA<span class="token operator">=</span></span>
<span class="line">        dep     github.com/go-playground/universal-translator   v0.18.1 h1:Bcnm0ZwsGyWbCzImXv+pAJnYK9S473LQFuzCbDbfSFY<span class="token operator">=</span></span>
<span class="line">        dep     github.com/go-playground/validator/v10  v10.11.2        h1:q3SHpufmypg+erIExEKUmsgmhDTyhcJ38oeKGACXohU<span class="token operator">=</span></span>
<span class="line">        dep     github.com/leodido/go-urn       v1.2.1  h1:BqpAaACuzVSgi/VLzGZIobT2z4v53pjosyNd9Yv6n/w<span class="token operator">=</span></span>
<span class="line">        dep     github.com/mattn/go-isatty      v0.0.17 h1:BTarxUcIeDqL27Mc+vyvdWYSL28zpIhv3RoTdsLMPng<span class="token operator">=</span></span>
<span class="line">        dep     github.com/pelletier/go-toml/v2 v2.0.6  h1:nrzqCb7j9cDFj2coyLNLaZuJTLjWjlaz6nvTvIwycIU<span class="token operator">=</span></span>
<span class="line">        dep     github.com/ugorji/go/codec      v1.2.8  h1:sgBJS6COt0b/P40VouWKdseidkDgHxYGm0SAglUHfP0<span class="token operator">=</span></span>
<span class="line">        dep     golang.org/x/crypto     v0.5.0  h1:U/0M97KRkSFvyD/3FSmdP5W5swImpNgle/EHFhOsQPE<span class="token operator">=</span></span>
<span class="line">        dep     golang.org/x/net        v0.5.0  h1:GyT4nK/YDHSqa1c4753ouYCDajOYKTja9Xb/OHtgvSw<span class="token operator">=</span></span>
<span class="line">        dep     golang.org/x/sys        v0.4.0  h1:Zr2JFtRQNX3BCZ8YtxRE9hNJYC8J6I1MVbMg6owUp18<span class="token operator">=</span></span>
<span class="line">        dep     golang.org/x/text       v0.6.0  h1:3XmdazWV+ubf7QgHSTWeykHOci5oeekaGJBLkrkaw4k<span class="token operator">=</span></span>
<span class="line">        dep     google.golang.org/protobuf      v1.28.1 h1:d0NfwRgPtno5B1Wa6L2DAG+KivqkdutMf1UhdNx175w<span class="token operator">=</span></span>
<span class="line">        dep     gopkg.in/yaml.v2        v2.4.0  h1:D8xgwECY7CYvx+Y2n4sBz93Jn9JRvxdiyyo8CTfuKaY<span class="token operator">=</span></span>
<span class="line">        build   <span class="token parameter variable">-compiler</span><span class="token operator">=</span>gc</span>
<span class="line">        build   <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span></span>
<span class="line">        build   <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64</span>
<span class="line">        build   <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux</span>
<span class="line">        build   <span class="token assign-left variable">GOAMD64</span><span class="token operator">=</span>v1</span>
<span class="line"></span></code></pre></div></details></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">æœ€è¿‘æ›´æ–°: </span><time class="meta-item-info" datetime="2026-01-09T09:36:17.000Z" data-allow-mismatch>2026/1/9 09:36</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">ä½œè€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1835363399@qq.com">VVFock3r</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BW1Rdw-6.js" defer></script>
  </body>
</html>
